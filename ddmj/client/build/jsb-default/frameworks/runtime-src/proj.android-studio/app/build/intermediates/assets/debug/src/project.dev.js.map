{"version":3,"sources":["assets/scripts/components/Alert.js","assets/scripts/AnysdkMgr.js","assets/scripts/AudioMgr.js","assets/scripts/components/Chat.js","assets/scripts/components/CheckBox.js","assets/scripts/components/CreateRole.js","assets/scripts/components/CreateRoom.js","assets/scripts/components/DingQue.js","assets/scripts/components/Folds.js","assets/scripts/GameNetMgr.js","assets/scripts/components/GameOver.js","assets/scripts/components/GameResult.js","assets/scripts/Global.js","assets/scripts/HTTP.js","assets/scripts/components/Hall.js","assets/scripts/components/History.js","assets/scripts/HotUpdate.js","assets/scripts/components/HuanSanZhang.js","assets/scripts/components/ImageLoader.js","assets/scripts/components/JoinGameInput.js","assets/scripts/components/LoadingLogic.js","assets/scripts/components/Login.js","assets/scripts/components/MJGame.js","assets/scripts/components/MJRoom.js","assets/scripts/MahjongMgr.js","assets/scripts/Net.js","assets/scripts/components/NoticeTip.js","assets/scripts/components/OnBack.js","assets/scripts/components/PengGangs.js","assets/scripts/components/PopupMgr.js","assets/scripts/components/RadioButton.js","assets/scripts/components/RadioGroupMgr.js","assets/scripts/components/ReConnect.js","assets/scripts/components/ReplayCtrl.js","assets/scripts/ReplayMgr.js","assets/scripts/components/Seat.js","assets/scripts/components/Settings.js","assets/scripts/components/TimePointer.js","assets/scripts/components/UserInfoShow.js","assets/scripts/UserMgr.js","assets/scripts/Utils.js","assets/scripts/VoiceMgr.js","assets/scripts/components/Voice.js","assets/scripts/components/WaitingConnection.js","assets/scripts/3rdparty/socket-io.js"],"names":["cc","Class","extends","Component","properties","_alert","_btnOK","_btnCancel","_title","_content","_onok","onLoad","vv","this","find","getComponent","Label","utils","addClickEvent","node","active","alert","onBtnClicked","event","target","name","show","title","content","onok","needcancel","string","x","onDestory","_isCapturing","init","ANDROID_API","IOS_API","login","sys","os","OS_ANDROID","jsb","reflection","callStaticMethod","OS_IOS","console","log","share","desc","SI","appweb","shareResult","size","director","getWinSize","currentDate","Date","fileName","fullPath","fileUtils","getWritablePath","isFileExist","removeFile","texture","RenderTexture","Math","floor","width","height","setPosition","p","begin","getRunningScene","visit","end","saveToFile","IMAGE_FORMAT_JPG","self","tryTimes","fn","scale","setTimeout","onLoginResp","code","ret","errcode","localStorage","setItem","account","sign","userMgr","onAuth","http","sendRequest","bgmVolume","sfxVolume","bgmAudioID","t","getItem","parseFloat","game","on","EVENT_HIDE","audioEngine","pauseAll","EVENT_SHOW","resumeAll","getUrl","url","raw","playBGM","audioUrl","stop","play","playSFX","audioId","setSFXVolume","v","setBGMVolume","force","resume","pause","setVolume","_chatRoot","_tabQuick","_tabEmoji","_iptChat","_quickChatInfo","_btnChat","chat","getChildByName","replayMgr","isReplay","EditBox","index","sound","getQuickChatInfo","key","onBtnChatClicked","onBgClicked","onTabClicked","onQuickChatItemClicked","info","net","send","onEmojiItemClicked","onBtnSendChatClicked","Node","sprite","SpriteFrame","checkedSprite","checked","refresh","onClicked","targetSprite","Sprite","spriteFrame","inputName","onRandomBtnClicked","names","names2","idx","random","length","idx2","isNative","isMobile","cvs","Canvas","fitHeight","fitWidth","onBtnConfirmClicked","create","_difenxuanze","_zimo","_wanfaxuanze","_zuidafanshu","_jushuxuanze","_dianganghua","_leixingxuanze","i","childrenCount","n","children","push","onBtnBack","onBtnOK","createRoom","onCreate","wc","hide","gameNetMgr","connectGameServer","difen","zimo","huansanzhang","jiangdui","menqing","tiandihu","type","zuidafanshu","jushuxuanze","dianganghua","conf","data","JSON","stringify","queYiMen","tips","selected","dingques","initView","initDingQue","initEventHandlers","gameChild","isDingQueing","arr","side","seat","dingque","reset","gamestate","showDingQueChoice","seatIndex","getSeatIndexByID","localIndex","getLocalIndex","sd","getSelfData","typeCounts","holds","pai","mahjongmgr","getMahjongType","min","minIndex","Animation","seats","que","setInteractable","j","onQueYiMenClicked","value","Button","interactable","_folds","initEventHandler","initAllFolds","sides","sideName","sideRoot","folds","foldRoot","hideAllFolds","k","f","initFolds","seatData","seatindex","pre","getFoldPre","getSide","foldsSprites","setSpriteFrameByMJID","mjid","getSpriteFrameByMJID","dataEventHandler","roomId","maxNumOfGames","numOfGames","numOfMJ","turn","button","chupai","isHuanSanZhang","isOver","dissoveData","curaction","pengs","angangs","diangangs","wangangs","ready","hued","huanpais","huanpaimethod","clear","dispatchEvent","emit","userId","s","userid","isOwner","getSeatByID","prepareReplay","roomInfo","detailOfGame","id","base_info","baseInfo","score","game_seats","getWanfa","maxGames","maxFan","strArr","hsz","join","initHandlers","addHandler","roomid","numofgames","errmsg","loadScene","oldRoomId","online","numofmj","state","chuPai","iszimo","huinfo","turnUserID","si","doTurnChange","results","totalscore","endinfo","doHu","doChupai","doMopai","doGuo","time","method","doPeng","doGang","gangtype","indexOf","splice","getGangType","cnt","last","ip","port","onConnectOK","token","onConnectFailed","connect","_gameover","_gameresult","_seats","_isGameEnd","_pingju","_win","_lose","wanfa","listRoot","sn","viewdata","username","reason","fan","hu","mahjongs","zhuang","hupai","_pengandgang","onGameOver","onGameOver_XZDD","onGameOver_XLCH","myscore","seatView","userData","numOfGangs","numOfGen","numofgen","actionArr","is7pairs","ischadajiao","actions","ac","pattern","qingyise","zhongzhang","jingouhu","haidihu","tianhu","dihu","o","huorder","pop","sortMJ","lackingNum","gangs","initPengAndGangs","hupaiRoot","hi","ishupai","hupaiView","str","sep","dataseat","action","flag","pgroot","instantiate","pengPrefabSelf","addChild","sprites","getComponentsInChildren","isGang","scaleX","scaleY","getEmptySpriteFrame","onBtnReadyClicked","onBtnShareClicked","btnClose","btnShare","onGameEnd","showResult","isZuiJiaPaoShou","numzimo","numjiepao","numdianpao","numangang","numminggang","numchadajiao","maxscore","maxdianpao","dianpaogaoshou","isBigwin","setInfo","setID","onBtnCloseClicked","anysdkMgr","Global","statics","isstarted","netinited","userguid","nickname","money","lv","URL","VERSION","HTTP","sessionId","master_url","path","handler","extraUrl","xhr","loader","getXMLHttpRequest","timeout","requestURL","encodeURI","open","setRequestHeader","onreadystatechange","readyState","status","responseText","parse","e","Net","require","lblName","lblMoney","lblGems","lblID","lblNotice","joinGameWin","createRoomWin","settingsWin","helpWin","xiaoxiWin","btnJoinGame","btnReturnGame","sprHeadImg","initNetHandlers","onShare","initLabels","enterRoom","imgLoader","setUserID","addComponent","initButtonHandler","notice","version","msg","gemstip","refreshInfo","refreshNotice","refreshGemsTip","audioMgr","onGet","gems","bind","replace","btnPath","btn","userName","coins","userinfoShow","sex","onJoinGameClicked","onReturnGameClicked","onBtnAddGemsClicked","onCreateRoomClicked","update","dt","roomData","HistoryItemPrefab","default","Prefab","_history","_viewlist","_viewitemTemp","_historyData","_curRoomInfo","_emptyTip","removeChild","component","eventHandler","EventHandler","clickEvents","onBtnBackClicked","initRoomHistoryList","onBtnHistoryClicked","getHistoryList","sort","a","b","Buffer","toString","dateFormat","date","datetime","year","getFullYear","month","getMonth","day","getDate","h","getHours","m","getMinutes","getSeconds","format","getViewItem","titleId","btnOp","shrinkContent","initGameHistoryList","create_time","result","num","lastOne","getGameListOfRoom","getGamesOfRoom","uuid","getDetailOfGame","roomUUID","action_records","onViewItemClicked","onBtnOpClicked","parent","updatePanel","manifestUrl","RawAsset","percent","lblErr","checkCb","getEventCode","EventAssetsManager","ERROR_NO_LOCAL_MANIFEST","eventManager","removeListener","_checkListener","ERROR_DOWNLOAD_MANIFEST","ERROR_PARSE_MANIFEST","ALREADY_UP_TO_DATE","NEW_VERSION_FOUND","_needUpdate","hotUpdate","updateCb","needRestart","failed","UPDATE_PROGRESSION","getPercent","percentByFile","getPercentByFile","getMessage","toFixed","UPDATE_FINISHED","UPDATE_FAILED","_failCount","_am","downloadFailedAssets","ERROR_UPDATING","getAssetId","ERROR_DECOMPRESS","_updateListener","searchPaths","getSearchPaths","newPaths","getLocalManifest","Array","prototype","unshift","setSearchPaths","restart","EventListenerAssetsManager","addListener","storagePath","AssetsManager","retain","isLoaded","checkUpdate","onDestroy","release","_huanpaitip","_huanpaiArr","showHuanpai","initHuaipaiInfo","btnOk","y","huaipaiinfo","hpm","rotation","onHuanSanZhang","mjId","nt","p1","p2","p3","loadImage","callback","load","err","tex","Rect","getBaseInfo","baseInfoMap","headimgurl","setupSpriteFrame","images","_spriteFrame","spr","nums","_inputIndex","onEnable","onResetClicked","onInputFinished","onInput","parseRoomID","onN0Clicked","onN1Clicked","onN2Clicked","onN3Clicked","onN4Clicked","onN5Clicked","onN6Clicked","onN7Clicked","onN8Clicked","onN9Clicked","onDelClicked","onCloseClicked","tipLabel","_stateStr","_progress","_splash","_isLoading","initMgr","start","SHOW_TIME","FADE_TIME","checkVersion","now","op","opacity","UserMgr","ReplayMgr","global","GameNetMgr","AnysdkMgr","VoiceMgr","voiceMgr","AudioMgr","Utils","args","urlParse","params","window","location","href","substr","split","substring","onGetVersion","startPreloading","complete","fnRequest","abort","onBtnDownloadClicked","openURL","onProgress","completedCount","totalCount","item","loadResDir","assets","onLoadComplete","onComplete","String","arguments","_typeof","reg","RegExp","undefined","_mima","_mimaIndex","OS_WINDOWS","onBtnQuickStartClicked","guestAuth","onBtnWeichatClicked","onBtnMIMAClicked","gameRoot","prepareRoot","_myMJArr","_options","_selectedMJ","_chupaiSprite","_mjcount","_gamecount","_hupaiTips","_hupaiLists","_playEfxs","_opts","initWanfaLabel","onGameBeign","myselfChild","myholds","realwidth","view","getVisibleSize","sideChild","opt","opts","hideOptions","hideChupai","initMahjongs","checkQueYiMen","initMopai","showAction","initHupai","initOtherMahjongs","playEfx","showChupai","getAudioURLByMJID","addOption","btnName","child","gang","peng","gangpai","gp","hupailist","hupainode","nc","holdsEmpty","onMJClicked","shoot","getMJIndex","lastIndex","getHoldsEmptySpriteFrame","initEmptySprites","sideHolds","sortHolds","lasetIdx","mopai","l","hasQue","onOptionClicked","lblRoomNo","_seats2","_timeLabel","_voiceMsgQueue","_lastPlayingSeat","_playingSeat","_lastPlayTime","initSeats","prepare","refreshBtns","sideNode","btnWechat","titles","btnExit","btnDispress","btnWeichat","btnBack","isIdle","initSingleSeat","refreshXuanPaiState","localIdx","playVoice","sender","emoji","isOffline","isZhuang","setReady","setOffline","voiceMsg","setZhuang","onBtnSettingsClicked","popupMgr","showSettings","onBtnDissolveClicked","onBtnExit","shift","msgInfo","msgfile","writeVoice","minutes","_lastMinute","onPlayerOver","mahjongSprites","leftAtlas","SpriteAtlas","rightAtlas","bottomAtlas","bottomFoldAtlas","pengPrefabLeft","emptyAtlas","_sides","_pres","_foldPres","getMahjongSpriteByID","spriteFrameName","getSpriteFrame","realId","t1","t2","getPre","io","sio","isPinging","fnDisconnect","handlers","fnConnect","fnError","reconnection","force new connection","transports","connected","close","startHearbeat","lastRecieveTime","setInterval","ping","disconnect","test","fnResult","isonline","_guohu","_info","_guohuTime","myself","pengangroot","onPengGangChanged","onGameBein","hideSide","setLocalZOrder","_popuproot","_settings","_dissolveNotice","_endTime","_extraInfo","_noticeLabel","closeAll","addBtnHandler","showDissolveNotice","showDissolveRequest","states","lastTime","ceil","groupId","radiogroupmgr","RadioGroupMgr","add","check","del","_groups","radioButton","buttons","_reconnect","_lblTip","_lastPing","fnTestServerOn","off","_nextPlayTime","_replay","_isPlaying","onBtnPauseClicked","onBtnPlayClicked","takeAction","ACTION_CHUPAI","ACTION_MOPAI","ACTION_PENG","ACTION_GANG","ACTION_HU","_lastAction","_actionRecords","_currentIndex","getNextAction","nextActionDelay","_sprIcon","_zhuang","_ready","_offline","_lblName","_lblScore","_scoreBg","_nddayingjia","_voicemsg","_chatBubble","_emoji","_lastChatTime","_userName","_score","_dayingjia","_isOffline","_isReady","_isZhuang","_userId","_xuanpai","onIconClicked","iconSprite","dayingjia","isReady","idNode","lbl","_btnYXOpen","_btnYXClose","_btnYYOpen","_btnYYClose","slider","addSlideEvent","refreshVolume","onSlided","progress","yx","Slider","yy","removeItem","_arrow","_pointer","_time","_alertTime","initPointer","_userinfo","sex_female","sex_male","exp","hall","onLogin","onEnter","history","slideEvents","radix","base","crypto","fromCharCode","encodermap","decodermap","encode","len","c","d","getCode","charCodeAt","charAt","decode","newData","Uint8Array","onPlayCallback","_voiceMediaPath","setStorageDir","filename","clearCache","cancel","voiceData","fileData","writeDataToFile","getVoiceLevel","maxLevel","getVoiceData","getDataFromFile","download","dir","isDirectoryExist","createDirectory","_lastTouchTime","_voice","_volume","_voice_failed","_lastCheckTime","_timeBar","MAX_TIME","btnVoice","EventType","TOUCH_START","TOUCH_MOVE","TOUCH_END","onVoiceOK","TOUCH_CANCEL","onBtnOKClicked","_isShow","lblContent"],"mappings":"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","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _alert:null,\r\n        _btnOK:null,\r\n        _btnCancel:null,\r\n        _title:null,\r\n        _content:null,\r\n        _onok:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        this._alert = cc.find(\"Canvas/alert\");\r\n        this._title = cc.find(\"Canvas/alert/title\").getComponent(cc.Label);\r\n        this._content = cc.find(\"Canvas/alert/content\").getComponent(cc.Label);\r\n        \r\n        this._btnOK = cc.find(\"Canvas/alert/btn_ok\");\r\n        this._btnCancel = cc.find(\"Canvas/alert/btn_cancel\");\r\n        \r\n        cc.vv.utils.addClickEvent(this._btnOK,this.node,\"Alert\",\"onBtnClicked\");\r\n        cc.vv.utils.addClickEvent(this._btnCancel,this.node,\"Alert\",\"onBtnClicked\");\r\n        \r\n        this._alert.active = false;\r\n        cc.vv.alert = this;\r\n    },\r\n    \r\n    onBtnClicked:function(event){\r\n        if(event.target.name == \"btn_ok\"){\r\n            if(this._onok){\r\n                this._onok();\r\n            }\r\n        }\r\n        this._alert.active = false;\r\n        this._onok = null;\r\n    },\r\n    \r\n    show:function(title,content,onok,needcancel){\r\n        this._alert.active = true;\r\n        this._onok = onok;\r\n        this._title.string = title;\r\n        this._content.string = content;\r\n        if(needcancel){\r\n            this._btnCancel.active = true;\r\n            this._btnOK.x = -150;\r\n            this._btnCancel.x = 150;\r\n        }\r\n        else{\r\n            this._btnCancel.active = false;\r\n            this._btnOK.x = 0;\r\n        }\r\n    },\r\n    \r\n    onDestory:function(){\r\n        if(cc.vv){\r\n            cc.vv.alert = null;    \r\n        }\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _isCapturing:false,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n    \r\n    init:function(){\r\n        this.ANDROID_API = \"com/vivigames/scmj/WXAPI\";\r\n        this.IOS_API = \"AppController\";\r\n    },\r\n    \r\n    login:function(){\r\n        if(cc.sys.os == cc.sys.OS_ANDROID){ \r\n            jsb.reflection.callStaticMethod(this.ANDROID_API, \"Login\", \"()V\");\r\n        }\r\n        else if(cc.sys.os == cc.sys.OS_IOS){\r\n            jsb.reflection.callStaticMethod(this.IOS_API, \"login\");\r\n        }\r\n        else{\r\n            console.log(\"platform:\" + cc.sys.os + \" dosn't implement share.\");\r\n        }\r\n    },\r\n    \r\n    share:function(title,desc){\r\n        if(cc.sys.os == cc.sys.OS_ANDROID){\r\n            jsb.reflection.callStaticMethod(this.ANDROID_API, \"Share\", \"(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V\",cc.vv.SI.appweb,title,desc);\r\n        }\r\n        else if(cc.sys.os == cc.sys.OS_IOS){\r\n            jsb.reflection.callStaticMethod(this.IOS_API, \"share:shareTitle:shareDesc:\",cc.vv.SI.appweb,title,desc);\r\n        }\r\n        else{\r\n            console.log(\"platform:\" + cc.sys.os + \" dosn't implement share.\");\r\n        }\r\n    },\r\n    \r\n    shareResult:function(){\r\n        if(this._isCapturing){\r\n            return;\r\n        }\r\n        this._isCapturing = true;\r\n        var size = cc.director.getWinSize();\r\n        var currentDate = new Date();\r\n        var fileName = \"result_share.jpg\";\r\n        var fullPath = jsb.fileUtils.getWritablePath() + fileName;\r\n        if(jsb.fileUtils.isFileExist(fullPath)){\r\n            jsb.fileUtils.removeFile(fullPath);\r\n        }\r\n        var texture = new cc.RenderTexture(Math.floor(size.width), Math.floor(size.height));\r\n        texture.setPosition(cc.p(size.width/2, size.height/2));\r\n        texture.begin();\r\n        cc.director.getRunningScene().visit();\r\n        texture.end();\r\n        texture.saveToFile(fileName, cc.IMAGE_FORMAT_JPG);\r\n        \r\n        var self = this;\r\n        var tryTimes = 0;\r\n        var fn = function(){\r\n            if(jsb.fileUtils.isFileExist(fullPath)){\r\n                var height = 100;\r\n                var scale = height/size.height;\r\n\t\t\t    var width = Math.floor(size.width * scale);\r\n                \r\n                if(cc.sys.os == cc.sys.OS_ANDROID){\r\n                    jsb.reflection.callStaticMethod(self.ANDROID_API, \"ShareIMG\", \"(Ljava/lang/String;II)V\",fullPath,width,height);\r\n                }\r\n                else if(cc.sys.os == cc.sys.OS_IOS){\r\n                    jsb.reflection.callStaticMethod(self.IOS_API, \"shareIMG:width:height:\",fullPath,width,height);\r\n                }\r\n                else{\r\n                    console.log(\"platform:\" + cc.sys.os + \" dosn't implement share.\");\r\n                }\r\n                self._isCapturing = false;\r\n            }\r\n            else{\r\n                tryTimes++;\r\n                if(tryTimes > 10){\r\n                    console.log(\"time out...\");\r\n                    return;\r\n                }\r\n                setTimeout(fn,50); \r\n            }\r\n        }\r\n        setTimeout(fn,50);\r\n    },\r\n    \r\n    onLoginResp:function(code){\r\n        var fn = function(ret){\r\n            if(ret.errcode == 0){\r\n                cc.sys.localStorage.setItem(\"wx_account\",ret.account);\r\n                cc.sys.localStorage.setItem(\"wx_sign\",ret.sign);\r\n            }\r\n            cc.vv.userMgr.onAuth(ret);\r\n        }\r\n        cc.vv.http.sendRequest(\"/wechat_auth\",{code:code,os:cc.sys.os},fn);\r\n    },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        bgmVolume:1.0,\r\n        sfxVolume:1.0,\r\n        \r\n        bgmAudioID:-1,\r\n    },\r\n\r\n    // use this for initialization\r\n    init: function () {\r\n        var t = cc.sys.localStorage.getItem(\"bgmVolume\");\r\n        if(t != null){\r\n            this.bgmVolume = parseFloat(t);    \r\n        }\r\n        \r\n        var t = cc.sys.localStorage.getItem(\"sfxVolume\");\r\n        if(t != null){\r\n            this.sfxVolume = parseFloat(t);    \r\n        }\r\n        \r\n        cc.game.on(cc.game.EVENT_HIDE, function () {\r\n            console.log(\"cc.audioEngine.pauseAll\");\r\n            cc.audioEngine.pauseAll();\r\n        });\r\n        cc.game.on(cc.game.EVENT_SHOW, function () {\r\n            console.log(\"cc.audioEngine.resumeAll\");\r\n            cc.audioEngine.resumeAll();\r\n        });\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n    \r\n    getUrl:function(url){\r\n        return cc.url.raw(\"resources/sounds/\" + url);\r\n    },\r\n    \r\n    playBGM(url){\r\n        var audioUrl = this.getUrl(url);\r\n        console.log(audioUrl);\r\n        if(this.bgmAudioID >= 0){\r\n            cc.audioEngine.stop(this.bgmAudioID);\r\n        }\r\n        this.bgmAudioID = cc.audioEngine.play(audioUrl,true,this.bgmVolume);\r\n    },\r\n    \r\n    playSFX(url){\r\n        var audioUrl = this.getUrl(url);\r\n        if(this.sfxVolume > 0){\r\n            var audioId = cc.audioEngine.play(audioUrl,false,this.sfxVolume);    \r\n        }\r\n    },\r\n    \r\n    setSFXVolume:function(v){\r\n        if(this.sfxVolume != v){\r\n            cc.sys.localStorage.setItem(\"sfxVolume\",v);\r\n            this.sfxVolume = v;\r\n        }\r\n    },\r\n    \r\n    setBGMVolume:function(v,force){\r\n        if(this.bgmAudioID >= 0){\r\n            if(v > 0){\r\n                cc.audioEngine.resume(this.bgmAudioID);\r\n            }\r\n            else{\r\n                cc.audioEngine.pause(this.bgmAudioID);\r\n            }\r\n            //cc.audioEngine.setVolume(this.bgmAudioID,this.bgmVolume);\r\n        }\r\n        if(this.bgmVolume != v || force){\r\n            cc.sys.localStorage.setItem(\"bgmVolume\",v);\r\n            this.bgmVolume = v;\r\n            cc.audioEngine.setVolume(this.bgmAudioID,v);\r\n        }\r\n    },\r\n    \r\n    pauseAll:function(){\r\n        cc.audioEngine.pauseAll();\r\n    },\r\n    \r\n    resumeAll:function(){\r\n        cc.audioEngine.resumeAll();\r\n    }\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _chatRoot:null,\r\n        _tabQuick:null,\r\n        _tabEmoji:null,\r\n        _iptChat:null,\r\n        \r\n        _quickChatInfo:null,\r\n        _btnChat:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        \r\n        cc.vv.chat = this;\r\n        \r\n        this._btnChat = this.node.getChildByName(\"btn_chat\");\r\n        this._btnChat.active = cc.vv.replayMgr.isReplay() == false;\r\n        \r\n        this._chatRoot = this.node.getChildByName(\"chat\");\r\n        this._chatRoot.active = false;\r\n        \r\n        this._tabQuick = this._chatRoot.getChildByName(\"quickchatlist\");\r\n        this._tabEmoji = this._chatRoot.getChildByName(\"emojis\");\r\n        \r\n        this._iptChat = this._chatRoot.getChildByName(\"iptChat\").getComponent(cc.EditBox);\r\n        \r\n        \r\n        this._quickChatInfo = {};\r\n        this._quickChatInfo[\"item0\"] = {index:0,content:\"快点啊，都等到我花儿都谢谢了！\",sound:\"fix_msg_1.mp3\"};\r\n        this._quickChatInfo[\"item1\"] = {index:1,content:\"怎么又断线了，网络怎么这么差啊！\",sound:\"fix_msg_2.mp3\"};\r\n        this._quickChatInfo[\"item2\"] = {index:2,content:\"不要走，决战到天亮！\",sound:\"fix_msg_3.mp3\"};\r\n        this._quickChatInfo[\"item3\"] = {index:3,content:\"你的牌打得也太好了！\",sound:\"fix_msg_4.mp3\"};\r\n        this._quickChatInfo[\"item4\"] = {index:4,content:\"你是妹妹还是哥哥啊？\",sound:\"fix_msg_5.mp3\"};\r\n        this._quickChatInfo[\"item5\"] = {index:5,content:\"和你合作真是太愉快了！\",sound:\"fix_msg_6.mp3\"};\r\n        this._quickChatInfo[\"item6\"] = {index:6,content:\"大家好，很高兴见到各位！\",sound:\"fix_msg_7.mp3\"};\r\n        this._quickChatInfo[\"item7\"] = {index:7,content:\"各位，真是不好意思，我得离开一会儿。\",sound:\"fix_msg_8.mp3\"};\r\n        this._quickChatInfo[\"item8\"] = {index:8,content:\"不要吵了，专心玩游戏吧！\",sound:\"fix_msg_9.mp3\"};\r\n    },\r\n    \r\n    getQuickChatInfo(index){\r\n        var key = \"item\" + index;\r\n        return this._quickChatInfo[key];   \r\n    },\r\n    \r\n    onBtnChatClicked:function(){\r\n        this._chatRoot.active = true;\r\n    },\r\n    \r\n    onBgClicked:function(){\r\n        this._chatRoot.active = false;\r\n    },\r\n    \r\n    onTabClicked:function(event){\r\n        if(event.target.name == \"tabQuick\"){\r\n            this._tabQuick.active = true;\r\n            this._tabEmoji.active = false;\r\n        }\r\n        else if(event.target.name == \"tabEmoji\"){\r\n            this._tabQuick.active = false;\r\n            this._tabEmoji.active = true;\r\n        }\r\n    },\r\n    \r\n    onQuickChatItemClicked:function(event){\r\n        this._chatRoot.active = false;\r\n        var info = this._quickChatInfo[event.target.name];\r\n        cc.vv.net.send(\"quick_chat\",info.index); \r\n    },\r\n    \r\n    onEmojiItemClicked:function(event){\r\n        console.log(event.target.name);\r\n        this._chatRoot.active = false;\r\n        cc.vv.net.send(\"emoji\",event.target.name);\r\n    },\r\n    \r\n    onBtnSendChatClicked:function(){\r\n        this._chatRoot.active = false;\r\n        if(this._iptChat.string == \"\"){\r\n            return;\r\n        }\r\n        cc.vv.net.send(\"chat\",this._iptChat.string);\r\n        this._iptChat.string = \"\";\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        target:cc.Node,\r\n        sprite:cc.SpriteFrame,\r\n        checkedSprite:cc.SpriteFrame,\r\n        checked:false,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this.refresh();\r\n    },\r\n    \r\n    onClicked:function(){\r\n        this.checked = !this.checked;\r\n        this.refresh();\r\n    },\r\n    \r\n    refresh:function(){\r\n        var targetSprite = this.target.getComponent(cc.Sprite);\r\n        if(this.checked){\r\n            targetSprite.spriteFrame = this.checkedSprite;\r\n        }\r\n        else{\r\n            targetSprite.spriteFrame = this.sprite;\r\n        }\r\n    }\r\n    \r\n    \r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        inputName:cc.EditBox,\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n    \r\n    onRandomBtnClicked:function(){\r\n        var names = [\r\n            \"上官\",\r\n            \"欧阳\",\r\n            \"东方\",\r\n            \"端木\",\r\n            \"独孤\",\r\n            \"司马\",\r\n            \"南宫\",\r\n            \"夏侯\",\r\n            \"诸葛\",\r\n            \"皇甫\",\r\n            \"长孙\",\r\n            \"宇文\",\r\n            \"轩辕\",\r\n            \"东郭\",\r\n            \"子车\",\r\n            \"东阳\",\r\n            \"子言\",\r\n        ];\r\n        \r\n        var names2 = [\r\n            \"雀圣\",\r\n            \"赌侠\",\r\n            \"赌圣\",\r\n            \"稳赢\",\r\n            \"不输\",\r\n            \"好运\",\r\n            \"自摸\",\r\n            \"有钱\",\r\n            \"土豪\",\r\n        ];\r\n        var idx = Math.floor(Math.random() * (names.length - 1));\r\n        var idx2 = Math.floor(Math.random() * (names2.length - 1));\r\n        this.inputName.string = names[idx] + names2[idx2];\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(!cc.sys.isNative && cc.sys.isMobile){\r\n            var cvs = this.node.getComponent(cc.Canvas);\r\n            cvs.fitHeight = true;\r\n            cvs.fitWidth = true;\r\n        }\r\n        this.onRandomBtnClicked();\r\n    },\r\n\r\n    onBtnConfirmClicked:function(){\r\n        var name = this.inputName.string;\r\n        if(name == \"\"){\r\n            console.log(\"invalid name.\");\r\n            return;\r\n        }\r\n        console.log(name);\r\n        cc.vv.userMgr.create(name);\r\n    }\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _difenxuanze:null,\r\n        _zimo:null,\r\n        _wanfaxuanze:null,\r\n        _zuidafanshu:null,\r\n        _jushuxuanze:null,\r\n        _dianganghua:null,\r\n        _leixingxuanze:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._leixingxuanze = [];\r\n        var t = this.node.getChildByName(\"leixingxuanze\");\r\n        for(var i = 0; i < t.childrenCount; ++i){\r\n            var n = t.children[i].getComponent(\"RadioButton\");\r\n            if(n != null){\r\n                this._leixingxuanze.push(n);\r\n            }\r\n        }\r\n        \r\n        this._difenxuanze = [];\r\n        var t = this.node.getChildByName(\"difenxuanze\");\r\n        for(var i = 0; i < t.childrenCount; ++i){\r\n            var n = t.children[i].getComponent(\"RadioButton\");\r\n            if(n != null){\r\n                this._difenxuanze.push(n);\r\n            }\r\n        }\r\n        //console.log(this._difenxuanze);\r\n        \r\n        this._zimo = [];\r\n        var t = this.node.getChildByName(\"zimojiacheng\");\r\n        for(var i = 0; i < t.childrenCount; ++i){\r\n            var n = t.children[i].getComponent(\"RadioButton\");\r\n            if(n != null){\r\n                this._zimo.push(n);\r\n            }\r\n        }\r\n        //console.log(this._zimo);\r\n        \r\n        this._wanfaxuanze = [];\r\n        var t = this.node.getChildByName(\"wanfaxuanze\");\r\n        for(var i = 0; i < t.childrenCount; ++i){\r\n            var n = t.children[i].getComponent(\"CheckBox\");\r\n            if(n != null){\r\n                this._wanfaxuanze.push(n);\r\n            }\r\n        }\r\n        //console.log(this._wanfaxuanze);\r\n        \r\n        this._zuidafanshu = [];\r\n        var t = this.node.getChildByName(\"zuidafanshu\");\r\n        for(var i = 0; i < t.childrenCount; ++i){\r\n            var n = t.children[i].getComponent(\"RadioButton\");\r\n            if(n != null){\r\n                this._zuidafanshu.push(n);\r\n            }\r\n        }\r\n        //console.log(this._zuidafanshu);\r\n        \r\n        this._jushuxuanze = [];\r\n        var t = this.node.getChildByName(\"xuanzejushu\");\r\n        for(var i = 0; i < t.childrenCount; ++i){\r\n            var n = t.children[i].getComponent(\"RadioButton\");\r\n            if(n != null){\r\n                this._jushuxuanze.push(n);\r\n            }\r\n        }\r\n        \r\n        this._dianganghua = [];\r\n        var t = this.node.getChildByName(\"dianganghua\");\r\n        for(var i = 0; i < t.childrenCount; ++i){\r\n            var n = t.children[i].getComponent(\"RadioButton\");\r\n            if(n != null){\r\n                this._dianganghua.push(n);\r\n            }\r\n        }\r\n        //console.log(this._jushuxuanze);\r\n    },\r\n    \r\n    onBtnBack:function(){\r\n        this.node.active = false;\r\n    },\r\n    \r\n    onBtnOK:function(){\r\n        this.node.active = false;\r\n        this.createRoom();\r\n    },\r\n    \r\n    createRoom:function(){\r\n        var self = this;\r\n        var onCreate = function(ret){\r\n            if(ret.errcode !== 0){\r\n                cc.vv.wc.hide();\r\n                //console.log(ret.errmsg);\r\n                if(ret.errcode == 2222){\r\n                    cc.vv.alert.show(\"提示\",\"房卡不足，创建房间失败!\");  \r\n                }\r\n                else{\r\n                    cc.vv.alert.show(\"提示\",\"创建房间失败,错误码:\" + ret.errcode);\r\n                }\r\n            }\r\n            else{\r\n                cc.vv.gameNetMgr.connectGameServer(ret);\r\n            }\r\n        };\r\n        \r\n        var difen = 0;\r\n        for(var i = 0; i < self._difenxuanze.length; ++i){\r\n            if(self._difenxuanze[i].checked){\r\n                difen = i;\r\n                break;\r\n            }\r\n        }\r\n        \r\n        var zimo = 0;\r\n        for(var i = 0; i < self._zimo.length; ++i){\r\n            if(self._zimo[i].checked){\r\n                zimo = i;\r\n                break;\r\n            }     \r\n        }\r\n\r\n        var huansanzhang = self._wanfaxuanze[0].checked;        \r\n        var jiangdui = self._wanfaxuanze[1].checked;\r\n        var menqing = self._wanfaxuanze[2].checked;\r\n        var tiandihu = self._wanfaxuanze[3].checked;\r\n        \r\n        var type = 0;\r\n        for(var i = 0; i < self._leixingxuanze.length; ++i){\r\n            if(self._leixingxuanze[i].checked){\r\n                type = i;\r\n                break;\r\n            }     \r\n        }\r\n        \r\n        if(type == 0){\r\n            type = \"xzdd\";\r\n        }\r\n        else{\r\n            type = \"xlch\";\r\n        }\r\n        \r\n        var zuidafanshu = 0;\r\n        for(var i = 0; i < self._zuidafanshu.length; ++i){\r\n            if(self._zuidafanshu[i].checked){\r\n                zuidafanshu = i;\r\n                break;\r\n            }     \r\n        }\r\n        \r\n        \r\n        var jushuxuanze = 0;\r\n        for(var i = 0; i < self._jushuxuanze.length; ++i){\r\n            if(self._jushuxuanze[i].checked){\r\n                jushuxuanze = i;\r\n                break;\r\n            }     \r\n        }\r\n        \r\n        var dianganghua = 0;\r\n        for(var i = 0; i < self._dianganghua.length; ++i){\r\n            if(self._dianganghua[i].checked){\r\n                dianganghua = i;\r\n                break;\r\n            }     \r\n        }\r\n        \r\n        var conf = {\r\n            type:type,\r\n            difen:difen,\r\n            zimo:zimo,\r\n            jiangdui:jiangdui,\r\n            huansanzhang:huansanzhang,\r\n            zuidafanshu:zuidafanshu,\r\n            jushuxuanze:jushuxuanze,\r\n            dianganghua:dianganghua,\r\n            menqing:menqing,\r\n            tiandihu:tiandihu,   \r\n        }; \r\n        \r\n        var data = {\r\n            account:cc.vv.userMgr.account,\r\n            sign:cc.vv.userMgr.sign,\r\n            conf:JSON.stringify(conf)\r\n        };\r\n        console.log(data);\r\n        cc.vv.wc.show(\"正在创建房间\");\r\n        cc.vv.http.sendRequest(\"/create_private_room\",data,onCreate);   \r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        queYiMen:null,\r\n        tips:[],\r\n        selected:[],\r\n        dingques:[],\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        this.initView();\r\n        this.initDingQue();\r\n        this.initEventHandlers();\r\n    },\r\n    \r\n    initView:function(){\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        this.queYiMen = gameChild.getChildByName(\"dingque\");\r\n        this.queYiMen.active = cc.vv.gameNetMgr.isDingQueing;\r\n        \r\n        var arr = [\"myself\",\"right\",\"up\",\"left\"];\r\n        for(var i = 0; i < arr.length; ++i){\r\n            var side = gameChild.getChildByName(arr[i]);\r\n            var seat = side.getChildByName(\"seat\");\r\n            var dingque = seat.getChildByName(\"que\");\r\n            this.dingques.push(dingque);\r\n        }\r\n        this.reset();\r\n        \r\n        var tips = this.queYiMen.getChildByName(\"tips\");\r\n        for(var i = 0; i < tips.childrenCount; ++i){\r\n            var n = tips.children[i];\r\n            this.tips.push(n.getComponent(cc.Label));\r\n        }\r\n        \r\n        if(cc.vv.gameNetMgr.gamestate == \"dingque\"){\r\n            this.showDingQueChoice();\r\n        }\r\n    },\r\n    \r\n    initEventHandlers:function(){\r\n        var self = this;\r\n        this.node.on('game_dingque',function(data){\r\n            self.showDingQueChoice();\r\n        });\r\n        \r\n        this.node.on('game_dingque_notify',function(data){\r\n            var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(data);\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\r\n            console.log(\"game_dingque_notify:\" + localIndex);\r\n            self.tips[localIndex].node.active = true;\r\n        });\r\n        \r\n        this.node.on('game_dingque_finish',function(){\r\n            //通知每一个玩家定缺的花色\r\n            self.queYiMen.active = false;\r\n            cc.vv.gameNetMgr.isDingQueing = false;\r\n            self.initDingQue();\r\n        });\r\n    },\r\n    \r\n    showDingQueChoice:function(){\r\n        this.queYiMen.active = true;\r\n        var sd = cc.vv.gameNetMgr.getSelfData();\r\n        var typeCounts = [0,0,0];\r\n        for(var i = 0; i < sd.holds.length; ++i){\r\n            var pai = sd.holds[i];\r\n            var type = cc.vv.mahjongmgr.getMahjongType(pai);\r\n            typeCounts[type]++;\r\n        }\r\n        \r\n        var min = 65535;\r\n        var minIndex = 0;\r\n        for(var i = 0; i < typeCounts.length; ++i){\r\n            if(typeCounts[i] < min){\r\n                min = typeCounts[i];\r\n                minIndex = i;\r\n            }\r\n        }\r\n        \r\n        var arr = [\"tong\",\"tiao\",\"wan\"];\r\n        for(var i = 0; i < arr.length; ++i){\r\n            var node = this.queYiMen.getChildByName(arr[i]);\r\n            if(minIndex == i){\r\n                node.getComponent(cc.Animation).play(\"dingque_tuijian\");\r\n            }\r\n            else{\r\n                node.getComponent(cc.Animation).stop();\r\n            }\r\n            //this.queYiMen.getChildByName(arr[i]).getChildByName('jian').active = minIndex == i;    \r\n        }\r\n        \r\n        this.reset();\r\n        for(var i = 0; i < this.tips.length; ++i){\r\n            var n = this.tips[i];\r\n            if(i > 0){\r\n                n.node.active = false;                \r\n            }\r\n            else{\r\n                n.node.active = true;\r\n            }\r\n        }\r\n    },\r\n    \r\n    initDingQue:function(){\r\n        var arr = [\"tong\",\"tiao\",\"wan\"];\r\n        var data = cc.vv.gameNetMgr.seats;\r\n        for(var i = 0; i < data.length; ++i){\r\n            var que = data[i].dingque;\r\n            if(que == null || que < 0 || que >= arr.length){\r\n                que = null;\r\n            }\r\n            else{\r\n                que = arr[que]; \r\n            }\r\n            \r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);\r\n            if(que){\r\n                this.dingques[localIndex].getChildByName(que).active = true;    \r\n            }\r\n        }\r\n    },\r\n    \r\n    reset:function(){\r\n        this.setInteractable(true);\r\n        \r\n        this.selected.push(this.queYiMen.getChildByName(\"tong_selected\"));\r\n        this.selected.push(this.queYiMen.getChildByName(\"tiao_selected\"));\r\n        this.selected.push(this.queYiMen.getChildByName(\"wan_selected\"));\r\n        for(var i = 0; i < this.selected.length; ++i){\r\n            this.selected[i].active = false;\r\n        }        \r\n        \r\n        for(var i = 0; i < this.dingques.length; ++i){\r\n            for(var j = 0; j < this.dingques[i].children.length; ++j){\r\n                this.dingques[i].children[j].active = false;    \r\n            }\r\n        }\r\n    },\r\n    \r\n    onQueYiMenClicked:function(event){\r\n        var type = 0;\r\n        if(event.target.name == \"tong\"){\r\n            type = 0;\r\n        }\r\n        else if(event.target.name == \"tiao\"){\r\n            type = 1;\r\n        }\r\n        else if(event.target.name == \"wan\"){\r\n            type = 2;\r\n        }\r\n        \r\n        for(var i = 0; i < this.selected.length; ++i){\r\n            this.selected[i].active = false;\r\n        }  \r\n        this.selected[type].active = true;\r\n        cc.vv.gameNetMgr.dingque = type;\r\n        cc.vv.net.send(\"dingque\",type);\r\n        \r\n        //this.setInteractable(false);\r\n    },\r\n    \r\n    setInteractable:function(value){\r\n        this.queYiMen.getChildByName(\"tong\").getComponent(cc.Button).interactable = value;\r\n        this.queYiMen.getChildByName(\"tiao\").getComponent(cc.Button).interactable = value;\r\n        this.queYiMen.getChildByName(\"wan\").getComponent(cc.Button).interactable = value;        \r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _folds:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        \r\n        this.initView();\r\n        this.initEventHandler();\r\n        \r\n        this.initAllFolds();\r\n    },\r\n    \r\n    initView:function(){\r\n        this._folds = {};\r\n        var game = this.node.getChildByName(\"game\");\r\n        var sides = [\"myself\",\"right\",\"up\",\"left\"];\r\n        for(var i = 0; i < sides.length; ++i){\r\n            var sideName = sides[i];\r\n            var sideRoot = game.getChildByName(sideName);\r\n            var folds = [];\r\n            var foldRoot = sideRoot.getChildByName(\"folds\");\r\n            for(var j = 0; j < foldRoot.children.length; ++j){\r\n                var n = foldRoot.children[j];\r\n                n.active = false;\r\n                var sprite = n.getComponent(cc.Sprite); \r\n                sprite.spriteFrame = null;\r\n                folds.push(sprite);            \r\n            }\r\n            this._folds[sideName] = folds; \r\n        }\r\n        \r\n        this.hideAllFolds();\r\n    },\r\n    \r\n    hideAllFolds:function(){\r\n        for(var k in this._folds){\r\n            var f = this._folds[i];\r\n            for(var i in f){\r\n                f[i].node.active = false;\r\n            }\r\n        }\r\n    },\r\n    \r\n    initEventHandler:function(){\r\n        var self = this;\r\n        this.node.on('game_begin',function(data){\r\n            self.initAllFolds();\r\n        });  \r\n        \r\n        this.node.on('game_sync',function(data){\r\n            self.initAllFolds();\r\n        });\r\n        \r\n        this.node.on('game_chupai_notify',function(data){\r\n            self.initFolds(data);\r\n        });\r\n        \r\n        this.node.on('guo_notify',function(data){\r\n            self.initFolds(data);\r\n        });\r\n    },\r\n    \r\n    initAllFolds:function(){\r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        for(var i in seats){\r\n            this.initFolds(seats[i]);\r\n        }\r\n    },\r\n    \r\n    initFolds:function(seatData){\r\n        var folds = seatData.folds;\r\n        if(folds == null){\r\n            return;\r\n        }\r\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatData.seatindex);\r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        \r\n        var foldsSprites = this._folds[side];\r\n        for(var i = 0; i < foldsSprites.length; ++i){\r\n            var index = i;\r\n            if(side == \"right\" || side == \"up\"){\r\n                index = foldsSprites.length - i - 1;\r\n            }\r\n            var sprite = foldsSprites[index];\r\n            sprite.node.active = true;\r\n            this.setSpriteFrameByMJID(pre,sprite,folds[i]);\r\n        }\r\n        for(var i = folds.length; i < foldsSprites.length; ++i){\r\n            var index = i;\r\n            if(side == \"right\" || side == \"up\"){\r\n                index = foldsSprites.length - i - 1;\r\n            }\r\n            var sprite = foldsSprites[index];\r\n            \r\n            sprite.spriteFrame = null;\r\n            sprite.node.active = false;\r\n        }  \r\n    },\r\n    \r\n    setSpriteFrameByMJID:function(pre,sprite,mjid){\r\n        sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid);\r\n        sprite.node.active = true;\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        dataEventHandler:null,\r\n        roomId:null,\r\n        maxNumOfGames:0,\r\n        numOfGames:0,\r\n        numOfMJ:0,\r\n        seatIndex:-1,\r\n        seats:null,\r\n        turn:-1,\r\n        button:-1,\r\n        dingque:-1,\r\n        chupai:-1,\r\n        isDingQueing:false,\r\n        isHuanSanZhang:false,\r\n        gamestate:\"\",\r\n        isOver:false,\r\n        dissoveData:null,\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n    \r\n    reset:function(){\r\n        this.turn = -1;\r\n        this.chupai = -1,\r\n        this.dingque = -1;\r\n        this.button = -1;\r\n        this.gamestate = \"\";\r\n        this.dingque = -1;\r\n        this.isDingQueing = false;\r\n        this.isHuanSanZhang = false;\r\n        this.curaction = null;\r\n        for(var i = 0; i < this.seats.length; ++i){\r\n            this.seats[i].holds = [];\r\n            this.seats[i].folds = [];\r\n            this.seats[i].pengs = [];\r\n            this.seats[i].angangs = [];\r\n            this.seats[i].diangangs = [];\r\n            this.seats[i].wangangs = [];\r\n            this.seats[i].dingque = -1;\r\n            this.seats[i].ready = false;\r\n            this.seats[i].hued = false;\r\n            this.seats[i].huanpais = null;\r\n            this.huanpaimethod = -1;\r\n        }\r\n    },\r\n    \r\n    clear:function(){\r\n        this.dataEventHandler = null;\r\n        if(this.isOver == null){\r\n            this.seats = null;\r\n            this.roomId = null;\r\n            this.maxNumOfGames = 0;\r\n            this.numOfGames = 0;        \r\n        }\r\n    },\r\n    \r\n    dispatchEvent(event,data){\r\n        if(this.dataEventHandler){\r\n            this.dataEventHandler.emit(event,data);\r\n        }    \r\n    },\r\n    \r\n    getSeatIndexByID:function(userId){\r\n        for(var i = 0; i < this.seats.length; ++i){\r\n            var s = this.seats[i];\r\n            if(s.userid == userId){\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    },\r\n    \r\n    isOwner:function(){\r\n        return this.seatIndex == 0;   \r\n    },\r\n    \r\n    getSeatByID:function(userId){\r\n        var seatIndex = this.getSeatIndexByID(userId);\r\n        var seat = this.seats[seatIndex];\r\n        return seat;\r\n    },\r\n    \r\n    getSelfData:function(){\r\n        return this.seats[this.seatIndex];\r\n    },\r\n    \r\n    getLocalIndex:function(index){\r\n        var ret = (index - this.seatIndex + 4) % 4;\r\n        return ret;\r\n    },\r\n    \r\n    prepareReplay:function(roomInfo,detailOfGame){\r\n        this.roomId = roomInfo.id;\r\n        this.seats = roomInfo.seats;\r\n        this.turn = detailOfGame.base_info.button;\r\n        var baseInfo = detailOfGame.base_info;\r\n        for(var i = 0; i < this.seats.length; ++i){\r\n            var s = this.seats[i];\r\n            s.seatindex = i;\r\n            s.score = null;\r\n            s.holds = baseInfo.game_seats[i];\r\n            s.pengs = [];\r\n            s.angangs = [];\r\n            s.diangangs = [];\r\n            s.wangangs = [];\r\n            s.folds = [];\r\n            console.log(s);\r\n            if(cc.vv.userMgr.userId == s.userid){\r\n                this.seatIndex = i;\r\n            }\r\n        }\r\n        this.conf = {\r\n            type:baseInfo.type,\r\n        }\r\n        if(this.conf.type == null){\r\n            this.conf.type == \"xzdd\";\r\n        }\r\n    },\r\n    \r\n    getWanfa:function(){\r\n        var conf = this.conf;\r\n        if(conf && conf.maxGames!=null && conf.maxFan!=null){\r\n            var strArr = [];\r\n            strArr.push(conf.maxGames + \"局\");\r\n            strArr.push(conf.maxFan + \"番封顶\");\r\n            if(conf.hsz){\r\n                strArr.push(\"换三张\");   \r\n            }\r\n            if(conf.zimo == 1){\r\n                strArr.push(\"自摸加番\");\r\n            }\r\n            else{\r\n                strArr.push(\"自摸加底\");\r\n            }\r\n            if(conf.jiangdui){\r\n                strArr.push(\"将对\");   \r\n            }\r\n            if(conf.dianganghua == 1){\r\n                strArr.push(\"点杠花(自摸)\");   \r\n            }\r\n            else{\r\n                strArr.push(\"点杠花(放炮)\");\r\n            }\r\n            if(conf.menqing){\r\n                strArr.push(\"门清、中张\");   \r\n            }\r\n            if(conf.tiandihu){\r\n                strArr.push(\"天地胡\");   \r\n            }\r\n            return strArr.join(\" \");\r\n        }\r\n        return \"\";\r\n    },\r\n    \r\n    initHandlers:function(){\r\n        var self = this;\r\n        cc.vv.net.addHandler(\"login_result\",function(data){\r\n            console.log(data);\r\n            if(data.errcode === 0){\r\n                var data = data.data;\r\n                self.roomId = data.roomid;\r\n                self.conf = data.conf;\r\n                self.maxNumOfGames = data.conf.maxGames;\r\n                self.numOfGames = data.numofgames;\r\n                self.seats = data.seats;\r\n                self.seatIndex = self.getSeatIndexByID(cc.vv.userMgr.userId);\r\n                self.isOver = false;\r\n            }\r\n            else{\r\n                console.log(data.errmsg);   \r\n            }\r\n        });\r\n                \r\n        cc.vv.net.addHandler(\"login_finished\",function(data){\r\n            console.log(\"login_finished\");\r\n            cc.director.loadScene(\"mjgame\");\r\n        });\r\n\r\n        cc.vv.net.addHandler(\"exit_result\",function(data){\r\n            self.roomId = null;\r\n            self.turn = -1;\r\n            self.dingque = -1;\r\n            self.isDingQueing = false;\r\n            self.seats = null;\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"exit_notify_push\",function(data){\r\n           var userId = data;\r\n           var s = self.getSeatByID(userId);\r\n           if(s != null){\r\n               s.userid = 0;\r\n               s.name = \"\";\r\n               self.dispatchEvent(\"user_state_changed\",s);\r\n           }\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"dispress_push\",function(data){\r\n            self.roomId = null;\r\n            self.turn = -1;\r\n            self.dingque = -1;\r\n            self.isDingQueing = false;\r\n            self.seats = null;\r\n        });\r\n                \r\n        cc.vv.net.addHandler(\"disconnect\",function(data){\r\n            if(self.roomId == null){\r\n                cc.director.loadScene(\"hall\");\r\n            }\r\n            else{\r\n                if(self.isOver == false){\r\n                    cc.vv.userMgr.oldRoomId = self.roomId;\r\n                    self.dispatchEvent(\"disconnect\");                    \r\n                }\r\n                else{\r\n                    self.roomId = null;\r\n                }\r\n            }\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"new_user_comes_push\",function(data){\r\n            console.log(data);\r\n            var seatIndex = data.seatindex;\r\n            if(self.seats[seatIndex].userid > 0){\r\n                self.seats[seatIndex].online = true;\r\n            }\r\n            else{\r\n                data.online = true;\r\n                self.seats[seatIndex] = data;\r\n            }\r\n            self.dispatchEvent('new_user',self.seats[seatIndex]);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"user_state_push\",function(data){\r\n            //console.log(data);\r\n            var userId = data.userid;\r\n            var seat = self.getSeatByID(userId);\r\n            seat.online = data.online;\r\n            self.dispatchEvent('user_state_changed',seat);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"user_ready_push\",function(data){\r\n            //console.log(data);\r\n            var userId = data.userid;\r\n            var seat = self.getSeatByID(userId);\r\n            seat.ready = data.ready;\r\n            self.dispatchEvent('user_state_changed',seat);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_holds_push\",function(data){\r\n            var seat = self.seats[self.seatIndex]; \r\n            console.log(data);\r\n            seat.holds = data;\r\n            \r\n            for(var i = 0; i < self.seats.length; ++i){\r\n                var s = self.seats[i]; \r\n                if(s.folds == null){\r\n                    s.folds = [];\r\n                }\r\n                if(s.pengs == null){\r\n                    s.pengs = [];\r\n                }\r\n                if(s.angangs == null){\r\n                    s.angangs = [];\r\n                }\r\n                if(s.diangangs == null){\r\n                    s.diangangs = [];\r\n                }\r\n                if(s.wangangs == null){\r\n                    s.wangangs = [];\r\n                }\r\n                s.ready = false;\r\n            }\r\n            self.dispatchEvent('game_holds');\r\n        });\r\n         \r\n        cc.vv.net.addHandler(\"game_begin_push\",function(data){\r\n            console.log('game_action_push');\r\n            console.log(data);\r\n            self.button = data;\r\n            self.turn = self.button;\r\n            self.gamestate = \"begin\";\r\n            self.dispatchEvent('game_begin');\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_playing_push\",function(data){\r\n            console.log('game_playing_push'); \r\n            self.gamestate = \"playing\"; \r\n            self.dispatchEvent('game_playing');\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_sync_push\",function(data){\r\n            console.log(\"game_sync_push\");\r\n            console.log(data);\r\n            self.numOfMJ = data.numofmj;\r\n            self.gamestate = data.state;\r\n            if(self.gamestate == \"dingque\"){\r\n                self.isDingQueing = true;\r\n            }\r\n            else if(self.gamestate == \"huanpai\"){\r\n                self.isHuanSanZhang = true;\r\n            }\r\n            self.turn = data.turn;\r\n            self.button = data.button;\r\n            self.chupai = data.chuPai;\r\n            self.huanpaimethod = data.huanpaimethod;\r\n            for(var i = 0; i < 4; ++i){\r\n                var seat = self.seats[i];\r\n                var sd = data.seats[i];\r\n                seat.holds = sd.holds;\r\n                seat.folds = sd.folds;\r\n                seat.angangs = sd.angangs;\r\n                seat.diangangs = sd.diangangs;\r\n                seat.wangangs = sd.wangangs;\r\n                seat.pengs = sd.pengs;\r\n                seat.dingque = sd.que;\r\n                seat.hued = sd.hued; \r\n                seat.iszimo = sd.iszimo;\r\n                seat.huinfo = sd.huinfo;\r\n                seat.huanpais = sd.huanpais;\r\n                if(i == self.seatIndex){\r\n                    self.dingque = sd.que;\r\n                }\r\n           }\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_dingque_push\",function(data){\r\n            self.isDingQueing = true;\r\n            self.isHuanSanZhang = false;\r\n            self.dispatchEvent('game_dingque');\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_huanpai_push\",function(data){\r\n            self.isHuanSanZhang = true;\r\n            self.dispatchEvent('game_huanpai');\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"hangang_notify_push\",function(data){\r\n            self.dispatchEvent('hangang_notify',data);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_action_push\",function(data){\r\n            self.curaction = data;\r\n            console.log(data);\r\n            self.dispatchEvent('game_action',data);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_chupai_push\",function(data){\r\n            console.log('game_chupai_push');\r\n            //console.log(data);\r\n            var turnUserID = data;\r\n            var si = self.getSeatIndexByID(turnUserID);\r\n            self.doTurnChange(si);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_num_push\",function(data){\r\n            self.numOfGames = data;\r\n            self.dispatchEvent('game_num',data);\r\n        });\r\n\r\n        cc.vv.net.addHandler(\"game_over_push\",function(data){\r\n            console.log('game_over_push');\r\n            var results = data.results;\r\n            for(var i = 0; i <  self.seats.length; ++i){\r\n                self.seats[i].score = results.length == 0? 0:results[i].totalscore;\r\n            }\r\n            self.dispatchEvent('game_over',results);\r\n            if(data.endinfo){\r\n                self.isOver = true;\r\n                self.dispatchEvent('game_end',data.endinfo);    \r\n            }\r\n            self.reset();\r\n            for(var i = 0; i <  self.seats.length; ++i){\r\n                self.dispatchEvent('user_state_changed',self.seats[i]);    \r\n            }\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"mj_count_push\",function(data){\r\n            console.log('mj_count_push');\r\n            self.numOfMJ = data;\r\n            //console.log(data);\r\n            self.dispatchEvent('mj_count',data);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"hu_push\",function(data){\r\n            console.log('hu_push');\r\n            console.log(data);\r\n            self.doHu(data);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_chupai_notify_push\",function(data){\r\n            var userId = data.userId;\r\n            var pai = data.pai;\r\n            var si = self.getSeatIndexByID(userId);\r\n            self.doChupai(si,pai);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_mopai_push\",function(data){\r\n            console.log('game_mopai_push');\r\n            self.doMopai(self.seatIndex,data);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"guo_notify_push\",function(data){\r\n            console.log('guo_notify_push');\r\n            var userId = data.userId;\r\n            var pai = data.pai;\r\n            var si = self.getSeatIndexByID(userId);\r\n            self.doGuo(si,pai);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"guo_result\",function(data){\r\n            console.log('guo_result');\r\n            self.dispatchEvent('guo_result');\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"guohu_push\",function(data){\r\n            console.log('guohu_push');\r\n            self.dispatchEvent(\"push_notice\",{info:\"过胡\",time:1.5});\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"huanpai_notify\",function(data){\r\n            var seat = self.getSeatByID(data.si);\r\n            seat.huanpais = data.huanpais;\r\n            self.dispatchEvent('huanpai_notify',seat);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_huanpai_over_push\",function(data){\r\n            console.log('game_huanpai_over_push');\r\n            var info = \"\";\r\n            var method = data.method;\r\n            if(method == 0){\r\n                info = \"换对家牌\";\r\n            }\r\n            else if(method == 1){\r\n                info = \"换下家牌\";\r\n            }\r\n            else{\r\n                info = \"换上家牌\";\r\n            }\r\n            self.huanpaimethod = method;\r\n            cc.vv.gameNetMgr.isHuanSanZhang = false;\r\n            self.dispatchEvent(\"game_huanpai_over\");\r\n            self.dispatchEvent(\"push_notice\",{info:info,time:2});\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"peng_notify_push\",function(data){\r\n            console.log('peng_notify_push');\r\n            console.log(data);\r\n            var userId = data.userid;\r\n            var pai = data.pai;\r\n            var si = self.getSeatIndexByID(userId);\r\n            self.doPeng(si,data.pai);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"gang_notify_push\",function(data){\r\n            console.log('gang_notify_push');\r\n            console.log(data);\r\n            var userId = data.userid;\r\n            var pai = data.pai;\r\n            var si = self.getSeatIndexByID(userId);\r\n            self.doGang(si,pai,data.gangtype);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_dingque_notify_push\",function(data){\r\n            self.dispatchEvent('game_dingque_notify',data);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_dingque_finish_push\",function(data){\r\n            for(var i = 0; i < data.length; ++i){\r\n                self.seats[i].dingque = data[i];\r\n            }\r\n            self.dispatchEvent('game_dingque_finish',data);\r\n        });\r\n        \r\n        \r\n        cc.vv.net.addHandler(\"chat_push\",function(data){\r\n            self.dispatchEvent(\"chat_push\",data);    \r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"quick_chat_push\",function(data){\r\n            self.dispatchEvent(\"quick_chat_push\",data);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"emoji_push\",function(data){\r\n            self.dispatchEvent(\"emoji_push\",data);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"dissolve_notice_push\",function(data){\r\n            console.log(\"dissolve_notice_push\"); \r\n            console.log(data);\r\n            self.dissoveData = data;\r\n            self.dispatchEvent(\"dissolve_notice\",data);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"dissolve_cancel_push\",function(data){\r\n            self.dissoveData = null;\r\n            self.dispatchEvent(\"dissolve_cancel\",data);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"voice_msg_push\",function(data){\r\n            self.dispatchEvent(\"voice_msg\",data);\r\n        });\r\n    },\r\n    \r\n    doGuo:function(seatIndex,pai){\r\n        var seatData = this.seats[seatIndex];\r\n        var folds = seatData.folds;\r\n        folds.push(pai);\r\n        this.dispatchEvent('guo_notify',seatData);    \r\n    },\r\n    \r\n    doMopai:function(seatIndex,pai){\r\n        var seatData = this.seats[seatIndex];\r\n        if(seatData.holds){\r\n            seatData.holds.push(pai);\r\n            this.dispatchEvent('game_mopai',{seatIndex:seatIndex,pai:pai});            \r\n        }\r\n    },\r\n    \r\n    doChupai:function(seatIndex,pai){\r\n        this.chupai = pai;\r\n        var seatData = this.seats[seatIndex];\r\n        if(seatData.holds){             \r\n            var idx = seatData.holds.indexOf(pai);\r\n            seatData.holds.splice(idx,1);\r\n        }\r\n        this.dispatchEvent('game_chupai_notify',{seatData:seatData,pai:pai});    \r\n    },\r\n    \r\n    doPeng:function(seatIndex,pai){\r\n        var seatData = this.seats[seatIndex];\r\n        //移除手牌\r\n        if(seatData.holds){\r\n            for(var i = 0; i < 2; ++i){\r\n                var idx = seatData.holds.indexOf(pai);\r\n                seatData.holds.splice(idx,1);\r\n            }                \r\n        }\r\n            \r\n        //更新碰牌数据\r\n        var pengs = seatData.pengs;\r\n        pengs.push(pai);\r\n            \r\n        this.dispatchEvent('peng_notify',seatData);\r\n    },\r\n    \r\n    getGangType:function(seatData,pai){\r\n        if(seatData.pengs.indexOf(pai) != -1){\r\n            return \"wangang\";\r\n        }\r\n        else{\r\n            var cnt = 0;\r\n            for(var i = 0; i < seatData.holds.length; ++i){\r\n                if(seatData.holds[i] == pai){\r\n                    cnt++;\r\n                }\r\n            }\r\n            if(cnt == 3){\r\n                return \"diangang\";\r\n            }\r\n            else{\r\n                return \"angang\";\r\n            }\r\n        }\r\n    },\r\n    \r\n    doGang:function(seatIndex,pai,gangtype){\r\n        var seatData = this.seats[seatIndex];\r\n        \r\n        if(!gangtype){\r\n            gangtype = this.getGangType(seatData,pai);\r\n        }\r\n        \r\n        if(gangtype == \"wangang\"){\r\n            if(seatData.pengs.indexOf(pai) != -1){\r\n                var idx = seatData.pengs.indexOf(pai);\r\n                if(idx != -1){\r\n                    seatData.pengs.splice(idx,1);\r\n                }\r\n            }\r\n            seatData.wangangs.push(pai);      \r\n        }\r\n        if(seatData.holds){\r\n            for(var i = 0; i <= 4; ++i){\r\n                var idx = seatData.holds.indexOf(pai);\r\n                if(idx == -1){\r\n                    //如果没有找到，表示移完了，直接跳出循环\r\n                    break;\r\n                }\r\n                seatData.holds.splice(idx,1);\r\n            }\r\n        }\r\n        if(gangtype == \"angang\"){\r\n            seatData.angangs.push(pai);\r\n        }\r\n        else if(gangtype == \"diangang\"){\r\n            seatData.diangangs.push(pai);\r\n        }\r\n        this.dispatchEvent('gang_notify',{seatData:seatData,gangtype:gangtype});\r\n    },\r\n    \r\n    doHu:function(data){\r\n        this.dispatchEvent('hupai',data);\r\n    },\r\n    \r\n    doTurnChange:function(si){\r\n        var data = {\r\n            last:this.turn,\r\n            turn:si,\r\n        }\r\n        this.turn = si;\r\n        this.dispatchEvent('game_chupai',data);\r\n    },\r\n    \r\n    connectGameServer:function(data){\r\n        this.dissoveData = null;\r\n        cc.vv.net.ip = data.ip + \":\" + data.port;\r\n        console.log(cc.vv.net.ip);\r\n        var self = this;\r\n\r\n        var onConnectOK = function(){\r\n            console.log(\"onConnectOK\");\r\n            var sd = {\r\n                token:data.token,\r\n                roomid:data.roomid,\r\n                time:data.time,\r\n                sign:data.sign,\r\n            };\r\n            cc.vv.net.send(\"login\",sd);\r\n        };\r\n        \r\n        var onConnectFailed = function(){\r\n            console.log(\"failed.\");\r\n            cc.vv.wc.hide();\r\n        };\r\n        cc.vv.wc.show(\"正在进入房间\");\r\n        cc.vv.net.connect(onConnectOK,onConnectFailed);\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _gameover:null,\r\n        _gameresult:null,\r\n        _seats:[],\r\n        _isGameEnd:false,\r\n        _pingju:null,\r\n        _win:null,\r\n        _lose:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        if(cc.vv.gameNetMgr.conf == null){\r\n            return;\r\n        }\r\n        if(cc.vv.gameNetMgr.conf.type == \"xzdd\"){\r\n            this._gameover = this.node.getChildByName(\"game_over\");\r\n        }\r\n        else{\r\n            this._gameover = this.node.getChildByName(\"game_over_xlch\");\r\n        }\r\n        \r\n        this._gameover.active = false;\r\n        \r\n        this._pingju = this._gameover.getChildByName(\"pingju\");\r\n        this._win = this._gameover.getChildByName(\"win\");\r\n        this._lose = this._gameover.getChildByName(\"lose\");\r\n        \r\n        this._gameresult = this.node.getChildByName(\"game_result\");\r\n        \r\n        var wanfa = this._gameover.getChildByName(\"wanfa\").getComponent(cc.Label);\r\n        wanfa.string = cc.vv.gameNetMgr.getWanfa();\r\n        \r\n        var listRoot = this._gameover.getChildByName(\"result_list\");\r\n        for(var i = 1; i <= 4; ++i){\r\n            var s = \"s\" + i;\r\n            var sn = listRoot.getChildByName(s);\r\n            var viewdata = {};\r\n            viewdata.username = sn.getChildByName('username').getComponent(cc.Label);\r\n            viewdata.reason = sn.getChildByName('reason').getComponent(cc.Label);\r\n            \r\n            var f = sn.getChildByName('fan');\r\n            if(f != null){\r\n                viewdata.fan = f.getComponent(cc.Label);    \r\n            }\r\n            \r\n            viewdata.score = sn.getChildByName('score').getComponent(cc.Label);\r\n            viewdata.hu = sn.getChildByName('hu');\r\n            viewdata.mahjongs = sn.getChildByName('pai');\r\n            viewdata.zhuang = sn.getChildByName('zhuang');\r\n            viewdata.hupai = sn.getChildByName('hupai');\r\n            viewdata._pengandgang = [];\r\n            this._seats.push(viewdata);\r\n        }\r\n        \r\n        //初始化网络事件监听器\r\n        var self = this;\r\n        this.node.on('game_over',function(data){self.onGameOver(data);});\r\n        \r\n        this.node.on('game_end',function(data){self._isGameEnd = true;});\r\n    },\r\n    \r\n    onGameOver(data){\r\n        if(cc.vv.gameNetMgr.conf.type == \"xzdd\"){\r\n            this.onGameOver_XZDD(data);\r\n        }\r\n        else{\r\n            this.onGameOver_XLCH(data);\r\n        }\r\n    },\r\n    \r\n    onGameOver_XZDD(data){\r\n        console.log(data);\r\n        if(data.length == 0){\r\n            this._gameresult.active = true;\r\n            return;\r\n        }\r\n        this._gameover.active = true;\r\n        this._pingju.active = false;\r\n        this._win.active = false;\r\n        this._lose.active = false;\r\n\r\n        var myscore = data[cc.vv.gameNetMgr.seatIndex].score;\r\n        if(myscore > 0){\r\n            this._win.active = true;\r\n        }         \r\n        else if(myscore < 0){\r\n            this._lose.active = true;\r\n        }\r\n        else{\r\n            this._pingju.active = true;\r\n        }\r\n        \r\n            \r\n        //显示玩家信息\r\n        for(var i = 0; i < 4; ++i){\r\n            var seatView = this._seats[i];\r\n            var userData = data[i];\r\n            var hued = false;\r\n            //胡牌的玩家才显示 是否清一色 根xn的字样\r\n            var numOfGangs = userData.angangs.length + userData.wangangs.length + userData.diangangs.length;\r\n            var numOfGen = userData.numofgen;\r\n            var actionArr = [];\r\n            var is7pairs = false;\r\n            var ischadajiao = false;\r\n            for(var j = 0; j < userData.actions.length; ++j){\r\n                var ac = userData.actions[j];\r\n                if(ac.type == \"zimo\" || ac.type == \"ganghua\" || ac.type == \"dianganghua\" || ac.type == \"hu\" || ac.type == \"gangpaohu\" || ac.type == \"qiangganghu\" || ac.type == \"chadajiao\"){\r\n                    if(userData.pattern == \"7pairs\"){\r\n                        actionArr.push(\"七对\");\r\n                    }\r\n                    else if(userData.pattern == \"l7pairs\"){\r\n                        actionArr.push(\"龙七对\");\r\n                    }\r\n                    else if(userData.pattern == \"j7pairs\"){\r\n                        actionArr.push(\"将七对\");\r\n                    }\r\n                    else if(userData.pattern == \"duidui\"){\r\n                        actionArr.push(\"碰碰胡\");\r\n                    }\r\n                    else if(userData.pattern == \"jiangdui\"){\r\n                        actionArr.push(\"将对\");\r\n                    }\r\n                    \r\n                    if(ac.type == \"zimo\"){\r\n                        actionArr.push(\"自摸\");\r\n                    }\r\n                    else if(ac.type == \"ganghua\"){\r\n                        actionArr.push(\"杠上花\");\r\n                    }\r\n                    else if(ac.type == \"dianganghua\"){\r\n                        actionArr.push(\"点杠花\");\r\n                    }\r\n                    else if(ac.type == \"gangpaohu\"){\r\n                        actionArr.push(\"杠炮胡\");\r\n                    }\r\n                    else if(ac.type == \"qiangganghu\"){\r\n                        actionArr.push(\"抢杠胡\");\r\n                    }\r\n                    else if(ac.type == \"chadajiao\"){\r\n                        ischadajiao = true;\r\n                    }\r\n                    hued = true;\r\n                }\r\n                else if(ac.type == \"fangpao\"){\r\n                    actionArr.push(\"放炮\");\r\n                }\r\n                else if(ac.type == \"angang\"){\r\n                    actionArr.push(\"暗杠\");\r\n                }\r\n                else if(ac.type == \"diangang\"){\r\n                    actionArr.push(\"明杠\");\r\n                }\r\n                else if(ac.type == \"wangang\"){\r\n                    actionArr.push(\"弯杠\");\r\n                }\r\n                else if(ac.type == \"fanggang\"){\r\n                   actionArr.push(\"放杠\");\r\n                }\r\n                else if(ac.type == \"zhuanshougang\"){\r\n                    actionArr.push(\"转手杠\");\r\n                }\r\n                else if(ac.type == \"beiqianggang\"){\r\n                    actionArr.push(\"被抢杠\");\r\n                }\r\n                else if(ac.type == \"beichadajiao\"){\r\n                    actionArr.push(\"被查叫\");\r\n                }\r\n            }\r\n            \r\n            if(hued){\r\n                if(userData.qingyise){\r\n                    actionArr.push(\"清一色\");\r\n                }\r\n                \r\n                if(userData.menqing){\r\n                    actionArr.push(\"门清\");\r\n                }\r\n                \r\n                if(userData.zhongzhang){\r\n                    actionArr.push(\"中张\");\r\n                }\r\n                \r\n                if(userData.jingouhu){\r\n                    actionArr.push(\"金钩胡\");\r\n                }\r\n                                \r\n                if(userData.haidihu){\r\n                    actionArr.push(\"海底胡\");\r\n                }\r\n                \r\n                if(userData.tianhu){\r\n                    actionArr.push(\"天胡\");\r\n                }\r\n                \r\n                if(userData.dihu){\r\n                    actionArr.push(\"地胡\");\r\n                }\r\n            \r\n                if(numOfGen > 0){\r\n                    actionArr.push(\"根x\" + numOfGen); \r\n                }                \r\n                \r\n                if(ischadajiao){\r\n                    actionArr.push(\"查大叫\");\r\n                }\r\n            }\r\n            \r\n            for(var o = 0; o < 3;++o){\r\n                seatView.hu.children[o].active = false;    \r\n            }\r\n            if(userData.huorder >= 0){\r\n                seatView.hu.children[userData.huorder].active = true;    \r\n            }\r\n\r\n            seatView.username.string = cc.vv.gameNetMgr.seats[i].name;\r\n            seatView.zhuang.active = cc.vv.gameNetMgr.button == i;\r\n            seatView.reason.string = actionArr.join(\"、\");\r\n            \r\n            //胡牌的玩家才有番\r\n            var fan = 0;\r\n            if(hued){\r\n                fan = userData.fan;\r\n            }\r\n            seatView.fan.string = fan + \"番\";\r\n            \r\n            //\r\n            if(userData.score > 0){\r\n                seatView.score.string = \"+\" + userData.score;    \r\n            }\r\n            else{\r\n                seatView.score.string = userData.score;\r\n            }\r\n           \r\n            \r\n            var hupai = -1;\r\n            if(hued){\r\n                hupai = userData.holds.pop();\r\n            }\r\n            \r\n            cc.vv.mahjongmgr.sortMJ(userData.holds,userData.dingque);\r\n            \r\n            //胡牌不参与排序\r\n            if(hued){\r\n                userData.holds.push(hupai);\r\n            }\r\n            \r\n            //隐藏所有牌\r\n            for(var k = 0; k < seatView.mahjongs.childrenCount; ++k){\r\n                var n = seatView.mahjongs.children[k];\r\n                n.active = false;\r\n            }\r\n           \r\n            var lackingNum = (userData.pengs.length + numOfGangs)*3; \r\n            //显示相关的牌\r\n            for(var k = 0; k < userData.holds.length; ++k){\r\n                var pai = userData.holds[k];\r\n                var n = seatView.mahjongs.children[k + lackingNum];\r\n                n.active = true;\r\n                var sprite = n.getComponent(cc.Sprite);\r\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\r\n            }\r\n            \r\n            \r\n            for(var k = 0; k < seatView._pengandgang.length; ++k){\r\n                seatView._pengandgang[k].active = false;\r\n            }\r\n            \r\n            //初始化杠牌\r\n            var index = 0;\r\n            var gangs = userData.angangs;\r\n            for(var k = 0; k < gangs.length; ++k){\r\n                var mjid = gangs[k];\r\n                this.initPengAndGangs(seatView,index,mjid,\"angang\");\r\n                index++;    \r\n            }\r\n            \r\n            var gangs = userData.diangangs;\r\n            for(var k = 0; k < gangs.length; ++k){\r\n                var mjid = gangs[k];\r\n                this.initPengAndGangs(seatView,index,mjid,\"diangang\");\r\n                index++;    \r\n            }\r\n            \r\n            var gangs = userData.wangangs;\r\n            for(var k = 0; k < gangs.length; ++k){\r\n                var mjid = gangs[k];\r\n                this.initPengAndGangs(seatView,index,mjid,\"wangang\");\r\n                index++;    \r\n            }\r\n            \r\n            //初始化碰牌\r\n            var pengs = userData.pengs\r\n            if(pengs){\r\n                for(var k = 0; k < pengs.length; ++k){\r\n                    var mjid = pengs[k];\r\n                    this.initPengAndGangs(seatView,index,mjid,\"peng\");\r\n                    index++;    \r\n                }    \r\n            }\r\n        }\r\n    },\r\n    onGameOver_XLCH:function(data){\r\n        console.log(data);\r\n        if(data.length == 0){\r\n            this._gameresult.active = true;\r\n            return;\r\n        }\r\n        this._gameover.active = true;\r\n        this._pingju.active = false;\r\n        this._win.active = false;\r\n        this._lose.active = false;\r\n\r\n        var myscore = data[cc.vv.gameNetMgr.seatIndex].score;\r\n        if(myscore > 0){\r\n            this._win.active = true;\r\n        }         \r\n        else if(myscore < 0){\r\n            this._lose.active = true;\r\n        }\r\n        else{\r\n            this._pingju.active = true;\r\n        }\r\n            \r\n        //显示玩家信息\r\n        for(var i = 0; i < 4; ++i){\r\n            var seatView = this._seats[i];\r\n            var userData = data[i];\r\n            var hued = false;\r\n            var actionArr = [];\r\n            var is7pairs = false;\r\n            var ischadajiao = false;\r\n            var hupaiRoot = seatView.hupai;\r\n            \r\n            for(var j = 0; j < hupaiRoot.children.length; ++j){\r\n                hupaiRoot.children[j].active = false;\r\n            }\r\n            \r\n            var hi = 0;\r\n            for(var j = 0; j < userData.huinfo.length; ++j){\r\n                var info = userData.huinfo[j];\r\n                hued = hued || info.ishupai;\r\n                if(info.ishupai){\r\n                    if(hi < hupaiRoot.children.length){\r\n                        var hupaiView = hupaiRoot.children[hi]; \r\n                        hupaiView.active = true;\r\n                        hupaiView.getComponent(cc.Sprite).spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"B_\",info.pai);\r\n                        hi++;   \r\n                    }\r\n                }\r\n                \r\n                var str = \"\"\r\n                var sep = \"\";\r\n                \r\n                var dataseat = userData;\r\n                if(!info.ishupai){\r\n                    if(info.action == \"fangpao\"){\r\n                        str = \"放炮\";\r\n                    }\r\n                    else if(info.action == \"gangpao\"){\r\n                        str = \"杠上炮\";\r\n                    }\r\n                    else if(info.action == \"beiqianggang\"){\r\n                        str = \"被抢杠\";\r\n                    }\r\n                    else{\r\n                        str = \"被查大叫\";\r\n                    }\r\n                    \r\n                    dataseat = data[info.target]; \r\n                    info = dataseat.huinfo[info.index];\r\n                }\r\n                else{\r\n                    if(info.action == \"hu\"){\r\n                        str = \"接炮胡\"\r\n                    }\r\n                    else if(info.action == \"zimo\"){\r\n                        str = \"自摸\";\r\n                    }\r\n                    else if(info.action == \"ganghua\"){\r\n                        str = \"杠上花\";\r\n                    }\r\n                    else if(info.action == \"dianganghua\"){\r\n                        str = \"点杠花\";\r\n                    }\r\n                    else if(info.action == \"gangpaohu\"){\r\n                        str = \"杠炮胡\";\r\n                    }\r\n                    else if(info.action == \"qiangganghu\"){\r\n                        str = \"抢杠胡\";\r\n                    }\r\n                    else if(info.action == \"chadajiao\"){\r\n                        str = \"查大叫\";\r\n                    }   \r\n                }\r\n                \r\n                str += \"(\";\r\n                \r\n                if(info.pattern == \"7pairs\"){\r\n                    str += \"七对\";\r\n                    sep = \"、\"\r\n                }\r\n                else if(info.pattern == \"l7pairs\"){\r\n                    str += \"龙七对\";\r\n                    sep = \"、\"\r\n                }\r\n                else if(info.pattern == \"j7pairs\"){\r\n                    str += \"将七对\";\r\n                    sep = \"、\"\r\n                }\r\n                else if(info.pattern == \"duidui\"){\r\n                    str += \"碰碰胡\";\r\n                    sep = \"、\"\r\n                }\r\n                else if(info.pattern == \"jiangdui\"){\r\n                    str += \"将对\";\r\n                    sep = \"、\"\r\n                }\r\n                    \r\n                if(info.haidihu){\r\n                    str += sep + \"海底胡\";\r\n                    sep = \"、\";\r\n                }\r\n                \r\n                if(info.tianhu){\r\n                    str += sep + \"天胡\";\r\n                    sep = \"、\";\r\n                }\r\n                \r\n                if(info.dihu){\r\n                    str += sep + \"地胡\";\r\n                    sep = \"、\";\r\n                }\r\n                \r\n                if(dataseat.qingyise){\r\n                    str += sep + \"清一色\";\r\n                    sep = \"、\";\r\n                }\r\n                \r\n                if(dataseat.menqing){\r\n                    str += sep + \"门清\";\r\n                    sep = \"、\";\r\n                }\r\n                \r\n                if(dataseat.jingouhu){\r\n                    str += sep + \"金钩胡\";\r\n                    sep = \"、\";\r\n                }\r\n                         \r\n                if(dataseat.zhongzhang){\r\n                    str += sep + \"中张\";\r\n                    sep = \"、\";\r\n                }\r\n            \r\n                if(info.numofgen > 0){\r\n                    str += sep + \"根x\" + info.numofgen;\r\n                    sep = \"、\"; \r\n                }\r\n                \r\n                if(sep == \"\"){\r\n                    str += \"平胡\";\r\n                }\r\n                \r\n                str += \"、\" + info.fan + \"番\";\r\n                \r\n                str += \")\";\r\n                actionArr.push(str);\r\n            }\r\n            \r\n            seatView.hu.active = hued;\r\n            \r\n            if(userData.angangs.length){\r\n                actionArr.push(\"暗杠x\" + userData.angangs.length);\r\n            }\r\n            \r\n            if(userData.diangangs.length){\r\n                actionArr.push(\"明杠x\" + userData.diangangs.length);\r\n            }\r\n            \r\n            if(userData.wangangs.length){\r\n                actionArr.push(\"巴杠x\" + userData.wangangs.length);\r\n            }\r\n\r\n            seatView.username.string = cc.vv.gameNetMgr.seats[i].name;\r\n            seatView.zhuang.active = cc.vv.gameNetMgr.button == i;\r\n            seatView.reason.string = actionArr.join(\"、\");\r\n            \r\n            //\r\n            if(userData.score > 0){\r\n                seatView.score.string = \"+\" + userData.score;    \r\n            }\r\n            else{\r\n                seatView.score.string = userData.score;\r\n            }\r\n           \r\n            //隐藏所有牌\r\n            for(var k = 0; k < seatView.mahjongs.childrenCount; ++k){\r\n                var n = seatView.mahjongs.children[k];\r\n                n.active = false;\r\n            }\r\n            \r\n            cc.vv.mahjongmgr.sortMJ(userData.holds,userData.dingque);\r\n            \r\n            var numOfGangs = userData.angangs.length + userData.wangangs.length + userData.diangangs.length;\r\n           \r\n            var lackingNum = (userData.pengs.length + numOfGangs)*3; \r\n            //显示相关的牌\r\n            for(var k = 0; k < userData.holds.length; ++k){\r\n                var pai = userData.holds[k];\r\n                var n = seatView.mahjongs.children[k + lackingNum];\r\n                n.active = true;\r\n                var sprite = n.getComponent(cc.Sprite);\r\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\r\n            }\r\n            \r\n            \r\n            for(var k = 0; k < seatView._pengandgang.length; ++k){\r\n                seatView._pengandgang[k].active = false;\r\n            }\r\n            \r\n            //初始化杠牌\r\n            var index = 0;\r\n            var gangs = userData.angangs;\r\n            for(var k = 0; k < gangs.length; ++k){\r\n                var mjid = gangs[k];\r\n                this.initPengAndGangs(seatView,index,mjid,\"angang\");\r\n                index++;    \r\n            }\r\n            \r\n            var gangs = userData.diangangs;\r\n            for(var k = 0; k < gangs.length; ++k){\r\n                var mjid = gangs[k];\r\n                this.initPengAndGangs(seatView,index,mjid,\"diangang\");\r\n                index++;    \r\n            }\r\n            \r\n            var gangs = userData.wangangs;\r\n            for(var k = 0; k < gangs.length; ++k){\r\n                var mjid = gangs[k];\r\n                this.initPengAndGangs(seatView,index,mjid,\"wangang\");\r\n                index++;    \r\n            }\r\n            \r\n            //初始化碰牌\r\n            var pengs = userData.pengs\r\n            if(pengs){\r\n                for(var k = 0; k < pengs.length; ++k){\r\n                    var mjid = pengs[k];\r\n                    this.initPengAndGangs(seatView,index,mjid,\"peng\");\r\n                    index++;    \r\n                }    \r\n            }\r\n        }\r\n    },\r\n    \r\n    initPengAndGangs:function(seatView,index,mjid,flag){\r\n        var pgroot = null;\r\n        if(seatView._pengandgang.length <= index){\r\n            pgroot = cc.instantiate(cc.vv.mahjongmgr.pengPrefabSelf);\r\n            seatView._pengandgang.push(pgroot);\r\n            seatView.mahjongs.addChild(pgroot);    \r\n        }\r\n        else{\r\n            pgroot = seatView._pengandgang[index];\r\n            pgroot.active = true;\r\n        }\r\n      \r\n        var sprites = pgroot.getComponentsInChildren(cc.Sprite);\r\n        for(var s = 0; s < sprites.length; ++s){\r\n            var sprite = sprites[s];\r\n            if(sprite.node.name == \"gang\"){\r\n                var isGang = flag != \"peng\";\r\n                sprite.node.active = isGang;\r\n                sprite.node.scaleX = 1.0;\r\n                sprite.node.scaleY = 1.0;\r\n                if(flag == \"angang\"){\r\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getEmptySpriteFrame(\"myself\");\r\n                    sprite.node.scaleX = 1.4;\r\n                    sprite.node.scaleY = 1.4;                        \r\n                }   \r\n                else{\r\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"B_\",mjid);    \r\n                }\r\n            }\r\n            else{ \r\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"B_\",mjid);\r\n            }\r\n        }\r\n        pgroot.x = index * 55 * 3 + index * 10;\r\n    },\r\n    \r\n    onBtnReadyClicked:function(){\r\n        console.log(\"onBtnReadyClicked\");\r\n        if(this._isGameEnd){\r\n            this._gameresult.active = true;\r\n        }\r\n        else{\r\n            cc.vv.net.send('ready');   \r\n        }\r\n        this._gameover.active = false;\r\n    },\r\n    \r\n    onBtnShareClicked:function(){\r\n        console.log(\"onBtnShareClicked\");\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _gameresult:null,\r\n        _seats:[],\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        \r\n        this._gameresult = this.node.getChildByName(\"game_result\");\r\n        //this._gameresult.active = false;\r\n        \r\n        var seats = this._gameresult.getChildByName(\"seats\");\r\n        for(var i = 0; i < seats.children.length; ++i){\r\n            this._seats.push(seats.children[i].getComponent(\"Seat\"));   \r\n        }\r\n        \r\n        var btnClose = cc.find(\"Canvas/game_result/btnClose\");\r\n        if(btnClose){\r\n            cc.vv.utils.addClickEvent(btnClose,this.node,\"GameResult\",\"onBtnCloseClicked\");\r\n        }\r\n        \r\n        var btnShare = cc.find(\"Canvas/game_result/btnShare\");\r\n        if(btnShare){\r\n            cc.vv.utils.addClickEvent(btnShare,this.node,\"GameResult\",\"onBtnShareClicked\");\r\n        }\r\n        \r\n        //初始化网络事件监听器\r\n        var self = this;\r\n        this.node.on('game_end',function(data){self.onGameEnd(data);});\r\n    },\r\n    \r\n    showResult:function(seat,info,isZuiJiaPaoShou){\r\n        seat.node.getChildByName(\"zuijiapaoshou\").active = isZuiJiaPaoShou;\r\n        \r\n        seat.node.getChildByName(\"zimocishu\").getComponent(cc.Label).string = info.numzimo;\r\n        seat.node.getChildByName(\"jiepaocishu\").getComponent(cc.Label).string = info.numjiepao;\r\n        seat.node.getChildByName(\"dianpaocishu\").getComponent(cc.Label).string = info.numdianpao;\r\n        seat.node.getChildByName(\"angangcishu\").getComponent(cc.Label).string = info.numangang;\r\n        seat.node.getChildByName(\"minggangcishu\").getComponent(cc.Label).string = info.numminggang;\r\n        seat.node.getChildByName(\"chajiaocishu\").getComponent(cc.Label).string = info.numchadajiao;\r\n    },\r\n    \r\n    onGameEnd:function(endinfo){\r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        var maxscore = -1;\r\n        var maxdianpao = 0;\r\n        var dianpaogaoshou = -1;\r\n        for(var i = 0; i < seats.length; ++i){\r\n            var seat = seats[i];\r\n            if(seat.score > maxscore){\r\n                maxscore = seat.score;\r\n            }\r\n            if(endinfo[i].numdianpao > maxdianpao){\r\n                maxdianpao = endinfo[i].numdianpao;\r\n                dianpaogaoshou = i;\r\n            }\r\n        }\r\n        \r\n        for(var i = 0; i < seats.length; ++i){\r\n            var seat = seats[i];\r\n            var isBigwin = false;\r\n            if(seat.score > 0){\r\n                isBigwin = seat.score == maxscore;\r\n            }\r\n            this._seats[i].setInfo(seat.name,seat.score, isBigwin);\r\n            this._seats[i].setID(seat.userid);\r\n            var isZuiJiaPaoShou = dianpaogaoshou == i;\r\n            this.showResult(this._seats[i],endinfo[i],isZuiJiaPaoShou);\r\n        }\r\n    },\r\n    \r\n    onBtnCloseClicked:function(){\r\n        cc.director.loadScene(\"hall\");\r\n    },\r\n    \r\n    onBtnShareClicked:function(){\r\n        cc.vv.anysdkMgr.shareResult();\r\n    }\r\n});\r\n","var Global = cc.Class({\n    extends: cc.Component,\n    statics: {\n        isstarted:false,\n        netinited:false,\n        userguid:0,\n        nickname:\"\",\n        money:0,\n        lv:0,\n        roomId:0,\n    },\n});","//var URL = \"http://172.17.1.74:9000\";\r\n//var URL = \"http://120.24.181.145:9000\";\r\n//var URL = \"http://120.24.59.70:9000\";\r\n//var URL = \"http://192.168.1.168:9000\";\r\nvar URL = \"http://localhost:9000\";\r\ncc.VERSION = 20161227;\r\nvar HTTP = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    statics:{\r\n        sessionId : 0,\r\n        userId : 0,\r\n        master_url:URL,\r\n        url:URL,\r\n        sendRequest : function(path,data,handler,extraUrl){\r\n            var xhr = cc.loader.getXMLHttpRequest();\r\n            xhr.timeout = 5000;\r\n            //url组装\r\n            var str = \"?\";\r\n            for(var k in data){\r\n                if(str != \"?\"){\r\n                    str += \"&\";\r\n                }\r\n                str += k + \"=\" + data[k];\r\n            }\r\n            if(extraUrl == null){\r\n                extraUrl = HTTP.url;\r\n            }\r\n            var requestURL = extraUrl + path + encodeURI(str);\r\n            console.log(\"RequestURL:\" + requestURL);\r\n            xhr.open(\"GET\",requestURL, true);\r\n            if (cc.sys.isNative){\r\n                xhr.setRequestHeader(\"Accept-Encoding\",\"gzip,deflate\",\"text/html;charset=UTF-8\");\r\n            }\r\n            \r\n            xhr.onreadystatechange = function() {\r\n                if(xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)){\r\n                    console.log(\"http res(\"+ xhr.responseText.length + \"):\" + xhr.responseText);\r\n                    try {\r\n                        var ret = JSON.parse(xhr.responseText);\r\n                        if(handler !== null){\r\n                            handler(ret);\r\n                        }                        /* code */\r\n                    } catch (e) {\r\n                        console.log(\"err:\" + e);\r\n                        //handler(null);\r\n                    }\r\n                    finally{\r\n                        if(cc.vv && cc.vv.wc){\r\n                        //       cc.vv.wc.hide();    \r\n                        }\r\n                    }\r\n                }\r\n            };\r\n            \r\n            if(cc.vv && cc.vv.wc){\r\n                //cc.vv.wc.show();\r\n            }\r\n            xhr.send();\r\n            return xhr;\r\n        },\r\n    },\r\n});","var Net = require(\"Net\")\r\nvar Global = require(\"Global\")\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        lblName:cc.Label,\r\n        lblMoney:cc.Label,\r\n        lblGems:cc.Label,\r\n        lblID:cc.Label,\r\n        lblNotice:cc.Label,\r\n        joinGameWin:cc.Node,\r\n        createRoomWin:cc.Node,\r\n        settingsWin:cc.Node,\r\n        helpWin:cc.Node,\r\n        xiaoxiWin:cc.Node,\r\n        btnJoinGame:cc.Node,\r\n        btnReturnGame:cc.Node,\r\n        sprHeadImg:cc.Sprite,\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n    \r\n    initNetHandlers:function(){\r\n        var self = this;\r\n    },\r\n    \r\n    onShare:function(){\r\n        cc.vv.anysdkMgr.share(\"达达麻将\",\"达达麻将，包含了血战到底、血流成河等多种四川流行麻将玩法。\");   \r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(!cc.sys.isNative && cc.sys.isMobile){\r\n            var cvs = this.node.getComponent(cc.Canvas);\r\n            cvs.fitHeight = true;\r\n            cvs.fitWidth = true;\r\n        }\r\n        if(!cc.vv){\r\n            cc.director.loadScene(\"loading\");\r\n            return;\r\n        }\r\n        this.initLabels();\r\n        \r\n        if(cc.vv.gameNetMgr.roomId == null){\r\n            this.btnJoinGame.active = true;\r\n            this.btnReturnGame.active = false;\r\n        }\r\n        else{\r\n            this.btnJoinGame.active = false;\r\n            this.btnReturnGame.active = true;\r\n        }\r\n        \r\n        //var params = cc.vv.args;\r\n        var roomId = cc.vv.userMgr.oldRoomId \r\n        if( roomId != null){\r\n            cc.vv.userMgr.oldRoomId = null;\r\n            cc.vv.userMgr.enterRoom(roomId);\r\n        }\r\n        \r\n        var imgLoader = this.sprHeadImg.node.getComponent(\"ImageLoader\");\r\n        imgLoader.setUserID(cc.vv.userMgr.userId);\r\n        cc.vv.utils.addClickEvent(this.sprHeadImg.node,this.node,\"Hall\",\"onBtnClicked\");\r\n        \r\n        \r\n        this.addComponent(\"UserInfoShow\");\r\n        \r\n        this.initButtonHandler(\"Canvas/right_bottom/btn_shezhi\");\r\n        this.initButtonHandler(\"Canvas/right_bottom/btn_help\");\r\n        this.initButtonHandler(\"Canvas/right_bottom/btn_xiaoxi\");\r\n        this.helpWin.addComponent(\"OnBack\");\r\n        this.xiaoxiWin.addComponent(\"OnBack\");\r\n        \r\n        if(!cc.vv.userMgr.notice){\r\n            cc.vv.userMgr.notice = {\r\n                version:null,\r\n                msg:\"数据请求中...\",\r\n            }\r\n        }\r\n        \r\n        if(!cc.vv.userMgr.gemstip){\r\n            cc.vv.userMgr.gemstip = {\r\n                version:null,\r\n                msg:\"数据请求中...\",\r\n            }\r\n        }\r\n        \r\n        this.lblNotice.string = cc.vv.userMgr.notice.msg;\r\n        \r\n        this.refreshInfo();\r\n        this.refreshNotice();\r\n        this.refreshGemsTip();\r\n        \r\n        cc.vv.audioMgr.playBGM(\"bgMain.mp3\");\r\n    },\r\n    \r\n    refreshInfo:function(){\r\n        var self = this;\r\n        var onGet = function(ret){\r\n            if(ret.errcode !== 0){\r\n                console.log(ret.errmsg);\r\n            }\r\n            else{\r\n                if(ret.gems != null){\r\n                    this.lblGems.string = ret.gems;    \r\n                }\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            account:cc.vv.userMgr.account,\r\n            sign:cc.vv.userMgr.sign,\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_user_status\",data,onGet.bind(this));\r\n    },\r\n    \r\n    refreshGemsTip:function(){\r\n        var self = this;\r\n        var onGet = function(ret){\r\n            if(ret.errcode !== 0){\r\n                console.log(ret.errmsg);\r\n            }\r\n            else{\r\n                cc.vv.userMgr.gemstip.version = ret.version;\r\n                cc.vv.userMgr.gemstip.msg = ret.msg.replace(\"<newline>\",\"\\n\");\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            account:cc.vv.userMgr.account,\r\n            sign:cc.vv.userMgr.sign,\r\n            type:\"fkgm\",\r\n            version:cc.vv.userMgr.gemstip.version\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_message\",data,onGet.bind(this));\r\n    },\r\n    \r\n    refreshNotice:function(){\r\n        var self = this;\r\n        var onGet = function(ret){\r\n            if(ret.errcode !== 0){\r\n                console.log(ret.errmsg);\r\n            }\r\n            else{\r\n                cc.vv.userMgr.notice.version = ret.version;\r\n                cc.vv.userMgr.notice.msg = ret.msg;\r\n                this.lblNotice.string = ret.msg;\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            account:cc.vv.userMgr.account,\r\n            sign:cc.vv.userMgr.sign,\r\n            type:\"notice\",\r\n            version:cc.vv.userMgr.notice.version\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_message\",data,onGet.bind(this));\r\n    },\r\n    \r\n    initButtonHandler:function(btnPath){\r\n        var btn = cc.find(btnPath);\r\n        cc.vv.utils.addClickEvent(btn,this.node,\"Hall\",\"onBtnClicked\");        \r\n    },\r\n    \r\n    \r\n    \r\n    initLabels:function(){\r\n        this.lblName.string = cc.vv.userMgr.userName;\r\n        this.lblMoney.string = cc.vv.userMgr.coins;\r\n        this.lblGems.string = cc.vv.userMgr.gems;\r\n        this.lblID.string = \"ID:\" + cc.vv.userMgr.userId;\r\n    },\r\n    \r\n    onBtnClicked:function(event){\r\n        if(event.target.name == \"btn_shezhi\"){\r\n            this.settingsWin.active = true;\r\n        }   \r\n        else if(event.target.name == \"btn_help\"){\r\n            this.helpWin.active = true;\r\n        }\r\n        else if(event.target.name == \"btn_xiaoxi\"){\r\n            this.xiaoxiWin.active = true;\r\n        }\r\n        else if(event.target.name == \"head\"){\r\n            cc.vv.userinfoShow.show(cc.vv.userMgr.userName,cc.vv.userMgr.userId,this.sprHeadImg,cc.vv.userMgr.sex,cc.vv.userMgr.ip);\r\n        }\r\n    },\r\n    \r\n    onJoinGameClicked:function(){\r\n        this.joinGameWin.active = true;\r\n    },\r\n    \r\n    onReturnGameClicked:function(){\r\n        cc.director.loadScene(\"mjgame\");  \r\n    },\r\n    \r\n    onBtnAddGemsClicked:function(){\r\n        cc.vv.alert.show(\"提示\",cc.vv.userMgr.gemstip.msg);\r\n        this.refreshInfo();\r\n    },\r\n    \r\n    onCreateRoomClicked:function(){\r\n        if(cc.vv.gameNetMgr.roomId != null){\r\n            cc.vv.alert.show(\"提示\",\"房间已经创建!\\n必须解散当前房间才能创建新的房间\");\r\n            return;\r\n        }\r\n        console.log(\"onCreateRoomClicked\");\r\n        this.createRoomWin.active = true;   \r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        var x = this.lblNotice.node.x;\r\n        x -= dt*100;\r\n        if(x + this.lblNotice.node.width < -1000){\r\n            x = 500;\r\n        }\r\n        this.lblNotice.node.x = x;\r\n        \r\n        if(cc.vv && cc.vv.userMgr.roomData != null){\r\n            cc.vv.userMgr.enterRoom(cc.vv.userMgr.roomData);\r\n            cc.vv.userMgr.roomData = null;\r\n        }\r\n    },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        HistoryItemPrefab:{\r\n            default:null,\r\n            type:cc.Prefab,\r\n        },\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _history:null,\r\n        _viewlist:null,\r\n        _content:null,\r\n        _viewitemTemp:null,\r\n        _historyData:null,\r\n        _curRoomInfo:null,\r\n        _emptyTip:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._history = this.node.getChildByName(\"history\");\r\n        this._history.active = false;\r\n        \r\n        this._emptyTip = this._history.getChildByName(\"emptyTip\");\r\n        this._emptyTip.active = true;\r\n        \r\n        this._viewlist = this._history.getChildByName(\"viewlist\");\r\n        this._content = cc.find(\"view/content\",this._viewlist);\r\n        \r\n        this._viewitemTemp = this._content.children[0];\r\n        this._content.removeChild(this._viewitemTemp);\r\n\r\n        var node = cc.find(\"Canvas/btn_zhanji\");        \r\n        this.addClickEvent(node,this.node,\"History\",\"onBtnHistoryClicked\");\r\n        \r\n        var node = cc.find(\"Canvas/history/btn_back\");  \r\n        this.addClickEvent(node,this.node,\"History\",\"onBtnBackClicked\");\r\n    },\r\n    \r\n    addClickEvent:function(node,target,component,handler){\r\n        var eventHandler = new cc.Component.EventHandler();\r\n        eventHandler.target = target;\r\n        eventHandler.component = component;\r\n        eventHandler.handler = handler;\r\n\r\n        var clickEvents = node.getComponent(cc.Button).clickEvents;\r\n        clickEvents.push(eventHandler);\r\n    },\r\n    \r\n    onBtnBackClicked:function(){\r\n        if(this._curRoomInfo == null){\r\n            this._historyData = null;\r\n            this._history.active = false;            \r\n        }\r\n        else{\r\n            this.initRoomHistoryList(this._historyData);   \r\n        }\r\n    },\r\n    \r\n    onBtnHistoryClicked:function(){\r\n        this._history.active = true;\r\n        var self = this;\r\n        cc.vv.userMgr.getHistoryList(function(data){\r\n            data.sort(function(a,b){\r\n                return a.time < b.time; \r\n            });\r\n            self._historyData = data;\r\n            for(var i = 0; i < data.length; ++i){\r\n                for(var j = 0; j < 4; ++j){\r\n                    var s = data[i].seats[j];\r\n                    s.name = new Buffer(s.name,'base64').toString();\r\n                }\r\n            }\r\n            self.initRoomHistoryList(data);\r\n        });\r\n    },\r\n    \r\n    dateFormat:function(time){\r\n        var date = new Date(time);\r\n        var datetime = \"{0}-{1}-{2} {3}:{4}:{5}\";\r\n        var year = date.getFullYear();\r\n        var month = date.getMonth() + 1;\r\n        month = month >= 10? month : (\"0\"+month);\r\n        var day = date.getDate();\r\n        day = day >= 10? day : (\"0\"+day);\r\n        var h = date.getHours();\r\n        h = h >= 10? h : (\"0\"+h);\r\n        var m = date.getMinutes();\r\n        m = m >= 10? m : (\"0\"+m);\r\n        var s = date.getSeconds();\r\n        s = s >= 10? s : (\"0\"+s);\r\n        datetime = datetime.format(year,month,day,h,m,s);\r\n        return datetime;\r\n    },\r\n    \r\n    initRoomHistoryList:function(data){\r\n        for(var i = 0; i < data.length; ++i){\r\n            var node = this.getViewItem(i);\r\n            node.idx = i;\r\n            var titleId = \"\" + (i + 1);\r\n            node.getChildByName(\"title\").getComponent(cc.Label).string = titleId;\r\n            node.getChildByName(\"roomNo\").getComponent(cc.Label).string = \"房间ID:\" + data[i].id;\r\n            var datetime = this.dateFormat(data[i].time * 1000);\r\n            node.getChildByName(\"time\").getComponent(cc.Label).string = datetime;\r\n            \r\n            var btnOp = node.getChildByName(\"btnOp\");\r\n            btnOp.idx = i;\r\n            btnOp.getChildByName(\"Label\").getComponent(cc.Label).string = \"详情\";\r\n            \r\n            for(var j = 0; j < 4; ++j){\r\n                var s = data[i].seats[j];\r\n                var info = s.name + \":\" +  s.score;\r\n                //console.log(info);\r\n                node.getChildByName(\"info\" + j).getComponent(cc.Label).string = info;\r\n            }\r\n        }\r\n        this._emptyTip.active = data.length == 0;\r\n        this.shrinkContent(data.length);\r\n        this._curRoomInfo = null;\r\n    },\r\n    \r\n    initGameHistoryList:function(roomInfo,data){\r\n        data.sort(function(a,b){\r\n           return a.create_time < b.create_time; \r\n        });\r\n        for(var i = 0; i < data.length; ++i){\r\n            var node = this.getViewItem(i);\r\n            var idx = data.length - i - 1;\r\n            node.idx = idx;\r\n            var titleId = \"\" + (idx + 1);\r\n            node.getChildByName(\"title\").getComponent(cc.Label).string = titleId;\r\n            node.getChildByName(\"roomNo\").getComponent(cc.Label).string = \"房间ID:\" + roomInfo.id;\r\n            var datetime = this.dateFormat(data[i].create_time * 1000);\r\n            node.getChildByName(\"time\").getComponent(cc.Label).string = datetime;\r\n            \r\n            var btnOp = node.getChildByName(\"btnOp\");\r\n            btnOp.idx = idx; \r\n            btnOp.getChildByName(\"Label\").getComponent(cc.Label).string = \"回放\";\r\n            \r\n            var result = JSON.parse(data[i].result);\r\n            for(var j = 0; j < 4; ++j){\r\n                var s = roomInfo.seats[j];\r\n                var info = s.name + \":\" + result[j];\r\n                //console.log(info);\r\n                node.getChildByName(\"info\" + j).getComponent(cc.Label).string = info;\r\n            }\r\n        }\r\n        this.shrinkContent(data.length);\r\n        this._curRoomInfo = roomInfo;\r\n    },\r\n    \r\n    getViewItem:function(index){\r\n        var content = this._content;\r\n        if(content.childrenCount > index){\r\n            return content.children[index];\r\n        }\r\n        var node = cc.instantiate(this._viewitemTemp);\r\n        content.addChild(node);\r\n        return node;\r\n    },\r\n    shrinkContent:function(num){\r\n        while(this._content.childrenCount > num){\r\n            var lastOne = this._content.children[this._content.childrenCount -1];\r\n            this._content.removeChild(lastOne,true);\r\n        }\r\n    },\r\n    \r\n    getGameListOfRoom:function(idx){\r\n        var self = this;\r\n        var roomInfo = this._historyData[idx];        \r\n        cc.vv.userMgr.getGamesOfRoom(roomInfo.uuid,function(data){\r\n            if(data != null && data.length > 0){\r\n                self.initGameHistoryList(roomInfo,data);\r\n            }\r\n        });\r\n    },\r\n    \r\n    getDetailOfGame:function(idx){\r\n        var self = this;\r\n        var roomUUID = this._curRoomInfo.uuid;\r\n        cc.vv.userMgr.getDetailOfGame(roomUUID,idx,function(data){\r\n            data.base_info = JSON.parse(data.base_info);\r\n            data.action_records = JSON.parse(data.action_records);\r\n            cc.vv.gameNetMgr.prepareReplay(self._curRoomInfo,data);\r\n            cc.vv.replayMgr.init(data);\r\n            cc.director.loadScene(\"mjgame\"); \r\n        });\r\n    },\r\n    \r\n    onViewItemClicked:function(event){\r\n        var idx = event.target.idx;\r\n        console.log(idx);\r\n        if(this._curRoomInfo == null){\r\n            this.getGameListOfRoom(idx);\r\n        }\r\n        else{\r\n            this.getDetailOfGame(idx);      \r\n        }\r\n    },\r\n    \r\n    onBtnOpClicked:function(event){\r\n        var idx = event.target.parent.idx;\r\n        console.log(idx);\r\n        if(this._curRoomInfo == null){\r\n            this.getGameListOfRoom(idx);\r\n        }\r\n        else{\r\n            this.getDetailOfGame(idx);      \r\n        }\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        updatePanel: {\n            default: null,\n            type: cc.Node\n        },\n        manifestUrl: {\n            default: null,\n            url: cc.RawAsset\n        },\n        percent: {\n            default: null,\n            type: cc.Label\n        },\n        lblErr: {\n            default: null,\n            type: cc.Label\n        }\n    },\n\n    checkCb: function (event) {\n        cc.log('Code: ' + event.getEventCode());\n        switch (event.getEventCode())\n        {\n            case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:\n                cc.log(\"No local manifest file found, hot update skipped.\");\n                cc.eventManager.removeListener(this._checkListener);\n                break;\n            case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:\n            case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:\n                cc.log(\"Fail to download manifest file, hot update skipped.\");\n                cc.eventManager.removeListener(this._checkListener);\n                break;\n            case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:\n                cc.log(\"Already up to date with the latest remote version.\");\n                cc.eventManager.removeListener(this._checkListener);\n                this.lblErr.string += \"游戏不需要更新\\n\";\n                cc.director.loadScene(\"loading\");\n                break;\n            case jsb.EventAssetsManager.NEW_VERSION_FOUND:\n                this._needUpdate = true;\n                this.updatePanel.active = true;\n                this.percent.string = '00.00%';\n                cc.eventManager.removeListener(this._checkListener);\n                break;\n            default:\n                break;\n        }\n        this.hotUpdate();\n    },\n\n    updateCb: function (event) {\n        var needRestart = false;\n        var failed = false;\n        switch (event.getEventCode())\n        {\n            case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:\n                cc.log('No local manifest file found, hot update skipped.');\n                failed = true;\n                break;\n            case jsb.EventAssetsManager.UPDATE_PROGRESSION:\n                var percent = event.getPercent();\n                var percentByFile = event.getPercentByFile();\n\n                var msg = event.getMessage();\n                if (msg) {\n                    cc.log(msg);\n                }\n                cc.log(percent.toFixed(2) + '%');\n                this.percent.string = percent + '%';\n                break;\n            case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:\n            case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:\n                cc.log('Fail to download manifest file, hot update skipped.');\n                failed = true;\n                break;\n            case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:\n                cc.log('Already up to date with the latest remote version.');\n                failed = true;\n                break;\n            case jsb.EventAssetsManager.UPDATE_FINISHED:\n                cc.log('Update finished. ' + event.getMessage());\n\n                needRestart = true;\n                break;\n            case jsb.EventAssetsManager.UPDATE_FAILED:\n                cc.log('Update failed. ' + event.getMessage());\n\n                this._failCount ++;\n                if (this._failCount < 5)\n                {\n                    this._am.downloadFailedAssets();\n                }\n                else\n                {\n                    cc.log('Reach maximum fail count, exit update process');\n                    this._failCount = 0;\n                    failed = true;\n                }\n                break;\n            case jsb.EventAssetsManager.ERROR_UPDATING:\n                cc.log('Asset update error: ' + event.getAssetId() + ', ' + event.getMessage());\n                break;\n            case jsb.EventAssetsManager.ERROR_DECOMPRESS:\n                cc.log(event.getMessage());\n                break;\n            default:\n                break;\n        }\n\n        if (failed) {\n            cc.eventManager.removeListener(this._updateListener);\n            this.updatePanel.active = false;\n        }\n\n        if (needRestart) {\n            cc.eventManager.removeListener(this._updateListener);\n            // Prepend the manifest's search path\n            var searchPaths = jsb.fileUtils.getSearchPaths();\n            var newPaths = this._am.getLocalManifest().getSearchPaths();\n            Array.prototype.unshift(searchPaths, newPaths);\n            // This value will be retrieved and appended to the default search path during game startup,\n            // please refer to samples/js-tests/main.js for detailed usage.\n            // !!! Re-add the search paths in main.js is very important, otherwise, new scripts won't take effect.\n            cc.sys.localStorage.setItem('HotUpdateSearchPaths', JSON.stringify(searchPaths));\n\n            jsb.fileUtils.setSearchPaths(searchPaths);\n            this.lblErr.string += \"游戏资源更新完毕\\n\";\n            cc.game.restart();\n        }\n    },\n\n    hotUpdate: function () {\n        if (this._am && this._needUpdate) {\n            this.lblErr.string += \"开始更新游戏资源...\\n\";\n            this._updateListener = new jsb.EventListenerAssetsManager(this._am, this.updateCb.bind(this));\n            cc.eventManager.addListener(this._updateListener, 1);\n\n            this._failCount = 0;\n            this._am.update();\n        }\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        // Hot update is only available in Native build\n        if (!cc.sys.isNative) {\n            return;\n        }\n        this.lblErr.string += \"检查游戏资源...\\n\";\n        var storagePath = ((jsb.fileUtils ? jsb.fileUtils.getWritablePath() : '/') + 'tiantianqipai-asset');\n        cc.log('Storage path for remote asset : ' + storagePath);\n        this.lblErr.string += storagePath + \"\\n\";\n        cc.log('Local manifest URL : ' + this.manifestUrl);\n        this._am = new jsb.AssetsManager(this.manifestUrl, storagePath);\n        this._am.retain();\n\n        this._needUpdate = false;\n        if (this._am.getLocalManifest().isLoaded())\n        {\n            this._checkListener = new jsb.EventListenerAssetsManager(this._am, this.checkCb.bind(this));\n            cc.eventManager.addListener(this._checkListener, 1);\n\n            this._am.checkUpdate();\n        }\n    },\n\n    onDestroy: function () {\n        this._am && this._am.release();\n    }\n});\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _huanpaitip:null,\r\n        _huanpaiArr:[]\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._huanpaitip = cc.find(\"Canvas/huansanzhang\");\r\n        this._huanpaitip.active = cc.vv.gameNetMgr.isHuanSanZhang;\r\n        \r\n        if(this._huanpaitip.active){\r\n            this.showHuanpai(cc.vv.gameNetMgr.getSelfData().huanpais == null);\r\n        }\r\n        this.initHuaipaiInfo();\r\n        \r\n        var btnOk = cc.find(\"Canvas/huansanzhang/btn_ok\");\r\n        if(btnOk){\r\n            cc.vv.utils.addClickEvent(btnOk,this.node,\"HuanSanZhang\",\"onHuanSanZhang\");\r\n        }\r\n        \r\n        var self = this;\r\n        \r\n        this.node.on('game_huanpai',function(data){\r\n           self._huanpaitip.active = true;\r\n           self.showHuanpai(true);\r\n        });\r\n        \r\n        this.node.on('huanpai_notify',function(data){\r\n            if(data.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                self.initHuaipaiInfo();    \r\n            }\r\n        });\r\n        \r\n        this.node.on('game_huanpai_over',function(data){\r\n            self._huanpaitip.active = false;\r\n            for(var i = 0; i < self._huanpaiArr.length; ++i){\r\n                self._huanpaiArr[i].y = 0;\r\n            }\r\n            self._huanpaiArr = [];\r\n            self.initHuaipaiInfo();\r\n        });\r\n        \r\n        this.node.on('game_huanpai_result',function(data){\r\n            cc.vv.gameNetMgr.isHuanSanZhang = false;\r\n            self._huanpaitip.active = false;\r\n            for(var i = 0; i < self._huanpaiArr.length; ++i){\r\n                self._huanpaiArr[i].y = 0;\r\n            }\r\n            self._huanpaiArr = [];\r\n        });\r\n        \r\n        this.node.on('mj_clicked',function(data){\r\n            var target = data;\r\n            //如果已经点起来，则取消\r\n            var idx = self._huanpaiArr.indexOf(target); \r\n            if(idx != -1){\r\n                target.y = 0;\r\n                self._huanpaiArr.splice(idx,1);\r\n            }\r\n            else{\r\n                //如果是新的，则加入\r\n                if(self._huanpaiArr.length < 3){\r\n                    self._huanpaiArr.push(target);\r\n                    target.y = 15;\r\n                }\r\n            } \r\n        });\r\n    },\r\n    \r\n    showHuanpai:function(interactable){\r\n        this._huanpaitip.getChildByName(\"info\").getComponent(cc.Label).string = \"请选择三张一样花色的牌\";\r\n        this._huanpaitip.getChildByName(\"btn_ok\").getComponent(cc.Button).interactable = interactable;\r\n        this._huanpaitip.getChildByName(\"mask\").active = false;        \r\n    },\r\n    \r\n    initHuaipaiInfo:function(){\r\n        var huaipaiinfo = cc.find(\"Canvas/game/huanpaiinfo\");\r\n        var seat = cc.vv.gameNetMgr.getSelfData();\r\n        if(seat.huanpais == null){\r\n            huaipaiinfo.active = false;\r\n            return;\r\n        }\r\n        huaipaiinfo.active = true;\r\n        for(var i = 0; i < seat.huanpais.length; ++i){\r\n            huaipaiinfo.getChildByName(\"hp\" + (i + 1)).getComponent(cc.Sprite).spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",seat.huanpais[i]);\r\n        }\r\n        \r\n        var hpm = huaipaiinfo.getChildByName(\"hpm\");\r\n        hpm.active = true;\r\n        if(cc.vv.gameNetMgr.huanpaimethod == 0){\r\n            hpm.rotation = 90;\r\n        }\r\n        else if(cc.vv.gameNetMgr.huanpaimethod == 1){\r\n            hpm.rotation = 0;\r\n        }\r\n        else if(cc.vv.gameNetMgr.huanpaimethod == 2){\r\n            hpm.rotation = 180;\r\n        }\r\n        else{\r\n            hpm.active = false;\r\n        }\r\n    },\r\n    \r\n    onHuanSanZhang:function(event){\r\n        if(this._huanpaiArr.length != 3){\r\n            return;\r\n        }\r\n        \r\n        var type = null;\r\n        for(var i = 0; i < this._huanpaiArr.length; ++i){\r\n            var pai = this._huanpaiArr[i].mjId;\r\n            var nt = cc.vv.mahjongmgr.getMahjongType(pai); \r\n            if(type == null){\r\n                type = nt;\r\n            }\r\n            else{\r\n                if(type != nt){\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        \r\n        var data = {\r\n            p1:this._huanpaiArr[0].mjId,\r\n            p2:this._huanpaiArr[1].mjId,\r\n            p3:this._huanpaiArr[2].mjId,\r\n        }\r\n        \r\n        this._huanpaitip.getChildByName(\"info\").getComponent(cc.Label).string = \"等待其他玩家选牌...\";\r\n        this._huanpaitip.getChildByName(\"btn_ok\").getComponent(cc.Button).interactable = false;\r\n        this._huanpaitip.getChildByName(\"mask\").active = true;\r\n        \r\n        cc.vv.net.send(\"huanpai\",data);\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","/**\r\n通过向服务器请求HTTP请求获取用户信息，再通过回调设置URL头\r\n */\r\n\r\nfunction loadImage(url,code,callback){\r\n    /*\r\n    if(cc.vv.images == null){\r\n        cc.vv.images = {};\r\n    }\r\n    var imageInfo = cc.vv.images[url];\r\n    if(imageInfo == null){\r\n        imageInfo = {\r\n            image:null,\r\n            queue:[],\r\n        };\r\n        cc.vv.images[url] = imageInfo;\r\n    }\r\n    \r\n    cc.loader.load(url,function (err,tex) {\r\n        imageInfo.image = tex;\r\n        var spriteFrame = new cc.SpriteFrame(tex, cc.Rect(0, 0, tex.width, tex.height));\r\n        for(var i = 0; i < imageInfo.queue.length; ++i){\r\n            var itm = imageInfo.queue[i];\r\n            itm.callback(itm.code,spriteFrame);\r\n        }\r\n        itm.queue = [];\r\n    });\r\n    if(imageInfo.image != null){\r\n        var tex = imageInfo.image;\r\n        var spriteFrame = new cc.SpriteFrame(tex, cc.Rect(0, 0, tex.width, tex.height));\r\n        callback(code,spriteFrame);\r\n    }\r\n    else{\r\n        imageInfo.queue.push({code:code,callback:callback});\r\n    }*/\r\n    cc.loader.load(url,function (err,tex) {\r\n        var spriteFrame = new cc.SpriteFrame(tex, cc.Rect(0, 0, tex.width, tex.height));\r\n        callback(code,spriteFrame);\r\n    });\r\n};\r\n\r\nfunction getBaseInfo(userid,callback){\r\n    if(cc.vv.baseInfoMap == null){\r\n        cc.vv.baseInfoMap = {};\r\n    }\r\n    \r\n    if(cc.vv.baseInfoMap[userid] != null){\r\n        callback(userid,cc.vv.baseInfoMap[userid]);\r\n    }\r\n    else{\r\n        cc.vv.http.sendRequest('/base_info',{userid:userid},function(ret){\r\n            var url = null;\r\n            if(ret.headimgurl){\r\n               url = ret.headimgurl + \".jpg\";\r\n            }\r\n            var info = {\r\n                name:ret.name,\r\n                sex:ret.sex,\r\n                url:url,\r\n            }\r\n            cc.vv.baseInfoMap[userid] = info;\r\n            callback(userid,info);\r\n            \r\n        },cc.vv.http.master_url);   \r\n    }  \r\n};\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this.setupSpriteFrame();\r\n    },\r\n    \r\n    setUserID:function(userid){\r\n        if(cc.sys.isNative == false){\r\n            return;\r\n        }\r\n        if(!userid){\r\n            return;\r\n        }\r\n        if(cc.vv.images == null){\r\n            cc.vv.images = {};\r\n        }\r\n        \r\n        var self = this;\r\n        getBaseInfo(userid,function(code,info){\r\n           if(info && info.url){\r\n                loadImage(info.url,userid,function (err,spriteFrame) {\r\n                    self._spriteFrame = spriteFrame;\r\n                    self.setupSpriteFrame();\r\n                });   \r\n            } \r\n        });\r\n    },\r\n    \r\n    setupSpriteFrame:function(){\r\n        if(this._spriteFrame){\r\n            var spr = this.getComponent(cc.Sprite);\r\n            if(spr){\r\n                spr.spriteFrame = this._spriteFrame;    \r\n            }\r\n        }\r\n    }\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        nums:{\r\n            default:[],\r\n            type:[cc.Label]\r\n        },\r\n        _inputIndex:0,\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        \r\n    },\r\n    \r\n    onEnable:function(){\r\n        this.onResetClicked();\r\n    },\r\n    \r\n    onInputFinished:function(roomId){\r\n        //回调函数后加上bind(this)的作用\r\n        //改变this的指向，类似var that = this;或者var self = this;\r\n        cc.vv.userMgr.enterRoom(roomId,function(ret){\r\n            if(ret.errcode == 0){\r\n                this.node.active = false;\r\n            }\r\n            else{\r\n                var content = \"房间[\"+ roomId +\"]不存在，请重新输入!\";\r\n                if(ret.errcode == 4){\r\n                    content = \"房间[\"+ roomId + \"]已满!\";\r\n                }\r\n                cc.vv.alert.show(\"提示\",content);\r\n                this.onResetClicked();\r\n            }\r\n        }.bind(this)); \r\n    },\r\n    \r\n    onInput:function(num){\r\n        if(this._inputIndex >= this.nums.length){\r\n            return;\r\n        }\r\n        this.nums[this._inputIndex].string = num;\r\n        this._inputIndex += 1;\r\n        \r\n        if(this._inputIndex == this.nums.length){\r\n            var roomId = this.parseRoomID();\r\n            console.log(\"ok:\" + roomId);\r\n            this.onInputFinished(roomId);\r\n        }\r\n    },\r\n    \r\n    onN0Clicked:function(){\r\n        this.onInput(0);  \r\n    },\r\n    onN1Clicked:function(){\r\n        this.onInput(1);  \r\n    },\r\n    onN2Clicked:function(){\r\n        this.onInput(2);\r\n    },\r\n    onN3Clicked:function(){\r\n        this.onInput(3);\r\n    },\r\n    onN4Clicked:function(){\r\n        this.onInput(4);\r\n    },\r\n    onN5Clicked:function(){\r\n        this.onInput(5);\r\n    },\r\n    onN6Clicked:function(){\r\n        this.onInput(6);\r\n    },\r\n    onN7Clicked:function(){\r\n        this.onInput(7);\r\n    },\r\n    onN8Clicked:function(){\r\n        this.onInput(8);\r\n    },\r\n    onN9Clicked:function(){\r\n        this.onInput(9);\r\n    },\r\n    onResetClicked:function(){\r\n        for(var i = 0; i < this.nums.length; ++i){\r\n            this.nums[i].string = \"\";\r\n        }\r\n        this._inputIndex = 0;\r\n    },\r\n    onDelClicked:function(){\r\n        if(this._inputIndex > 0){\r\n            this._inputIndex -= 1;\r\n            this.nums[this._inputIndex].string = \"\";\r\n        }\r\n    },\r\n    onCloseClicked:function(){\r\n        this.node.active = false;\r\n    },\r\n    \r\n    parseRoomID:function(){\r\n        var str = \"\";\r\n        for(var i = 0; i < this.nums.length; ++i){\r\n            str += this.nums[i].string;\r\n        }\r\n        return str;\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        tipLabel:cc.Label,\r\n        _stateStr:'',\r\n        _progress:0.0,\r\n        _splash:null,\r\n        _isLoading:false,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(!cc.sys.isNative && cc.sys.isMobile){\r\n            var cvs = this.node.getComponent(cc.Canvas);\r\n            cvs.fitHeight = true;\r\n            cvs.fitWidth = true;\r\n        }\r\n        this.initMgr();\r\n        this.tipLabel.string = this._stateStr;\r\n        \r\n        this._splash = cc.find(\"Canvas/splash\");\r\n        this._splash.active = true;\r\n    },\r\n    \r\n    start:function(){        \r\n        var self = this;\r\n        var SHOW_TIME = 3000;\r\n        var FADE_TIME = 500;\r\n        if(cc.sys.os != cc.sys.OS_IOS || !cc.sys.isNative){\r\n            self._splash.active = true;\r\n            var t = Date.now();\r\n            var fn = function(){\r\n                var dt = Date.now() - t;\r\n                if(dt < SHOW_TIME){\r\n                    setTimeout(fn,33);\r\n                }\r\n                else {\r\n                    var op = (1 - ((dt - SHOW_TIME) / FADE_TIME)) * 255;\r\n                    if(op < 0){\r\n                        self._splash.opacity = 0;\r\n                        self.checkVersion();    \r\n                    }\r\n                    else{\r\n                        self._splash.opacity = op;\r\n                        setTimeout(fn,33);   \r\n                    }\r\n                }\r\n            };\r\n            setTimeout(fn,33);\r\n        }\r\n        else{\r\n            this._splash.active = false;\r\n            this.checkVersion();\r\n        }\r\n    },\r\n    \r\n    initMgr:function(){\r\n        //把vv集作为CC的属性，那么相当于全局变量了，loading场景切换后，各种管理器还在，不用定义常驻节点了\r\n        cc.vv = {};\r\n        var UserMgr = require(\"UserMgr\");\r\n        cc.vv.userMgr = new UserMgr();\r\n        \r\n        var ReplayMgr = require(\"ReplayMgr\");\r\n        cc.vv.replayMgr = new ReplayMgr();\r\n        \r\n        cc.vv.http = require(\"HTTP\");\r\n        cc.vv.global = require(\"Global\");\r\n        cc.vv.net = require(\"Net\");\r\n        \r\n        var GameNetMgr = require(\"GameNetMgr\");\r\n        cc.vv.gameNetMgr = new GameNetMgr();\r\n        cc.vv.gameNetMgr.initHandlers();\r\n        \r\n        var AnysdkMgr = require(\"AnysdkMgr\");\r\n        cc.vv.anysdkMgr = new AnysdkMgr();\r\n        cc.vv.anysdkMgr.init();\r\n        \r\n        var VoiceMgr = require(\"VoiceMgr\");\r\n        cc.vv.voiceMgr = new VoiceMgr();\r\n        cc.vv.voiceMgr.init();\r\n        \r\n        var AudioMgr = require(\"AudioMgr\");\r\n        cc.vv.audioMgr = new AudioMgr();\r\n        cc.vv.audioMgr.init();\r\n        \r\n        var Utils = require(\"Utils\");\r\n        cc.vv.utils = new Utils();\r\n        \r\n        cc.args = this.urlParse();\r\n    },\r\n    \r\n    urlParse:function(){\r\n        var params = {};\r\n        if(window.location == null){\r\n            return params;\r\n        }\r\n        var name,value; \r\n        var str=window.location.href; //取得整个地址栏\r\n        var num=str.indexOf(\"?\") \r\n        str=str.substr(num+1); //取得所有参数   stringvar.substr(start [, length ]\r\n        \r\n        var arr=str.split(\"&\"); //各个参数放到数组里\r\n        for(var i=0;i < arr.length;i++){ \r\n            num=arr[i].indexOf(\"=\"); \r\n            if(num>0){ \r\n                name=arr[i].substring(0,num);\r\n                value=arr[i].substr(num+1);\r\n                params[name]=value;\r\n            } \r\n        }\r\n        return params;\r\n    },\r\n    \r\n    checkVersion:function(){\r\n        var self = this;\r\n        var onGetVersion = function(ret){\r\n            if(ret.version == null){\r\n                console.log(\"error.\");\r\n            }\r\n            else{\r\n                cc.vv.SI = ret;\r\n                if(ret.version != cc.VERSION){\r\n                    cc.find(\"Canvas/alert\").active = true;\r\n                }\r\n                else{\r\n                    self.startPreloading();\r\n                }\r\n            }\r\n        };\r\n        \r\n        var xhr = null;\r\n        var complete = false;\r\n        var fnRequest = function(){\r\n            self._stateStr = \"正在连接服务器\";\r\n            xhr = cc.vv.http.sendRequest(\"/get_serverinfo\",null,function(ret){\r\n                xhr = null;\r\n                complete = true;\r\n                onGetVersion(ret);\r\n            });\r\n            setTimeout(fn,5000);            \r\n        }\r\n        \r\n        var fn = function(){\r\n            if(!complete){\r\n                if(xhr){\r\n                    xhr.abort();\r\n                    self._stateStr = \"连接失败，即将重试\";\r\n                    setTimeout(function(){\r\n                        fnRequest();\r\n                    },5000);\r\n                }\r\n                else{\r\n                    fnRequest();\r\n                }\r\n            }\r\n        };\r\n        fn();\r\n    },\r\n    \r\n    onBtnDownloadClicked:function(){\r\n        cc.sys.openURL(cc.vv.SI.appweb);\r\n    },\r\n    \r\n    startPreloading:function(){\r\n        this._stateStr = \"正在加载资源，请稍候\";\r\n        this._isLoading = true;\r\n        var self = this;\r\n        \r\n        cc.loader.onProgress = function ( completedCount, totalCount,  item ){\r\n            //console.log(\"completedCount:\" + completedCount + \",totalCount:\" + totalCount );\r\n            if(self._isLoading){\r\n                self._progress = completedCount/totalCount;\r\n            }\r\n        };\r\n        \r\n        cc.loader.loadResDir(\"textures\", function (err, assets) {\r\n            self.onLoadComplete();\r\n        });      \r\n    },\r\n    \r\n    onLoadComplete:function(){\r\n        this._isLoading = false;\r\n        this._stateStr = \"准备登陆\";\r\n        cc.director.loadScene(\"login\");\r\n        cc.loader.onComplete = null;\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        if(this._stateStr.length == 0){\r\n            return;\r\n        }\r\n        this.tipLabel.string = this._stateStr + ' ';\r\n        if(this._isLoading){\r\n            this.tipLabel.string += Math.floor(this._progress * 100) + \"%\";   \r\n        }\r\n        else{\r\n            var t = Math.floor(Date.now() / 1000) % 4;\r\n            for(var i = 0; i < t; ++ i){\r\n                this.tipLabel.string += '.';\r\n            }            \r\n        }\r\n    }\r\n});","//字符串拼接的功能扩展\r\nString.prototype.format = function(args) { \r\n    if (arguments.length>0) { \r\n        var result = this; \r\n        if (arguments.length == 1 && typeof (args) == \"object\") { \r\n            for (var key in args) { \r\n                var reg=new RegExp (\"({\"+key+\"})\",\"g\"); \r\n                result = result.replace(reg, args[key]); \r\n            } \r\n        } \r\n        else { \r\n            for (var i = 0; i < arguments.length; i++) { \r\n                if(arguments[i]==undefined) { \r\n                    return \"\"; \r\n                } \r\n                else { \r\n                    var reg=new RegExp (\"({[\"+i+\"]})\",\"g\"); \r\n                    result = result.replace(reg, arguments[i]); \r\n                } \r\n            } \r\n        } \r\n        return result; \r\n    } \r\n    else { \r\n        return this; \r\n    } \r\n};\r\n \r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _mima:null,\r\n        _mimaIndex:0,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(!cc.sys.isNative && cc.sys.isMobile){\r\n            var cvs = this.node.getComponent(cc.Canvas);\r\n            cvs.fitHeight = true;\r\n            cvs.fitWidth = true;\r\n        }\r\n        \r\n        if(!cc.vv){\r\n            cc.director.loadScene(\"loading\");\r\n            return;\r\n        }\r\n        cc.vv.http.url = cc.vv.http.master_url;\r\n        cc.vv.net.addHandler('push_need_create_role',function(){\r\n            console.log(\"onLoad:push_need_create_role\");\r\n            cc.director.loadScene(\"createrole\");\r\n        });\r\n        \r\n        cc.vv.audioMgr.playBGM(\"bgMain.mp3\");\r\n        \r\n        this._mima = [\"A\",\"A\",\"B\",\"B\",\"A\",\"B\",\"A\",\"B\",\"A\",\"A\",\"A\",\"B\",\"B\",\"B\"];\r\n        \r\n        if(!cc.sys.isNative || cc.sys.os == cc.sys.OS_WINDOWS){\r\n            cc.find(\"Canvas/btn_yk\").active = true;    \r\n        }\r\n    },\r\n    \r\n    start:function(){\r\n        var account =  cc.sys.localStorage.getItem(\"wx_account\");\r\n        var sign = cc.sys.localStorage.getItem(\"wx_sign\");\r\n        if(account != null && sign != null){\r\n            var ret = {\r\n                errcode:0,\r\n                account:account,\r\n                sign:sign\r\n            }\r\n            cc.vv.userMgr.onAuth(ret);\r\n        }   \r\n    },\r\n    \r\n    onBtnQuickStartClicked:function(){\r\n        cc.vv.userMgr.guestAuth();\r\n    },\r\n    \r\n    onBtnWeichatClicked:function(){\r\n        var self = this;\r\n        cc.vv.anysdkMgr.login();\r\n    },\r\n    \r\n    onBtnMIMAClicked:function(event){\r\n        if(this._mima[this._mimaIndex] == event.target.name){\r\n            this._mimaIndex++;\r\n            if(this._mimaIndex == this._mima.length){\r\n                cc.find(\"Canvas/btn_yk\").active = true;\r\n            }\r\n        }\r\n        else{\r\n            console.log(\"oh ho~~~\");\r\n            this._mimaIndex = 0;\r\n        }\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {        \r\n        gameRoot:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n        \r\n        prepareRoot:{\r\n            default:null,\r\n            type:cc.Node   \r\n        },\r\n        \r\n        _myMJArr:[],\r\n        _options:null,\r\n        _selectedMJ:null,\r\n        _chupaiSprite:[],\r\n        _mjcount:null,\r\n        _gamecount:null,\r\n        _hupaiTips:[],\r\n        _hupaiLists:[],\r\n        _playEfxs:[],\r\n        _opts:[],\r\n    },\r\n    \r\n    onLoad: function () {\r\n        if(!cc.sys.isNative && cc.sys.isMobile){\r\n            var cvs = this.node.getComponent(cc.Canvas);\r\n            cvs.fitHeight = true;\r\n            cvs.fitWidth = true;\r\n        }\r\n        if(!cc.vv){\r\n            cc.director.loadScene(\"loading\");\r\n            return;\r\n        }\r\n        this.addComponent(\"NoticeTip\");\r\n        this.addComponent(\"GameOver\");\r\n        this.addComponent(\"DingQue\");\r\n        this.addComponent(\"PengGangs\");\r\n        this.addComponent(\"MJRoom\");\r\n        this.addComponent(\"TimePointer\");\r\n        this.addComponent(\"GameResult\");\r\n        this.addComponent(\"Chat\");\r\n        this.addComponent(\"Folds\");\r\n        this.addComponent(\"ReplayCtrl\");\r\n        this.addComponent(\"PopupMgr\");\r\n        this.addComponent(\"HuanSanZhang\");\r\n        this.addComponent(\"ReConnect\");\r\n        this.addComponent(\"Voice\");\r\n        this.addComponent(\"UserInfoShow\");\r\n        \r\n        this.initView();\r\n        this.initEventHandlers();\r\n        \r\n        this.gameRoot.active = false;\r\n        this.prepareRoot.active = true;\r\n        this.initWanfaLabel();\r\n        this.onGameBeign();\r\n        cc.vv.audioMgr.playBGM(\"bgFight.mp3\");\r\n    },\r\n    \r\n    initView:function(){\r\n        \r\n        //搜索需要的子节点\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        \r\n        this._mjcount = gameChild.getChildByName('mjcount').getComponent(cc.Label);\r\n        this._mjcount.string = \"剩余\" + cc.vv.gameNetMgr.numOfMJ + \"张\";\r\n        this._gamecount = gameChild.getChildByName('gamecount').getComponent(cc.Label);\r\n        this._gamecount.string = \"\" + cc.vv.gameNetMgr.numOfGames + \"/\" + cc.vv.gameNetMgr.maxNumOfGames + \"局\";\r\n\r\n        var myselfChild = gameChild.getChildByName(\"myself\");\r\n        var myholds = myselfChild.getChildByName(\"holds\");\r\n        \r\n        for(var i = 0; i < myholds.children.length; ++i){\r\n            var sprite = myholds.children[i].getComponent(cc.Sprite);\r\n            this._myMJArr.push(sprite);\r\n            sprite.spriteFrame = null;\r\n        }\r\n        \r\n        var realwidth = cc.view.getVisibleSize().width;\r\n        myholds.scaleX *= realwidth/1280;\r\n        myholds.scaleY *= realwidth/1280;  \r\n        \r\n        var sides = [\"myself\",\"right\",\"up\",\"left\"];\r\n        for(var i = 0; i < sides.length; ++i){\r\n            var side = sides[i];\r\n            \r\n            var sideChild = gameChild.getChildByName(side);\r\n            this._hupaiTips.push(sideChild.getChildByName(\"HuPai\"));\r\n            this._hupaiLists.push(sideChild.getChildByName(\"hupailist\"));\r\n            this._playEfxs.push(sideChild.getChildByName(\"play_efx\").getComponent(cc.Animation));\r\n            this._chupaiSprite.push(sideChild.getChildByName(\"ChuPai\").children[0].getComponent(cc.Sprite));\r\n            \r\n            var opt = sideChild.getChildByName(\"opt\");\r\n            opt.active = false;\r\n            var sprite = opt.getChildByName(\"pai\").getComponent(cc.Sprite);\r\n            var data = {\r\n                node:opt,\r\n                sprite:sprite\r\n            };\r\n            this._opts.push(data);\r\n        }\r\n        \r\n        var opts = gameChild.getChildByName(\"ops\");\r\n        this._options = opts;\r\n        this.hideOptions();\r\n        this.hideChupai();\r\n    },\r\n    \r\n    hideChupai:function(){\r\n        for(var i = 0; i < this._chupaiSprite.length; ++i){\r\n            this._chupaiSprite[i].node.active = false;\r\n        }        \r\n    },\r\n    \r\n    initEventHandlers:function(){\r\n        cc.vv.gameNetMgr.dataEventHandler = this.node;\r\n        \r\n        //初始化事件监听器\r\n        var self = this;\r\n        \r\n        this.node.on('game_holds',function(data){\r\n           self.initMahjongs();\r\n           self.checkQueYiMen();\r\n        });\r\n        \r\n        this.node.on('game_begin',function(data){\r\n            self.onGameBeign();\r\n        });\r\n        \r\n        this.node.on('game_sync',function(data){\r\n            self.onGameBeign();\r\n        });\r\n        \r\n        this.node.on('game_chupai',function(data){\r\n            data = data;\r\n            self.hideChupai();\r\n            self.checkQueYiMen();\r\n            if(data.last != cc.vv.gameNetMgr.seatIndex){\r\n                self.initMopai(data.last,null);   \r\n            }\r\n            if(!cc.vv.replayMgr.isReplay() && data.turn != cc.vv.gameNetMgr.seatIndex){\r\n                self.initMopai(data.turn,-1);\r\n            }\r\n        });\r\n        \r\n        this.node.on('game_mopai',function(data){\r\n            self.hideChupai();\r\n            data = data;\r\n            var pai = data.pai;\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(data.seatIndex);\r\n            if(localIndex == 0){\r\n                var index = 13;\r\n                var sprite = self._myMJArr[index];\r\n                self.setSpriteFrameByMJID(\"M_\",sprite,pai,index);\r\n                sprite.node.mjId = pai;                \r\n            }\r\n            else if(cc.vv.replayMgr.isReplay()){\r\n                self.initMopai(data.seatIndex,pai);\r\n            }\r\n        });\r\n        \r\n        this.node.on('game_action',function(data){\r\n            self.showAction(data);\r\n        });\r\n        \r\n        this.node.on('hupai',function(data){\r\n            var data = data;\r\n            //如果不是玩家自己，则将玩家的牌都放倒\r\n            var seatIndex = data.seatindex;\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\r\n            var hupai = self._hupaiTips[localIndex];\r\n            hupai.active = true;\r\n            \r\n            if(localIndex == 0){\r\n                self.hideOptions();\r\n            }\r\n            var seatData = cc.vv.gameNetMgr.seats[seatIndex];\r\n            seatData.hued = true;\r\n            if(cc.vv.gameNetMgr.conf.type == \"xlch\"){\r\n                hupai.getChildByName(\"sprHu\").active = true;\r\n                hupai.getChildByName(\"sprZimo\").active = false;\r\n                self.initHupai(localIndex,data.hupai);\r\n                if(data.iszimo){\r\n                    if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                        seatData.holds.pop();\r\n                        self.initMahjongs();                \r\n                    }\r\n                    else{\r\n                        self.initOtherMahjongs(seatData);\r\n                    }\r\n                } \r\n            }\r\n            else{\r\n                hupai.getChildByName(\"sprHu\").active = !data.iszimo;\r\n                hupai.getChildByName(\"sprZimo\").active = data.iszimo;\r\n                \r\n                if(!(data.iszimo && localIndex==0))\r\n                {\r\n                    //if(cc.vv.replayMgr.isReplay() == false && localIndex != 0){\r\n                    //    self.initEmptySprites(seatIndex);                \r\n                    //}\r\n                    self.initMopai(seatIndex,data.hupai);\r\n                }                                         \r\n            }\r\n            \r\n            if(cc.vv.replayMgr.isReplay() == true && cc.vv.gameNetMgr.conf.type != \"xlch\"){\r\n                var opt = self._opts[localIndex];\r\n                opt.node.active = true;\r\n                opt.sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",data.hupai);                \r\n            }\r\n            \r\n            if(data.iszimo){\r\n                self.playEfx(localIndex,\"play_zimo\");    \r\n            }\r\n            else{\r\n                self.playEfx(localIndex,\"play_hu\");\r\n            }\r\n            \r\n            cc.vv.audioMgr.playSFX(\"nv/hu.mp3\");\r\n        });\r\n        \r\n        this.node.on('mj_count',function(data){\r\n            self._mjcount.string = \"剩余\" + cc.vv.gameNetMgr.numOfMJ + \"张\";\r\n        });\r\n        \r\n        this.node.on('game_num',function(data){\r\n            self._gamecount.string = \"\" + cc.vv.gameNetMgr.numOfGames + \"/\" + cc.vv.gameNetMgr.maxNumOfGames + \"局\";\r\n        });\r\n        \r\n        this.node.on('game_over',function(data){\r\n            self.gameRoot.active = false;\r\n            self.prepareRoot.active = true;\r\n        });\r\n        \r\n        \r\n        this.node.on('game_chupai_notify',function(data){\r\n            self.hideChupai();\r\n            var seatData = data.seatData;\r\n            //如果是自己，则刷新手牌\r\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                self.initMahjongs();                \r\n            }\r\n            else{\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n            self.showChupai();\r\n            var audioUrl = cc.vv.mahjongmgr.getAudioURLByMJID(data.pai);\r\n            cc.vv.audioMgr.playSFX(audioUrl);\r\n        });\r\n        \r\n        this.node.on('guo_notify',function(data){\r\n            self.hideChupai();\r\n            self.hideOptions();\r\n            var seatData = data;\r\n            //如果是自己，则刷新手牌\r\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                self.initMahjongs();                \r\n            }\r\n            cc.vv.audioMgr.playSFX(\"give.mp3\");\r\n        });\r\n        \r\n        this.node.on('guo_result',function(data){\r\n            self.hideOptions();\r\n        });\r\n        \r\n        this.node.on('game_dingque_finish',function(data){\r\n            self.initMahjongs();\r\n        });\r\n        \r\n        this.node.on('peng_notify',function(data){    \r\n            self.hideChupai();\r\n            \r\n            var seatData = data;\r\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                self.initMahjongs();                \r\n            }\r\n            else{\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n            var localIndex = self.getLocalIndex(seatData.seatindex);\r\n            self.playEfx(localIndex,\"play_peng\");\r\n            cc.vv.audioMgr.playSFX(\"nv/peng.mp3\");\r\n            self.hideOptions();\r\n        });\r\n        \r\n        this.node.on('gang_notify',function(data){\r\n            self.hideChupai();\r\n            var data = data;\r\n            var seatData = data.seatData;\r\n            var gangtype = data.gangtype;\r\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                self.initMahjongs();                \r\n            }\r\n            else{\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n            \r\n            var localIndex = self.getLocalIndex(seatData.seatindex);\r\n            if(gangtype == \"wangang\"){\r\n                self.playEfx(localIndex,\"play_guafeng\");\r\n                cc.vv.audioMgr.playSFX(\"guafeng.mp3\");\r\n            }\r\n            else{\r\n                self.playEfx(localIndex,\"play_xiayu\");\r\n                cc.vv.audioMgr.playSFX(\"rain.mp3\");\r\n            }\r\n        });\r\n        \r\n        this.node.on(\"hangang_notify\",function(data){\r\n            var data = data;\r\n            var localIndex = self.getLocalIndex(data);\r\n            self.playEfx(localIndex,\"play_gang\");\r\n            cc.vv.audioMgr.playSFX(\"nv/gang.mp3\");\r\n            self.hideOptions();\r\n        });\r\n    },\r\n    \r\n    showChupai:function(){\r\n        var pai = cc.vv.gameNetMgr.chupai; \r\n        if( pai >= 0 ){\r\n            //\r\n            var localIndex = this.getLocalIndex(cc.vv.gameNetMgr.turn);\r\n            var sprite = this._chupaiSprite[localIndex];\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\r\n            sprite.node.active = true;   \r\n        }\r\n    },\r\n    \r\n    addOption:function(btnName,pai){\r\n        for(var i = 0; i < this._options.childrenCount; ++i){\r\n            var child = this._options.children[i]; \r\n            if(child.name == \"op\" && child.active == false){\r\n                child.active = true;\r\n                var sprite = child.getChildByName(\"opTarget\").getComponent(cc.Sprite);\r\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\r\n                var btn = child.getChildByName(btnName); \r\n                btn.active = true;\r\n                btn.pai = pai;\r\n                return;\r\n            }\r\n        }\r\n    },\r\n    \r\n    hideOptions:function(data){\r\n        this._options.active = false;\r\n        for(var i = 0; i < this._options.childrenCount; ++i){\r\n            var child = this._options.children[i]; \r\n            if(child.name == \"op\"){\r\n                child.active = false;\r\n                child.getChildByName(\"btnPeng\").active = false;\r\n                child.getChildByName(\"btnGang\").active = false;\r\n                child.getChildByName(\"btnHu\").active = false;\r\n            }\r\n        }\r\n    },\r\n    \r\n    showAction:function(data){\r\n        if(this._options.active){\r\n            this.hideOptions();\r\n        }\r\n        \r\n        if(data && (data.hu || data.gang || data.peng)){\r\n            this._options.active = true;\r\n            if(data.hu){\r\n                this.addOption(\"btnHu\",data.pai);\r\n            }\r\n            if(data.peng){\r\n                this.addOption(\"btnPeng\",data.pai);\r\n            }\r\n            \r\n            if(data.gang){\r\n                for(var i = 0; i < data.gangpai.length;++i){\r\n                    var gp = data.gangpai[i];\r\n                    this.addOption(\"btnGang\",gp);\r\n                }\r\n            }   \r\n        }\r\n    },\r\n    \r\n    initWanfaLabel:function(){\r\n        var wanfa = cc.find(\"Canvas/infobar/wanfa\").getComponent(cc.Label);\r\n        wanfa.string = cc.vv.gameNetMgr.getWanfa();\r\n    },\r\n    \r\n    initHupai:function(localIndex,pai){\r\n        if(cc.vv.gameNetMgr.conf.type == \"xlch\"){\r\n            var hupailist = this._hupaiLists[localIndex];\r\n            for(var i = 0; i < hupailist.children.length; ++i){\r\n                var hupainode = hupailist.children[i]; \r\n                if(hupainode.active == false){\r\n                    var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n                    hupainode.getComponent(cc.Sprite).spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,pai);\r\n                    hupainode.active = true;\r\n                    break;\r\n                }\r\n            }   \r\n        }\r\n    },\r\n    \r\n    playEfx:function(index,name){\r\n        this._playEfxs[index].node.active = true;\r\n        this._playEfxs[index].play(name);\r\n    },\r\n    \r\n    onGameBeign:function(){\r\n        \r\n        for(var i = 0; i < this._playEfxs.length; ++i){\r\n            this._playEfxs[i].node.active = false;\r\n        }\r\n        \r\n        for(var i = 0; i < this._hupaiLists.length; ++i){\r\n            for(var j = 0; j < this._hupaiLists[i].childrenCount; ++j){\r\n                this._hupaiLists[i].children[j].active = false;\r\n            }\r\n        }\r\n        \r\n        for(var i = 0; i < cc.vv.gameNetMgr.seats.length; ++i){\r\n            var seatData = cc.vv.gameNetMgr.seats[i];\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);        \r\n            var hupai = this._hupaiTips[localIndex];\r\n            hupai.active = seatData.hued;\r\n            if(seatData.hued){\r\n                hupai.getChildByName(\"sprHu\").active = !seatData.iszimo;\r\n                hupai.getChildByName(\"sprZimo\").active = seatData.iszimo;\r\n            }\r\n            \r\n            if(seatData.huinfo){\r\n                for(var j = 0; j < seatData.huinfo.length; ++j){\r\n                    var info = seatData.huinfo[j];\r\n                    if(info.ishupai){\r\n                        this.initHupai(localIndex,info.pai);    \r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n        this.hideChupai();\r\n        this.hideOptions();\r\n        var sides = [\"right\",\"up\",\"left\"];        \r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        for(var i = 0; i < sides.length; ++i){\r\n            var sideChild = gameChild.getChildByName(sides[i]);\r\n            var holds = sideChild.getChildByName(\"holds\");\r\n            for(var j = 0; j < holds.childrenCount; ++j){\r\n                var nc = holds.children[j];\r\n                nc.active = true;\r\n                nc.scaleX = 1.0;\r\n                nc.scaleY = 1.0;\r\n                var sprite = nc.getComponent(cc.Sprite); \r\n                sprite.spriteFrame = cc.vv.mahjongmgr.holdsEmpty[i+1];\r\n            }            \r\n        }\r\n      \r\n        if(cc.vv.gameNetMgr.gamestate == \"\" && cc.vv.replayMgr.isReplay() == false){\r\n            return;\r\n        }\r\n\r\n        this.gameRoot.active = true;\r\n        this.prepareRoot.active = false;\r\n        this.initMahjongs();\r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        for(var i in seats){\r\n            var seatData = seats[i];\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);\r\n            if(localIndex != 0){\r\n                this.initOtherMahjongs(seatData);\r\n                if(i == cc.vv.gameNetMgr.turn){\r\n                    this.initMopai(i,-1);\r\n                }\r\n                else{\r\n                    this.initMopai(i,null);    \r\n                }\r\n            }\r\n        }\r\n        this.showChupai();\r\n        if(cc.vv.gameNetMgr.curaction != null){\r\n            this.showAction(cc.vv.gameNetMgr.curaction);\r\n            cc.vv.gameNetMgr.curaction = null;\r\n        }\r\n        \r\n        this.checkQueYiMen();\r\n    },\r\n    \r\n    onMJClicked:function(event){\r\n        if(cc.vv.gameNetMgr.isHuanSanZhang){\r\n            this.node.emit(\"mj_clicked\",event.target);\r\n            return;\r\n        }\r\n        \r\n        //如果不是自己的轮子，则忽略\r\n        if(cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex){\r\n            console.log(\"not your turn.\" + cc.vv.gameNetMgr.turn);\r\n            return;\r\n        }\r\n        \r\n        for(var i = 0; i < this._myMJArr.length; ++i){\r\n            if(event.target == this._myMJArr[i].node){\r\n                //如果是再次点击，则出牌\r\n                if(event.target == this._selectedMJ){\r\n                    this.shoot(this._selectedMJ.mjId); \r\n                    this._selectedMJ.y = 0;\r\n                    this._selectedMJ = null;\r\n                    return;\r\n                }\r\n                if(this._selectedMJ != null){\r\n                    this._selectedMJ.y = 0;\r\n                }\r\n                event.target.y = 15;\r\n                this._selectedMJ = event.target;\r\n                return;\r\n            }\r\n        }\r\n    },\r\n    \r\n    //出牌\r\n    shoot:function(mjId){\r\n        if(mjId == null){\r\n            return;\r\n        }\r\n        cc.vv.net.send('chupai',mjId);\r\n    },\r\n    \r\n    getMJIndex:function(side,index){\r\n        if(side == \"right\" || side == \"up\"){\r\n            return 13 - index;\r\n        }\r\n        return index;\r\n    },\r\n    \r\n    initMopai:function(seatIndex,pai){\r\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        \r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var sideChild = gameChild.getChildByName(side);\r\n        var holds = sideChild.getChildByName(\"holds\");\r\n\r\n        var lastIndex = this.getMJIndex(side,13);\r\n        var nc = holds.children[lastIndex];\r\n\r\n        nc.scaleX = 1.0;\r\n        nc.scaleY = 1.0;\r\n                        \r\n        if(pai == null){\r\n            nc.active = false;\r\n        }\r\n        else if(pai >= 0){\r\n            nc.active = true;\r\n            if(side == \"up\"){\r\n                nc.scaleX = 0.73;\r\n                nc.scaleY = 0.73;                    \r\n            }\r\n            var sprite = nc.getComponent(cc.Sprite); \r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,pai);\r\n        }\r\n        else if(pai != null){\r\n            nc.active = true;\r\n            if(side == \"up\"){\r\n                nc.scaleX = 1.0;\r\n                nc.scaleY = 1.0;                    \r\n            }\r\n            var sprite = nc.getComponent(cc.Sprite); \r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getHoldsEmptySpriteFrame(side);\r\n        }\r\n    },\r\n    \r\n    initEmptySprites:function(seatIndex){\r\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        \r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var sideChild = gameChild.getChildByName(side);\r\n        var holds = sideChild.getChildByName(\"holds\");\r\n        var spriteFrame = cc.vv.mahjongmgr.getEmptySpriteFrame(side);\r\n        for(var i = 0; i < holds.childrenCount; ++i){\r\n            var nc = holds.children[i];\r\n            nc.scaleX = 1.0;\r\n            nc.scaleY = 1.0;\r\n            \r\n            var sprite = nc.getComponent(cc.Sprite); \r\n            sprite.spriteFrame = spriteFrame;\r\n        }\r\n    },\r\n    \r\n    initOtherMahjongs:function(seatData){\r\n        //console.log(\"seat:\" + seatData.seatindex);\r\n        var localIndex = this.getLocalIndex(seatData.seatindex);\r\n        if(localIndex == 0){\r\n            return;\r\n        }\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var game = this.node.getChildByName(\"game\");\r\n        var sideRoot = game.getChildByName(side);\r\n        var sideHolds = sideRoot.getChildByName(\"holds\");\r\n        var num = seatData.pengs.length + seatData.angangs.length + seatData.diangangs.length + seatData.wangangs.length;\r\n        num *= 3;\r\n        for(var i = 0; i < num; ++i){\r\n            var idx = this.getMJIndex(side,i);\r\n            sideHolds.children[idx].active = false;\r\n        }\r\n        \r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        var holds = this.sortHolds(seatData);\r\n        if(holds != null && holds.length > 0){\r\n            for(var i = 0; i < holds.length; ++i){\r\n                var idx = this.getMJIndex(side,i + num);\r\n                var sprite = sideHolds.children[idx].getComponent(cc.Sprite); \r\n                if(side == \"up\"){\r\n                    sprite.node.scaleX = 0.73;\r\n                    sprite.node.scaleY = 0.73;                    \r\n                }\r\n                sprite.node.active = true;\r\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,holds[i]);\r\n            }\r\n            \r\n            if(holds.length + num == 13){\r\n                var lasetIdx = this.getMJIndex(side,13);\r\n                sideHolds.children[lasetIdx].active = false;\r\n            }\r\n        }\r\n    },\r\n    \r\n    sortHolds:function(seatData){\r\n        var holds = seatData.holds;\r\n        if(holds == null){\r\n            return null;\r\n        }\r\n        //如果手上的牌的数目是2,5,8,11,14，表示最后一张牌是刚摸到的牌\r\n        var mopai = null;\r\n        var l = holds.length \r\n        if( l == 2 || l == 5 || l == 8 || l == 11 || l == 14){\r\n            mopai = holds.pop();\r\n        }\r\n        \r\n        var dingque = seatData.dingque;\r\n        cc.vv.mahjongmgr.sortMJ(holds,dingque);\r\n        \r\n        //将摸牌添加到最后\r\n        if(mopai != null){\r\n            holds.push(mopai);\r\n        }\r\n        return holds;\r\n    },\r\n    \r\n    initMahjongs:function(){\r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        var seatData = seats[cc.vv.gameNetMgr.seatIndex];\r\n        var holds = this.sortHolds(seatData);\r\n        if(holds == null){\r\n            return;\r\n        }\r\n        \r\n        //初始化手牌\r\n        var lackingNum = (seatData.pengs.length + seatData.angangs.length + seatData.diangangs.length + seatData.wangangs.length)*3;\r\n        for(var i = 0; i < holds.length; ++i){\r\n            var mjid = holds[i];\r\n            var sprite = this._myMJArr[i + lackingNum];\r\n            sprite.node.mjId = mjid;\r\n            sprite.node.y = 0;\r\n            this.setSpriteFrameByMJID(\"M_\",sprite,mjid);\r\n        }\r\n        for(var i = 0; i < lackingNum; ++i){\r\n            var sprite = this._myMJArr[i]; \r\n            sprite.node.mjId = null;\r\n            sprite.spriteFrame = null;\r\n            sprite.node.active = false;\r\n        }\r\n        for(var i = lackingNum + holds.length; i < this._myMJArr.length; ++i){\r\n            var sprite = this._myMJArr[i]; \r\n            sprite.node.mjId = null;\r\n            sprite.spriteFrame = null;\r\n            sprite.node.active = false;            \r\n        }\r\n    },\r\n    \r\n    setSpriteFrameByMJID:function(pre,sprite,mjid){\r\n        sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid);\r\n        sprite.node.active = true;\r\n    },\r\n    \r\n    //如果玩家手上还有缺的牌没有打，则只能打缺牌\r\n    checkQueYiMen:function(){\r\n        if(cc.vv.gameNetMgr.conf==null || cc.vv.gameNetMgr.conf.type != \"xlch\" || !cc.vv.gameNetMgr.getSelfData().hued){\r\n            //遍历检查看是否有未打缺的牌 如果有，则需要将不是定缺的牌设置为不可用\r\n            var dingque = cc.vv.gameNetMgr.dingque;\r\n    //        console.log(dingque)\r\n            var hasQue = false;\r\n            if(cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn){\r\n                for(var i = 0; i < this._myMJArr.length; ++i){\r\n                    var sprite = this._myMJArr[i];\r\n    //                console.log(\"sprite.node.mjId:\" + sprite.node.mjId);\r\n                    if(sprite.node.mjId != null){\r\n                        var type = cc.vv.mahjongmgr.getMahjongType(sprite.node.mjId);\r\n                        if(type == dingque){\r\n                            hasQue = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                }            \r\n            }\r\n\r\n    //        console.log(\"hasQue:\" + hasQue);\r\n            for(var i = 0; i < this._myMJArr.length; ++i){\r\n                var sprite = this._myMJArr[i];\r\n                if(sprite.node.mjId != null){\r\n                    var type = cc.vv.mahjongmgr.getMahjongType(sprite.node.mjId);\r\n                    if(hasQue && type != dingque){\r\n                        sprite.node.getComponent(cc.Button).interactable = false;\r\n                    }\r\n                    else{\r\n                        sprite.node.getComponent(cc.Button).interactable = true;\r\n                    }\r\n                }\r\n            }   \r\n        }\r\n        else{\r\n            if(cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn){\r\n                for(var i = 0; i < 14; ++i){\r\n                    var sprite = this._myMJArr[i]; \r\n                    if(sprite.node.active == true){\r\n                        sprite.node.getComponent(cc.Button).interactable = i == 13;\r\n                    }\r\n                }\r\n            }\r\n            else{\r\n                for(var i = 0; i < 14; ++i){\r\n                    var sprite = this._myMJArr[i]; \r\n                    if(sprite.node.active == true){\r\n                        sprite.node.getComponent(cc.Button).interactable = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    \r\n    getLocalIndex:function(index){\r\n        var ret = (index - cc.vv.gameNetMgr.seatIndex + 4) % 4;\r\n        //console.log(\"old:\" + index + \",base:\" + cc.vv.gameNetMgr.seatIndex + \",new:\" + ret);\r\n        return ret;\r\n    },\r\n    \r\n    onOptionClicked:function(event){\r\n        console.log(event.target.pai);\r\n        if(event.target.name == \"btnPeng\"){\r\n            cc.vv.net.send(\"peng\");\r\n        }\r\n        else if(event.target.name == \"btnGang\"){\r\n            cc.vv.net.send(\"gang\",event.target.pai);\r\n        }\r\n        else if(event.target.name == \"btnHu\"){\r\n            cc.vv.net.send(\"hu\");\r\n        }\r\n        else if(event.target.name == \"btnGuo\"){\r\n            cc.vv.net.send(\"guo\");\r\n        }\r\n    },\r\n    \r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n    },\r\n    \r\n    onDestroy:function(){\r\n        console.log(\"onDestroy\");\r\n        if(cc.vv){\r\n            cc.vv.gameNetMgr.clear();   \r\n        }\r\n    }\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        lblRoomNo:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _seats:[],\r\n        _seats2:[],\r\n        _timeLabel:null,\r\n        _voiceMsgQueue:[],\r\n        _lastPlayingSeat:null,\r\n        _playingSeat:null,\r\n        _lastPlayTime:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        \r\n        this.initView();\r\n        this.initSeats();\r\n        this.initEventHandlers();\r\n    },\r\n    \r\n    initView:function(){\r\n        var prepare = this.node.getChildByName(\"prepare\");\r\n        var seats = prepare.getChildByName(\"seats\");\r\n        for(var i = 0; i < seats.children.length; ++i){\r\n            this._seats.push(seats.children[i].getComponent(\"Seat\"));\r\n        }\r\n        \r\n        this.refreshBtns();\r\n        \r\n        this.lblRoomNo = cc.find(\"Canvas/infobar/Z_room_txt/New Label\").getComponent(cc.Label);\r\n        this._timeLabel = cc.find(\"Canvas/infobar/time\").getComponent(cc.Label);\r\n        this.lblRoomNo.string = cc.vv.gameNetMgr.roomId;\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var sides = [\"myself\",\"right\",\"up\",\"left\"];\r\n        for(var i = 0; i < sides.length; ++i){\r\n            var sideNode = gameChild.getChildByName(sides[i]);\r\n            var seat = sideNode.getChildByName(\"seat\");\r\n            this._seats2.push(seat.getComponent(\"Seat\"));\r\n        }\r\n        \r\n        var btnWechat = cc.find(\"Canvas/prepare/btnWeichat\");\r\n        if(btnWechat){\r\n            cc.vv.utils.addClickEvent(btnWechat,this.node,\"MJRoom\",\"onBtnWeichatClicked\");\r\n        }\r\n        \r\n        \r\n        var titles = cc.find(\"Canvas/typeTitle\");\r\n        for(var i = 0; i < titles.children.length; ++i){\r\n            titles.children[i].active = false;\r\n        }\r\n        \r\n        if(cc.vv.gameNetMgr.conf){\r\n            var type = cc.vv.gameNetMgr.conf.type;\r\n            if(type == null || type == \"\"){\r\n                type = \"xzdd\";\r\n            }\r\n            \r\n            titles.getChildByName(type).active = true;   \r\n        }\r\n    },\r\n    \r\n    refreshBtns:function(){\r\n        var prepare = this.node.getChildByName(\"prepare\");\r\n        var btnExit = prepare.getChildByName(\"btnExit\");\r\n        var btnDispress = prepare.getChildByName(\"btnDissolve\");\r\n        var btnWeichat = prepare.getChildByName(\"btnWeichat\");\r\n        var btnBack = prepare.getChildByName(\"btnBack\");\r\n        var isIdle = cc.vv.gameNetMgr.numOfGames == 0;\r\n        \r\n        btnExit.active = !cc.vv.gameNetMgr.isOwner() && isIdle;\r\n        btnDispress.active = cc.vv.gameNetMgr.isOwner() && isIdle;\r\n        \r\n        btnWeichat.active = isIdle;\r\n        btnBack.active = isIdle;\r\n    },\r\n    \r\n    initEventHandlers:function(){\r\n        var self = this;\r\n        this.node.on('new_user',function(data){\r\n            self.initSingleSeat(data);\r\n        });\r\n        \r\n        this.node.on('user_state_changed',function(data){\r\n            self.initSingleSeat(data);\r\n        });\r\n        \r\n        this.node.on('game_begin',function(data){\r\n            self.refreshBtns();\r\n            self.initSeats();\r\n        });\r\n        \r\n        this.node.on('game_num',function(data){\r\n            self.refreshBtns();\r\n        });\r\n\r\n        this.node.on('game_huanpai',function(data){\r\n            for(var i in self._seats2){\r\n                self._seats2[i].refreshXuanPaiState();    \r\n            }\r\n        });\r\n                \r\n        this.node.on('huanpai_notify',function(data){\r\n            var idx = data.seatindex;\r\n            var localIdx = cc.vv.gameNetMgr.getLocalIndex(idx);\r\n            self._seats2[localIdx].refreshXuanPaiState();\r\n        });\r\n        \r\n        this.node.on('game_huanpai_over',function(data){\r\n            for(var i in self._seats2){\r\n                self._seats2[i].refreshXuanPaiState();    \r\n            }\r\n        });\r\n        \r\n        this.node.on('voice_msg',function(data){\r\n            var data = data;\r\n            self._voiceMsgQueue.push(data);\r\n            self.playVoice();\r\n        });\r\n        \r\n        this.node.on('chat_push',function(data){\r\n            var data = data;\r\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\r\n            var localIdx = cc.vv.gameNetMgr.getLocalIndex(idx);\r\n            self._seats[localIdx].chat(data.content);\r\n            self._seats2[localIdx].chat(data.content);\r\n        });\r\n        \r\n        this.node.on('quick_chat_push',function(data){\r\n            var data = data;\r\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\r\n            var localIdx = cc.vv.gameNetMgr.getLocalIndex(idx);\r\n            \r\n            var index = data.content;\r\n            var info = cc.vv.chat.getQuickChatInfo(index);\r\n            self._seats[localIdx].chat(info.content);\r\n            self._seats2[localIdx].chat(info.content);\r\n            \r\n            cc.vv.audioMgr.playSFX(info.sound);\r\n        });\r\n        \r\n        this.node.on('emoji_push',function(data){\r\n            var data = data;\r\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\r\n            var localIdx = cc.vv.gameNetMgr.getLocalIndex(idx);\r\n            console.log(data);\r\n            self._seats[localIdx].emoji(data.content);\r\n            self._seats2[localIdx].emoji(data.content);\r\n        });\r\n    },\r\n    \r\n    initSeats:function(){\r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        for(var i = 0; i < seats.length; ++i){\r\n            this.initSingleSeat(seats[i]);\r\n        }\r\n    },\r\n    \r\n    initSingleSeat:function(seat){\r\n        console.log(seat)\r\n        var index = cc.vv.gameNetMgr.getLocalIndex(seat.seatindex);\r\n        var isOffline = !seat.online;\r\n        var isZhuang = seat.seatindex == cc.vv.gameNetMgr.button;\r\n        \r\n        console.log(\"isOffline:\" + isOffline);\r\n        \r\n        this._seats[index].setInfo(seat.name,seat.score);\r\n        this._seats[index].setReady(seat.ready);\r\n        this._seats[index].setOffline(isOffline);\r\n        this._seats[index].setID(seat.userid);\r\n        this._seats[index].voiceMsg(false);\r\n        \r\n        this._seats2[index].setInfo(seat.name,seat.score);\r\n        this._seats2[index].setZhuang(isZhuang);\r\n        this._seats2[index].setOffline(isOffline);\r\n        this._seats2[index].setID(seat.userid);\r\n        this._seats2[index].voiceMsg(false);\r\n        this._seats2[index].refreshXuanPaiState();\r\n    },\r\n    \r\n    onBtnSettingsClicked:function(){\r\n        cc.vv.popupMgr.showSettings();   \r\n    },\r\n\r\n    onBtnBackClicked:function(){\r\n        cc.vv.alert.show(\"返回大厅\",\"返回大厅房间仍会保留，快去邀请大伙来玩吧！\",function(){\r\n            cc.director.loadScene(\"hall\");    \r\n        },true);\r\n    },\r\n    \r\n    onBtnChatClicked:function(){\r\n        \r\n    },\r\n    \r\n    onBtnWeichatClicked:function(){\r\n        var title = \"<血战到底>\";\r\n        if(cc.vv.gameNetMgr.conf.type == \"xlch\"){\r\n            var title = \"<血流成河>\";\r\n        }\r\n        cc.vv.anysdkMgr.share(\"达达麻将\" + title,\"房号:\" + cc.vv.gameNetMgr.roomId + \" 玩法:\" + cc.vv.gameNetMgr.getWanfa());\r\n    },\r\n    \r\n    onBtnDissolveClicked:function(){\r\n        cc.vv.alert.show(\"解散房间\",\"解散房间不扣房卡，是否确定解散？\",function(){\r\n            cc.vv.net.send(\"dispress\");    \r\n        },true);\r\n    },\r\n    \r\n    onBtnExit:function(){\r\n        cc.vv.net.send(\"exit\");\r\n    },\r\n    \r\n    playVoice:function(){\r\n        if(this._playingSeat == null && this._voiceMsgQueue.length){\r\n            console.log(\"playVoice2\");\r\n            var data = this._voiceMsgQueue.shift();\r\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(idx);\r\n            this._playingSeat = localIndex;\r\n            this._seats[localIndex].voiceMsg(true);\r\n            this._seats2[localIndex].voiceMsg(true);\r\n            \r\n            var msgInfo = JSON.parse(data.content);\r\n            \r\n            var msgfile = \"voicemsg.amr\";\r\n            console.log(msgInfo.msg.length);\r\n            cc.vv.voiceMgr.writeVoice(msgfile,msgInfo.msg);\r\n            cc.vv.voiceMgr.play(msgfile);\r\n            this._lastPlayTime = Date.now() + msgInfo.time;\r\n        }\r\n    },\r\n    \r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        var minutes = Math.floor(Date.now()/1000/60);\r\n        if(this._lastMinute != minutes){\r\n            this._lastMinute = minutes;\r\n            var date = new Date();\r\n            var h = date.getHours();\r\n            h = h < 10? \"0\"+h:h;\r\n            \r\n            var m = date.getMinutes();\r\n            m = m < 10? \"0\"+m:m;\r\n            this._timeLabel.string = \"\" + h + \":\" + m;             \r\n        }\r\n        \r\n        \r\n        if(this._lastPlayTime != null){\r\n            if(Date.now() > this._lastPlayTime + 200){\r\n                this.onPlayerOver();\r\n                this._lastPlayTime = null;    \r\n            }\r\n        }\r\n        else{\r\n            this.playVoice();\r\n        }\r\n    },\r\n    \r\n        \r\n    onPlayerOver:function(){\r\n        cc.vv.audioMgr.resumeAll();\r\n        console.log(\"onPlayCallback:\" + this._playingSeat);\r\n        var localIndex = this._playingSeat;\r\n        this._playingSeat = null;\r\n        this._seats[localIndex].voiceMsg(false);\r\n        this._seats2[localIndex].voiceMsg(false);\r\n    },\r\n    \r\n    onDestroy:function(){\r\n        cc.vv.voiceMgr.stop();\r\n//        cc.vv.voiceMgr.onPlayCallback = null;\r\n    }\r\n});\r\n","var mahjongSprites = [];\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        leftAtlas:{\r\n            default:null,\r\n            type:cc.SpriteAtlas\r\n        },\r\n        \r\n        rightAtlas:{\r\n            default:null,\r\n            type:cc.SpriteAtlas\r\n        },\r\n        \r\n        bottomAtlas:{\r\n            default:null,\r\n            type:cc.SpriteAtlas\r\n        },\r\n        \r\n        bottomFoldAtlas:{\r\n            default:null,\r\n            type:cc.SpriteAtlas\r\n        },\r\n        \r\n        pengPrefabSelf:{\r\n            default:null,\r\n            type:cc.Prefab\r\n        },\r\n        \r\n        pengPrefabLeft:{\r\n            default:null,\r\n            type:cc.Prefab\r\n        },\r\n        \r\n        emptyAtlas:{\r\n            default:null,\r\n            type:cc.SpriteAtlas\r\n        },\r\n        \r\n        holdsEmpty:{\r\n            default:[],\r\n            type:[cc.SpriteFrame]\r\n        },\r\n        \r\n        _sides:null,\r\n        _pres:null,\r\n        _foldPres:null,\r\n    },\r\n    \r\n    onLoad:function(){\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        this._sides = [\"myself\",\"right\",\"up\",\"left\"];\r\n        this._pres = [\"M_\",\"R_\",\"B_\",\"L_\"];\r\n        this._foldPres = [\"B_\",\"R_\",\"B_\",\"L_\"];\r\n        cc.vv.mahjongmgr = this; \r\n        //筒\r\n        for(var i = 1; i < 10; ++i){\r\n            mahjongSprites.push(\"dot_\" + i);        \r\n        }\r\n        \r\n        //条\r\n        for(var i = 1; i < 10; ++i){\r\n            mahjongSprites.push(\"bamboo_\" + i);\r\n        }\r\n        \r\n        //万\r\n        for(var i = 1; i < 10; ++i){\r\n            mahjongSprites.push(\"character_\" + i);\r\n        }\r\n        \r\n        //中、发、白\r\n        mahjongSprites.push(\"red\");\r\n        mahjongSprites.push(\"green\");\r\n        mahjongSprites.push(\"white\");\r\n        \r\n        //东西南北风\r\n        mahjongSprites.push(\"wind_east\");\r\n        mahjongSprites.push(\"wind_west\");\r\n        mahjongSprites.push(\"wind_south\");\r\n        mahjongSprites.push(\"wind_north\");\r\n    },\r\n    \r\n    getMahjongSpriteByID:function(id){\r\n        return mahjongSprites[id];\r\n    },\r\n    \r\n    getMahjongType:function(id){\r\n      if(id >= 0 && id < 9){\r\n          return 0;\r\n      }\r\n      else if(id >= 9 && id < 18){\r\n          return 1;\r\n      }\r\n      else if(id >= 18 && id < 27){\r\n          return 2;\r\n      }\r\n    },\r\n    \r\n    getSpriteFrameByMJID:function(pre,mjid){\r\n        var spriteFrameName = this.getMahjongSpriteByID(mjid);\r\n        spriteFrameName = pre + spriteFrameName;\r\n        if(pre == \"M_\"){\r\n            return this.bottomAtlas.getSpriteFrame(spriteFrameName);            \r\n        }\r\n        else if(pre == \"B_\"){\r\n            return this.bottomFoldAtlas.getSpriteFrame(spriteFrameName);\r\n        }\r\n        else if(pre == \"L_\"){\r\n            return this.leftAtlas.getSpriteFrame(spriteFrameName);\r\n        }\r\n        else if(pre == \"R_\"){\r\n            return this.rightAtlas.getSpriteFrame(spriteFrameName);\r\n        }\r\n    },\r\n    \r\n    getAudioURLByMJID:function(id){\r\n        var realId = 0;\r\n        if(id >= 0 && id < 9){\r\n            realId = id + 21;\r\n        }\r\n        else if(id >= 9 && id < 18){\r\n            realId = id - 8;\r\n        }\r\n        else if(id >= 18 && id < 27){\r\n            realId = id - 7;\r\n        }\r\n        return \"nv/\" + realId + \".mp3\";\r\n    },\r\n    \r\n    getEmptySpriteFrame:function(side){\r\n        if(side == \"up\"){\r\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_b_up\");\r\n        }   \r\n        else if(side == \"myself\"){\r\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_b_bottom\");\r\n        }\r\n        else if(side == \"left\"){\r\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_b_left\");\r\n        }\r\n        else if(side == \"right\"){\r\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_b_right\");\r\n        }\r\n    },\r\n    \r\n    getHoldsEmptySpriteFrame:function(side){\r\n        if(side == \"up\"){\r\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_up\");\r\n        }   \r\n        else if(side == \"myself\"){\r\n            return null;\r\n        }\r\n        else if(side == \"left\"){\r\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_left\");\r\n        }\r\n        else if(side == \"right\"){\r\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_right\");\r\n        }\r\n    },\r\n    \r\n    sortMJ:function(mahjongs,dingque){\r\n        var self = this;\r\n        mahjongs.sort(function(a,b){\r\n            if(dingque >= 0){\r\n                var t1 = self.getMahjongType(a);\r\n                var t2 = self.getMahjongType(b);\r\n                if(t1 != t2){\r\n                    if(dingque == t1){\r\n                        return 1;\r\n                    }\r\n                    else if(dingque == t2){\r\n                        return -1;\r\n                    }\r\n                }\r\n            }\r\n            return a - b;\r\n        });\r\n    },\r\n    \r\n    getSide:function(localIndex){\r\n        return this._sides[localIndex];\r\n    },\r\n    \r\n    getPre:function(localIndex){\r\n        return this._pres[localIndex];\r\n    },\r\n    \r\n    getFoldPre:function(localIndex){\r\n        return this._foldPres[localIndex];\r\n    }\r\n});\r\n","if(window.io == null){\n    window.io = require(\"socket-io\");\n}\n \nvar Net = cc.Class({\n    extends: cc.Component,\n    statics: {\n        ip:\"\",\n        sio:null,\n        isPinging:false,\n        fnDisconnect:null,\n        handlers:{},\n        addHandler:function(event,fn){\n            if(this.handlers[event]){\n                console.log(\"event:\" + event + \"' handler has been registered.\");\n                return;\n            }\n\n            var handler = function(data){\n                //console.log(event + \"(\" + typeof(data) + \"):\" + (data? data.toString():\"null\"));\n                if(event != \"disconnect\" && typeof(data) == \"string\"){\n                    data = JSON.parse(data);\n                }\n                fn(data);\n            };\n            \n            this.handlers[event] = handler; \n            if(this.sio){\n                console.log(\"register:function \" + event);\n                this.sio.on(event,handler);\n            }\n        },\n        connect:function(fnConnect,fnError) {\n            var self = this;\n            \n            var opts = {\n                'reconnection':false,\n                'force new connection': true,\n                'transports':['websocket', 'polling']\n            }\n            this.sio = window.io.connect(this.ip,opts);\n            this.sio.on('reconnect',function(){\n                console.log('reconnection');\n            });\n            this.sio.on('connect',function(data){\n                self.sio.connected = true;\n                fnConnect(data);\n            });\n            \n            this.sio.on('disconnect',function(data){\n                console.log(\"disconnect\");\n                self.sio.connected = false;\n                self.close();\n            });\n            \n            this.sio.on('connect_failed',function (){\n                console.log('connect_failed');\n            });\n            \n            for(var key in this.handlers){\n                var value = this.handlers[key];\n                if(typeof(value) == \"function\"){\n                    if(key == 'disconnect'){\n                        this.fnDisconnect = value;\n                    }\n                    else{\n                        console.log(\"register:function \" + key);\n                        this.sio.on(key,value);                        \n                    }\n                }\n            }\n            \n            this.startHearbeat();\n        },\n        \n        startHearbeat:function(){\n            this.sio.on('game_pong',function(){\n                console.log('game_pong');\n                self.lastRecieveTime = Date.now(); \n            });\n            this.lastRecieveTime = Date.now();\n            var self = this;\n            console.log(1);\n            if(!self.isPinging){\n                console.log(1);\n                self.isPinging = true;\n                setInterval(function(){\n                    console.log(3);\n                    if(self.sio){\n                        console.log(4);\n                        if(Date.now() - self.lastRecieveTime > 10000){\n                            self.close();\n                        }\n                        else{\n                            self.ping();\n                        }                        \n                    }\n                },5000);\n            }   \n        },\n        send:function(event,data){\n            if(this.sio.connected){\n                if(data != null && (typeof(data) == \"object\")){\n                    data = JSON.stringify(data);\n                    //console.log(data);              \n                }\n                this.sio.emit(event,data);                \n            }\n        },\n        \n        ping:function(){\n            this.send('game_ping');\n        },\n        \n        close:function(){\n            console.log('close');\n            if(this.sio && this.sio.connected){\n                this.sio.connected = false;\n                this.sio.disconnect();\n                this.sio = null;\n            }\n            if(this.fnDisconnect){\n                this.fnDisconnect();\n                this.fnDisconnect = null;\n            }\n        },\n        \n        test:function(fnResult){\n            var xhr = null;\n            var fn = function(ret){\n                fnResult(ret.isonline);\n                xhr = null;\n            }\n            \n            var arr = this.ip.split(':');\n            var data = {\n                account:cc.vv.userMgr.account,\n                sign:cc.vv.userMgr.sign,\n                ip:arr[0],\n                port:arr[1],\n            }\n            xhr = cc.vv.http.sendRequest(\"/is_server_online\",data,fn);\n            setTimeout(function(){\n                if(xhr){\n                    xhr.abort();\n                    fnResult(false);                    \n                }\n            },1500);\n            /*\n            var opts = {\n                'reconnection':false,\n                'force new connection': true,\n                'transports':['websocket', 'polling']\n            }\n            var self = this;\n            this.testsio = window.io.connect(this.ip,opts);\n            this.testsio.on('connect',function(){\n                console.log('connect');\n                self.testsio.close();\n                self.testsio = null;\n                fnResult(true);\n            });\n            this.testsio.on('connect_error',function(){\n                console.log('connect_failed');\n                self.testsio = null;\n                fnResult(false);\n            });\n            */\n        }\n    },\n});","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _guohu:null,\r\n        _info:null,\r\n        _guohuTime:-1,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._guohu = cc.find(\"Canvas/tip_notice\");\r\n        this._guohu.active = false;\r\n        \r\n        this._info = cc.find(\"Canvas/tip_notice/info\").getComponent(cc.Label);\r\n        \r\n        var self = this;\r\n        this.node.on('push_notice',function(data){\r\n            var data = data;\r\n            self._guohu.active = true;\r\n            self._guohuTime = data.time;\r\n            self._info.string = data.info;\r\n        });\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n       if(this._guohuTime > 0){\r\n           this._guohuTime -= dt;\r\n           if(this._guohuTime < 0){\r\n               this._guohu.active = false;\r\n           }\r\n       }\r\n    },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        var btn = this.node.getChildByName(\"btn_back\");\r\n        cc.vv.utils.addClickEvent(btn,this.node,\"OnBack\",\"onBtnClicked\");        \r\n    },\r\n    \r\n    onBtnClicked:function(event){\r\n        if(event.target.name == \"btn_back\"){\r\n            this.node.active = false;\r\n        }\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(!cc.vv){\r\n            return;\r\n        }\r\n        \r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var myself = gameChild.getChildByName(\"myself\");\r\n        var pengangroot = myself.getChildByName(\"penggangs\");\r\n        var realwidth = cc.view.getVisibleSize().width;\r\n        var scale = realwidth / 1280;\r\n        pengangroot.scaleX *= scale;\r\n        pengangroot.scaleY *= scale;\r\n        \r\n        var self = this;\r\n        this.node.on('peng_notify',function(data){\r\n            //刷新所有的牌\r\n            //console.log(data);\r\n            var data = data;\r\n            self.onPengGangChanged(data);\r\n        });\r\n        \r\n        this.node.on('gang_notify',function(data){\r\n            //刷新所有的牌\r\n            //console.log(data);\r\n            var data = data;\r\n            self.onPengGangChanged(data.seatData);\r\n        });\r\n        \r\n        this.node.on('game_begin',function(data){\r\n            self.onGameBein();\r\n        });\r\n        \r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        for(var i in seats){\r\n            this.onPengGangChanged(seats[i]);\r\n        }\r\n    },\r\n    \r\n    onGameBein:function(){\r\n        this.hideSide(\"myself\");\r\n        this.hideSide(\"right\");\r\n        this.hideSide(\"up\");\r\n        this.hideSide(\"left\");\r\n    },\r\n    \r\n    hideSide:function(side){\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var myself = gameChild.getChildByName(side);\r\n        var pengangroot = myself.getChildByName(\"penggangs\");\r\n        if(pengangroot){\r\n            for(var i = 0; i < pengangroot.childrenCount; ++i){\r\n                pengangroot.children[i].active = false;\r\n            }            \r\n        }\r\n    },\r\n    \r\n    onPengGangChanged:function(seatData){\r\n        \r\n        if(seatData.angangs == null && seatData.diangangs == null && seatData.wangangs == null && seatData.pengs == null){\r\n            return;\r\n        }\r\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatData.seatindex);\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n       \r\n        console.log(\"onPengGangChanged\" + localIndex);\r\n            \r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var myself = gameChild.getChildByName(side);\r\n        var pengangroot = myself.getChildByName(\"penggangs\");\r\n        \r\n        for(var i = 0; i < pengangroot.childrenCount; ++i){\r\n            pengangroot.children[i].active = false;\r\n        }\r\n        //初始化杠牌\r\n        var index = 0;\r\n        \r\n        var gangs = seatData.angangs\r\n        for(var i = 0; i < gangs.length; ++i){\r\n            var mjid = gangs[i];\r\n            this.initPengAndGangs(pengangroot,side,pre,index,mjid,\"angang\");\r\n            index++;    \r\n        } \r\n        var gangs = seatData.diangangs\r\n        for(var i = 0; i < gangs.length; ++i){\r\n            var mjid = gangs[i];\r\n            this.initPengAndGangs(pengangroot,side,pre,index,mjid,\"diangang\");\r\n            index++;    \r\n        }\r\n        \r\n        var gangs = seatData.wangangs\r\n        for(var i = 0; i < gangs.length; ++i){\r\n            var mjid = gangs[i];\r\n            this.initPengAndGangs(pengangroot,side,pre,index,mjid,\"wangang\");\r\n            index++;    \r\n        }\r\n        \r\n        //初始化碰牌\r\n        var pengs = seatData.pengs\r\n        if(pengs){\r\n            for(var i = 0; i < pengs.length; ++i){\r\n                var mjid = pengs[i];\r\n                this.initPengAndGangs(pengangroot,side,pre,index,mjid,\"peng\");\r\n                index++;    \r\n            }    \r\n        }        \r\n    },\r\n    \r\n    initPengAndGangs:function(pengangroot,side,pre,index,mjid,flag){\r\n        var pgroot = null;\r\n        if(pengangroot.childrenCount <= index){\r\n            if(side == \"left\" || side == \"right\"){\r\n                pgroot = cc.instantiate(cc.vv.mahjongmgr.pengPrefabLeft);\r\n            }\r\n            else{\r\n                pgroot = cc.instantiate(cc.vv.mahjongmgr.pengPrefabSelf);\r\n            }\r\n            \r\n            pengangroot.addChild(pgroot);    \r\n        }\r\n        else{\r\n            pgroot = pengangroot.children[index];\r\n            pgroot.active = true;\r\n        }\r\n        \r\n        if(side == \"left\"){\r\n            pgroot.y = -(index * 25 * 3);                    \r\n        }\r\n        else if(side == \"right\"){\r\n            pgroot.y = (index * 25 * 3);\r\n            pgroot.setLocalZOrder(-index);\r\n        }\r\n        else if(side == \"myself\"){\r\n            pgroot.x = index * 55 * 3 + index * 10;                    \r\n        }\r\n        else{\r\n            pgroot.x = -(index * 55*3);\r\n        }\r\n\r\n        var sprites = pgroot.getComponentsInChildren(cc.Sprite);\r\n        for(var s = 0; s < sprites.length; ++s){\r\n            var sprite = sprites[s];\r\n            if(sprite.node.name == \"gang\"){\r\n                var isGang = flag != \"peng\";\r\n                sprite.node.active = isGang;\r\n                sprite.node.scaleX = 1.0;\r\n                sprite.node.scaleY = 1.0;\r\n                if(flag == \"angang\"){\r\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getEmptySpriteFrame(side);\r\n                    if(side == \"myself\" || side == \"up\"){\r\n                        sprite.node.scaleX = 1.4;\r\n                        sprite.node.scaleY = 1.4;                        \r\n                    }\r\n                }   \r\n                else{\r\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid);    \r\n                }\r\n            }\r\n            else{ \r\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid);\r\n            }\r\n        }\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _popuproot:null,\r\n        _settings:null,\r\n        _dissolveNotice:null,\r\n        \r\n        _endTime:-1,\r\n        _extraInfo:null,\r\n        _noticeLabel:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        \r\n        cc.vv.popupMgr = this;\r\n        \r\n        this._popuproot = cc.find(\"Canvas/popups\");\r\n        this._settings = cc.find(\"Canvas/popups/settings\");\r\n        this._dissolveNotice = cc.find(\"Canvas/popups/dissolve_notice\");\r\n        this._noticeLabel = this._dissolveNotice.getChildByName(\"info\").getComponent(cc.Label);\r\n        \r\n        this.closeAll();\r\n        \r\n        this.addBtnHandler(\"settings/btn_close\");\r\n        this.addBtnHandler(\"settings/btn_sqjsfj\");\r\n        this.addBtnHandler(\"dissolve_notice/btn_agree\");\r\n        this.addBtnHandler(\"dissolve_notice/btn_reject\");\r\n        this.addBtnHandler(\"dissolve_notice/btn_ok\");\r\n        \r\n        var self = this;\r\n        this.node.on(\"dissolve_notice\",function(event){\r\n            var data = event;\r\n            self.showDissolveNotice(data);\r\n        });\r\n        \r\n        this.node.on(\"dissolve_cancel\",function(event){\r\n            self.closeAll();\r\n        });\r\n    },\r\n    \r\n    start:function(){\r\n        if(cc.vv.gameNetMgr.dissoveData){\r\n            this.showDissolveNotice(cc.vv.gameNetMgr.dissoveData);\r\n        }\r\n    },\r\n    \r\n    addBtnHandler:function(btnName){\r\n        var btn = cc.find(\"Canvas/popups/\" + btnName);\r\n        this.addClickEvent(btn,this.node,\"PopupMgr\",\"onBtnClicked\");\r\n    },\r\n    \r\n    addClickEvent:function(node,target,component,handler){\r\n        var eventHandler = new cc.Component.EventHandler();\r\n        eventHandler.target = target;\r\n        eventHandler.component = component;\r\n        eventHandler.handler = handler;\r\n\r\n        var clickEvents = node.getComponent(cc.Button).clickEvents;\r\n        clickEvents.push(eventHandler);\r\n    },\r\n    \r\n    onBtnClicked:function(event){\r\n        this.closeAll();\r\n        var btnName = event.target.name;\r\n        if(btnName == \"btn_agree\"){\r\n            cc.vv.net.send(\"dissolve_agree\");\r\n        }\r\n        else if(btnName == \"btn_reject\"){\r\n            cc.vv.net.send(\"dissolve_reject\");\r\n        }\r\n        else if(btnName == \"btn_sqjsfj\"){\r\n            cc.vv.net.send(\"dissolve_request\"); \r\n        }\r\n    },\r\n    \r\n    closeAll:function(){\r\n        this._popuproot.active = false;\r\n        this._settings.active = false;\r\n        this._dissolveNotice.active = false;\r\n    },\r\n    \r\n    showSettings:function(){\r\n        this.closeAll();\r\n        this._popuproot.active = true;\r\n        this._settings.active = true;\r\n    },\r\n    \r\n    showDissolveRequest:function(){\r\n        this.closeAll();\r\n        this._popuproot.active = true;\r\n    },\r\n    \r\n    showDissolveNotice:function(data){\r\n        this._endTime = Date.now()/1000 + data.time;\r\n        this._extraInfo = \"\";\r\n        for(var i = 0; i < data.states.length; ++i){\r\n            var b = data.states[i];\r\n            var name = cc.vv.gameNetMgr.seats[i].name;\r\n            if(b){\r\n                this._extraInfo += \"\\n[已同意] \"+ name;\r\n            }\r\n            else{\r\n                this._extraInfo += \"\\n[待确认] \"+ name;\r\n            }\r\n        }\r\n        this.closeAll();\r\n        this._popuproot.active = true;\r\n        this._dissolveNotice.active = true;;\r\n    },\r\n    \r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        if(this._endTime > 0){\r\n            var lastTime = this._endTime - Date.now() / 1000;\r\n            if(lastTime < 0){\r\n                this._endTime = -1;\r\n            }\r\n            \r\n            var m = Math.floor(lastTime / 60);\r\n            var s = Math.ceil(lastTime - m*60);\r\n            \r\n            var str = \"\";\r\n            if(m > 0){\r\n                str += m + \"分\"; \r\n            }\r\n            \r\n            this._noticeLabel.string = str + s + \"秒后房间将自动解散\" + this._extraInfo;\r\n        }\r\n    },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        target:cc.Node,\r\n        sprite:cc.SpriteFrame,\r\n        checkedSprite:cc.SpriteFrame,\r\n        checked:false,\r\n        groupId:-1,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        if(cc.vv.radiogroupmgr == null){\r\n            var RadioGroupMgr = require(\"RadioGroupMgr\");\r\n            cc.vv.radiogroupmgr = new RadioGroupMgr();\r\n            cc.vv.radiogroupmgr.init();\r\n        }\r\n        console.log(typeof(cc.vv.radiogroupmgr.add));\r\n        cc.vv.radiogroupmgr.add(this);\r\n\r\n        this.refresh();\r\n    },\r\n    \r\n    refresh:function(){\r\n        var targetSprite = this.target.getComponent(cc.Sprite);\r\n        if(this.checked){\r\n            targetSprite.spriteFrame = this.checkedSprite;\r\n        }\r\n        else{\r\n            targetSprite.spriteFrame = this.sprite;\r\n        }\r\n    },\r\n    \r\n    check:function(value){\r\n        this.checked = value;\r\n        this.refresh();\r\n    },\r\n    \r\n    onClicked:function(){\r\n        cc.vv.radiogroupmgr.check(this);\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n    \r\n    onDestroy:function(){\r\n        if(cc.vv && cc.vv.radiogroupmgr){\r\n            cc.vv.radiogroupmgr.del(this);            \r\n        }\r\n    }\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _groups:null\r\n    },\r\n\r\n    // use this for initialization\r\n    init: function () {\r\n        this._groups = {};\r\n    },\r\n    \r\n    add:function(radioButton){\r\n        var groupId = radioButton.groupId; \r\n        var buttons = this._groups[groupId];\r\n        if(buttons == null){\r\n            buttons = [];\r\n            this._groups[groupId] = buttons; \r\n        }\r\n        buttons.push(radioButton);\r\n    },\r\n    \r\n    del:function(radioButton){\r\n        var groupId = radioButton.groupId;\r\n        var buttons = this._groups[groupId];\r\n        if(buttons == null){\r\n            return; \r\n        }\r\n        var idx = buttons.indexOf(radioButton);\r\n        if(idx != -1){\r\n            buttons.splice(idx,1);            \r\n        }\r\n        if(buttons.length == 0){\r\n            delete this._groups[groupId]   \r\n        }\r\n    },\r\n    \r\n    check:function(radioButton){\r\n        var groupId = radioButton.groupId;\r\n        var buttons = this._groups[groupId];\r\n        if(buttons == null){\r\n            return; \r\n        }\r\n        for(var i = 0; i < buttons.length; ++i){\r\n            var btn = buttons[i];\r\n            if(btn == radioButton){\r\n                btn.check(true);\r\n            }else{\r\n                btn.check(false);\r\n            }\r\n        }        \r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _reconnect:null,\r\n        _lblTip:null,\r\n        _lastPing:0,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._reconnect = cc.find(\"Canvas/reconnect\");\r\n        this._lblTip = cc.find(\"Canvas/reconnect/tip\").getComponent(cc.Label);\r\n        var self = this;\r\n        \r\n        var fnTestServerOn = function(){\r\n            cc.vv.net.test(function(ret){\r\n               if(ret){\r\n                    cc.director.loadScene('hall');                \r\n               }\r\n               else{\r\n                   setTimeout(fnTestServerOn,3000);\r\n               }\r\n            });\r\n        }\r\n        \r\n        var fn = function(data){\r\n            self.node.off('disconnect',fn);\r\n            self._reconnect.active = true;\r\n            fnTestServerOn();\r\n        };\r\n        console.log(\"adasfdasdfsdf\");\r\n        this.node.on('disconnect',fn);\r\n    },\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        if(this._reconnect.active){\r\n            var t = Math.floor(Date.now() / 1000) % 4;\r\n            this._lblTip.string = \"与服务器断开连接，正在尝试重连\";\r\n            for(var i = 0; i < t; ++ i){\r\n                this._lblTip.string += '.';\r\n            }\r\n        }\r\n    },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _nextPlayTime:1,\r\n        _replay:null,\r\n        _isPlaying:true,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        \r\n        this._replay = cc.find(\"Canvas/replay\");\r\n        this._replay.active = cc.vv.replayMgr.isReplay();\r\n    },\r\n    \r\n    onBtnPauseClicked:function(){\r\n        this._isPlaying = false;\r\n    },\r\n    \r\n    onBtnPlayClicked:function(){\r\n        this._isPlaying = true;\r\n    },\r\n    \r\n    onBtnBackClicked:function(){\r\n        cc.vv.replayMgr.clear();\r\n        cc.vv.gameNetMgr.reset();\r\n        cc.vv.gameNetMgr.roomId = null;\r\n        cc.director.loadScene(\"hall\");\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        if(cc.vv){\r\n            if(this._isPlaying && cc.vv.replayMgr.isReplay() == true && this._nextPlayTime > 0){\r\n                this._nextPlayTime -= dt;\r\n                if(this._nextPlayTime < 0){\r\n                    this._nextPlayTime = cc.vv.replayMgr.takeAction();\r\n                }\r\n            }\r\n        }\r\n    },\r\n});\r\n","var ACTION_CHUPAI = 1;\r\nvar ACTION_MOPAI = 2;\r\nvar ACTION_PENG = 3;\r\nvar ACTION_GANG = 4;\r\nvar ACTION_HU = 5;\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _lastAction:null,\r\n        _actionRecords:null,\r\n        _currentIndex:0,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n\r\n    },\r\n    \r\n    clear:function(){\r\n        this._lastAction = null;\r\n        this._actionRecords = null;\r\n        this._currentIndex = 0;\r\n    },\r\n    \r\n    init:function(data){\r\n        this._actionRecords = data.action_records;\r\n        if(this._actionRecords == null){\r\n            this._actionRecords = {};\r\n        }\r\n        this._currentIndex = 0;\r\n        this._lastAction = null;\r\n    },\r\n    \r\n    isReplay:function(){\r\n        return this._actionRecords != null;    \r\n    },\r\n    \r\n    getNextAction:function(){\r\n        if(this._currentIndex >= this._actionRecords.length){\r\n            return null;\r\n        }\r\n        \r\n        var si = this._actionRecords[this._currentIndex++];\r\n        var action = this._actionRecords[this._currentIndex++];\r\n        var pai = this._actionRecords[this._currentIndex++];\r\n        return {si:si,type:action,pai:pai};\r\n    },\r\n    \r\n    takeAction:function(){\r\n        var action = this.getNextAction();\r\n        if(this._lastAction != null && this._lastAction.type == ACTION_CHUPAI){\r\n            if(action != null && action.type != ACTION_PENG && action.type != ACTION_GANG && action.type != ACTION_HU){\r\n                cc.vv.gameNetMgr.doGuo(this._lastAction.si,this._lastAction.pai);\r\n            }\r\n        }\r\n        this._lastAction = action;\r\n        if(action == null){\r\n            return -1;\r\n        }\r\n        var nextActionDelay = 1.0;\r\n        if(action.type == ACTION_CHUPAI){\r\n            //console.log(\"chupai\");\r\n            cc.vv.gameNetMgr.doChupai(action.si,action.pai);\r\n            return 1.0;\r\n        }\r\n        else if(action.type == ACTION_MOPAI){\r\n            //console.log(\"mopai\");\r\n            cc.vv.gameNetMgr.doMopai(action.si,action.pai);\r\n            cc.vv.gameNetMgr.doTurnChange(action.si);\r\n            return 0.5;\r\n        }\r\n        else if(action.type == ACTION_PENG){\r\n            //console.log(\"peng\");\r\n            cc.vv.gameNetMgr.doPeng(action.si,action.pai);\r\n            cc.vv.gameNetMgr.doTurnChange(action.si);\r\n            return 1.0;\r\n        }\r\n        else if(action.type == ACTION_GANG){\r\n            //console.log(\"gang\");\r\n            cc.vv.gameNetMgr.dispatchEvent('hangang_notify',action.si);\r\n            cc.vv.gameNetMgr.doGang(action.si,action.pai);\r\n            cc.vv.gameNetMgr.doTurnChange(action.si);\r\n            return 1.0;\r\n        }\r\n        else if(action.type == ACTION_HU){\r\n            //console.log(\"hu\");\r\n            cc.vv.gameNetMgr.doHu({seatindex:action.si,hupai:action.pai,iszimo:false});\r\n            return 1.5;\r\n        }\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _sprIcon:null,\r\n        _zhuang:null,\r\n        _ready:null,\r\n        _offline:null,\r\n        _lblName:null,\r\n        _lblScore:null,\r\n        _scoreBg:null,\r\n        _nddayingjia:null,\r\n        _voicemsg:null,\r\n        \r\n        _chatBubble:null,\r\n        _emoji:null,\r\n        _lastChatTime:-1,\r\n        \r\n        _userName:\"\",\r\n        _score:0,\r\n        _dayingjia:false,\r\n        _isOffline:false,\r\n        _isReady:false,\r\n        _isZhuang:false,\r\n        _userId:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        \r\n        this._sprIcon = this.node.getChildByName(\"icon\").getComponent(\"ImageLoader\");\r\n        this._lblName = this.node.getChildByName(\"name\").getComponent(cc.Label);\r\n        this._lblScore = this.node.getChildByName(\"score\").getComponent(cc.Label);\r\n        this._voicemsg = this.node.getChildByName(\"voicemsg\");\r\n        this._xuanpai = this.node.getChildByName(\"xuanpai\");\r\n        this.refreshXuanPaiState();\r\n        \r\n        if(this._voicemsg){\r\n            this._voicemsg.active = false;\r\n        }\r\n        \r\n        if(this._sprIcon && this._sprIcon.getComponent(cc.Button)){\r\n            cc.vv.utils.addClickEvent(this._sprIcon,this.node,\"Seat\",\"onIconClicked\");    \r\n        }\r\n        \r\n        \r\n        this._offline = this.node.getChildByName(\"offline\");\r\n        \r\n        this._ready = this.node.getChildByName(\"ready\");\r\n        \r\n        this._zhuang = this.node.getChildByName(\"zhuang\");\r\n        \r\n        this._scoreBg = this.node.getChildByName(\"Z_money_frame\");\r\n        this._nddayingjia = this.node.getChildByName(\"dayingjia\");\r\n        \r\n        this._chatBubble = this.node.getChildByName(\"ChatBubble\");\r\n        if(this._chatBubble != null){\r\n            this._chatBubble.active = false;            \r\n        }\r\n        \r\n        this._emoji = this.node.getChildByName(\"emoji\");\r\n        if(this._emoji != null){\r\n            this._emoji.active = false;\r\n        }\r\n        \r\n        this.refresh();\r\n        \r\n        if(this._sprIcon && this._userId){\r\n            this._sprIcon.setUserID(this._userId);\r\n        }\r\n    },\r\n    \r\n    onIconClicked:function(){\r\n        var iconSprite = this._sprIcon.node.getComponent(cc.Sprite);\r\n        if(this._userId != null && this._userId > 0){\r\n           var seat = cc.vv.gameNetMgr.getSeatByID(this._userId);\r\n            var sex = 0;\r\n            if(cc.vv.baseInfoMap){\r\n                var info = cc.vv.baseInfoMap[this._userId];\r\n                if(info){\r\n                    sex = info.sex;\r\n                }                \r\n            }\r\n            cc.vv.userinfoShow.show(seat.name,seat.userid,iconSprite,sex,seat.ip);         \r\n        }\r\n    },\r\n    \r\n    refresh:function(){\r\n        if(this._lblName != null){\r\n            this._lblName.string = this._userName;    \r\n        }\r\n        \r\n        if(this._lblScore != null){\r\n            this._lblScore.string = this._score;            \r\n        }        \r\n        \r\n        if(this._nddayingjia != null){\r\n            this._nddayingjia.active = this._dayingjia == true;\r\n        }\r\n        \r\n        if(this._offline){\r\n            this._offline.active = this._isOffline && this._userName != \"\";\r\n        }\r\n        \r\n        if(this._ready){\r\n            this._ready.active = this._isReady && (cc.vv.gameNetMgr.numOfGames > 0); \r\n        }\r\n        \r\n        if(this._zhuang){\r\n            this._zhuang.active = this._isZhuang;    \r\n        }\r\n        \r\n        this.node.active = this._userName != null && this._userName != \"\"; \r\n    },\r\n    \r\n    setInfo(name,score,dayingjia){\r\n        this._userName = name;\r\n        this._score = score;\r\n        if(this._score == null){\r\n            this._score = 0;\r\n        }\r\n        this._dayingjia = dayingjia;\r\n        \r\n        if(this._scoreBg != null){\r\n            this._scoreBg.active = this._score != null;            \r\n        }\r\n\r\n        if(this._lblScore != null){\r\n            this._lblScore.node.active = this._score != null;            \r\n        }\r\n\r\n        this.refresh();    \r\n    },\r\n    \r\n    setZhuang:function(value){\r\n        if(this._zhuang){\r\n            this._zhuang.active = value;\r\n        }\r\n    },\r\n    \r\n    setReady:function(isReady){\r\n        this._isReady = isReady;\r\n        if(this._ready){\r\n            this._ready.active = this._isReady && (cc.vv.gameNetMgr.numOfGames > 0); \r\n        }\r\n    },\r\n    \r\n    setID:function(id){\r\n        var idNode = this.node.getChildByName(\"id\");\r\n        if(idNode){\r\n            var lbl = idNode.getComponent(cc.Label);\r\n            lbl.string = \"ID:\" + id;            \r\n        }\r\n        \r\n        this._userId = id;\r\n        if(this._sprIcon){\r\n            this._sprIcon.setUserID(id); \r\n        }\r\n    },\r\n    \r\n    setOffline:function(isOffline){\r\n        this._isOffline = isOffline;\r\n        if(this._offline){\r\n            this._offline.active = this._isOffline && this._userName != \"\";\r\n        }\r\n    },\r\n    \r\n    chat:function(content){\r\n        if(this._chatBubble == null || this._emoji == null){\r\n            return;\r\n        }\r\n        this._emoji.active = false;\r\n        this._chatBubble.active = true;\r\n        this._chatBubble.getComponent(cc.Label).string = content;\r\n        this._chatBubble.getChildByName(\"New Label\").getComponent(cc.Label).string = content;\r\n        this._lastChatTime = 3;\r\n    },\r\n    \r\n    emoji:function(emoji){\r\n        //emoji = JSON.parse(emoji);\r\n        if(this._emoji == null || this._emoji == null){\r\n            return;\r\n        }\r\n        console.log(emoji);\r\n        this._chatBubble.active = false;\r\n        this._emoji.active = true;\r\n        this._emoji.getComponent(cc.Animation).play(emoji);\r\n        this._lastChatTime = 3;\r\n    },\r\n    \r\n    voiceMsg:function(show){\r\n        if(this._voicemsg){\r\n            this._voicemsg.active = show;\r\n        }\r\n    },\r\n    \r\n    refreshXuanPaiState:function(){\r\n        if(this._xuanpai == null){\r\n            return;\r\n        }\r\n        \r\n        this._xuanpai.active = cc.vv.gameNetMgr.isHuanSanZhang;\r\n        if(cc.vv.gameNetMgr.isHuanSanZhang == false){ \r\n            return;\r\n        }\r\n       \r\n        this._xuanpai.getChildByName(\"xz\").active = false;\r\n        this._xuanpai.getChildByName(\"xd\").active = false;\r\n        \r\n        var seat = cc.vv.gameNetMgr.getSeatByID(this._userId);\r\n        if(seat){\r\n            if(seat.huanpais == null){\r\n                this._xuanpai.getChildByName(\"xz\").active = true;\r\n            }\r\n            else{\r\n                this._xuanpai.getChildByName(\"xd\").active = true;\r\n            }\r\n        }\r\n    },\r\n   \r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        if(this._lastChatTime > 0){\r\n            this._lastChatTime -= dt;\r\n            if(this._lastChatTime < 0){\r\n                this._chatBubble.active = false;\r\n                this._emoji.active = false;\r\n                this._emoji.getComponent(cc.Animation).stop();\r\n            }\r\n        }\r\n    },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _btnYXOpen:null,\r\n        _btnYXClose:null,\r\n        _btnYYOpen:null,\r\n        _btnYYClose:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n                \r\n        this._btnYXOpen = this.node.getChildByName(\"yinxiao\").getChildByName(\"btn_yx_open\");\r\n        this._btnYXClose = this.node.getChildByName(\"yinxiao\").getChildByName(\"btn_yx_close\");\r\n        \r\n        this._btnYYOpen = this.node.getChildByName(\"yinyue\").getChildByName(\"btn_yy_open\");\r\n        this._btnYYClose = this.node.getChildByName(\"yinyue\").getChildByName(\"btn_yy_close\");\r\n        \r\n        this.initButtonHandler(this.node.getChildByName(\"btn_close\"));\r\n        this.initButtonHandler(this.node.getChildByName(\"btn_exit\"));\r\n        \r\n        \r\n        this.initButtonHandler(this._btnYXOpen);\r\n        this.initButtonHandler(this._btnYXClose);\r\n        this.initButtonHandler(this._btnYYOpen);\r\n        this.initButtonHandler(this._btnYYClose);\r\n        \r\n\r\n        var slider = this.node.getChildByName(\"yinxiao\").getChildByName(\"progress\");\r\n        cc.vv.utils.addSlideEvent(slider,this.node,\"Settings\",\"onSlided\");\r\n        \r\n        var slider = this.node.getChildByName(\"yinyue\").getChildByName(\"progress\");\r\n        cc.vv.utils.addSlideEvent(slider,this.node,\"Settings\",\"onSlided\");\r\n        \r\n        this.refreshVolume();\r\n    },\r\n    \r\n    onSlided:function(slider){\r\n        if(slider.node.parent.name == \"yinxiao\"){\r\n            cc.vv.audioMgr.setSFXVolume(slider.progress);\r\n        }\r\n        else if(slider.node.parent.name == \"yinyue\"){\r\n            cc.vv.audioMgr.setBGMVolume(slider.progress);\r\n        }\r\n        this.refreshVolume();\r\n    },\r\n    \r\n    initButtonHandler:function(btn){\r\n        cc.vv.utils.addClickEvent(btn,this.node,\"Settings\",\"onBtnClicked\");    \r\n    },\r\n    \r\n    refreshVolume:function(){\r\n        \r\n        this._btnYXClose.active = cc.vv.audioMgr.sfxVolume > 0;\r\n        this._btnYXOpen.active = !this._btnYXClose.active;\r\n        \r\n        var yx = this.node.getChildByName(\"yinxiao\");\r\n        var width = 430 * cc.vv.audioMgr.sfxVolume;\r\n        var progress = yx.getChildByName(\"progress\")\r\n        progress.getComponent(cc.Slider).progress = cc.vv.audioMgr.sfxVolume;\r\n        progress.getChildByName(\"progress\").width = width;  \r\n        //yx.getChildByName(\"btn_progress\").x = progress.x + width;\r\n        \r\n        \r\n        this._btnYYClose.active = cc.vv.audioMgr.bgmVolume > 0;\r\n        this._btnYYOpen.active = !this._btnYYClose.active;\r\n        var yy = this.node.getChildByName(\"yinyue\");\r\n        var width = 430 * cc.vv.audioMgr.bgmVolume;\r\n        var progress = yy.getChildByName(\"progress\");\r\n        progress.getComponent(cc.Slider).progress = cc.vv.audioMgr.bgmVolume; \r\n        \r\n        progress.getChildByName(\"progress\").width = width;\r\n        //yy.getChildByName(\"btn_progress\").x = progress.x + width;\r\n    },\r\n    \r\n    onBtnClicked:function(event){\r\n        if(event.target.name == \"btn_close\"){\r\n            this.node.active = false;\r\n        }\r\n        else if(event.target.name == \"btn_exit\"){\r\n            cc.sys.localStorage.removeItem(\"wx_account\");\r\n            cc.sys.localStorage.removeItem(\"wx_sign\");\r\n            cc.director.loadScene(\"login\");\r\n        }\r\n        else if(event.target.name == \"btn_yx_open\"){\r\n            cc.vv.audioMgr.setSFXVolume(1.0);\r\n            this.refreshVolume(); \r\n        }\r\n        else if(event.target.name == \"btn_yx_close\"){\r\n            cc.vv.audioMgr.setSFXVolume(0);\r\n            this.refreshVolume();\r\n        }\r\n        else if(event.target.name == \"btn_yy_open\"){\r\n            cc.vv.audioMgr.setBGMVolume(1);\r\n            this.refreshVolume();\r\n        }\r\n        else if(event.target.name == \"btn_yy_close\"){\r\n            cc.vv.audioMgr.setBGMVolume(0);\r\n            this.refreshVolume();\r\n        }\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _arrow:null,\r\n        _pointer:null,\r\n        _timeLabel:null,\r\n        _time:-1,\r\n        _alertTime:-1,\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        this._arrow = gameChild.getChildByName(\"arrow\");\r\n        this._pointer = this._arrow.getChildByName(\"pointer\");\r\n        this.initPointer();\r\n        \r\n        this._timeLabel = this._arrow.getChildByName(\"lblTime\").getComponent(cc.Label);\r\n        this._timeLabel.string = \"00\";\r\n        \r\n        var self = this;\r\n        \r\n        this.node.on('game_begin',function(data){\r\n            self.initPointer();\r\n        });\r\n        \r\n        this.node.on('game_chupai',function(data){\r\n            self.initPointer();\r\n            self._time = 10;\r\n            self._alertTime = 3;\r\n        });\r\n    }, \r\n    \r\n    initPointer:function(){\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        this._arrow.active = cc.vv.gameNetMgr.gamestate == \"playing\";\r\n        if(!this._arrow.active){\r\n            return;\r\n        }\r\n        var turn = cc.vv.gameNetMgr.turn;\r\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(turn);\r\n        for(var i = 0; i < this._pointer.children.length; ++i){\r\n            this._pointer.children[i].active = i == localIndex;\r\n        }\r\n    },\r\n    \r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        if(this._time > 0){\r\n            this._time -= dt;\r\n            if(this._alertTime > 0 && this._time < this._alertTime){\r\n                cc.vv.audioMgr.playSFX(\"timeup_alarm.mp3\");\r\n                this._alertTime = -1;\r\n            }\r\n            var pre = \"\";\r\n            if(this._time < 0){\r\n                this._time = 0;\r\n            }\r\n            \r\n            var t = Math.ceil(this._time);\r\n            if(t < 10){\r\n                pre = \"0\";\r\n            }\r\n            this._timeLabel.string = pre + t; \r\n        }\r\n    },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _userinfo:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n        \r\n        this._userinfo = cc.find(\"Canvas/userinfo\");\r\n        this._userinfo.active = false;\r\n        //因为这样处理点击面板任意地方关闭，所以脚本组件是在父节点上动态加载的(Hall.js中，this.addComponent(\"UserInfoShow\");)\r\n        cc.vv.utils.addClickEvent(this._userinfo,this.node,\"UserInfoShow\",\"onClicked\");\r\n        \r\n        cc.vv.userinfoShow = this;\r\n    },\r\n    \r\n    show:function(name,userId,iconSprite,sex,ip){\r\n        if(userId != null && userId > 0){\r\n            this._userinfo.active = true;\r\n            this._userinfo.getChildByName(\"icon\").getComponent(cc.Sprite).spriteFrame = iconSprite.spriteFrame;\r\n            this._userinfo.getChildByName(\"name\").getComponent(cc.Label).string = name;\r\n            this._userinfo.getChildByName(\"ip\").getComponent(cc.Label).string = \"IP: \" + ip.replace(\"::ffff:\",\"\");\r\n            this._userinfo.getChildByName(\"id\").getComponent(cc.Label).string = \"ID: \" + userId;\r\n            \r\n            var sex_female = this._userinfo.getChildByName(\"sex_female\");\r\n            sex_female.active = false;\r\n            \r\n            var sex_male = this._userinfo.getChildByName(\"sex_male\");\r\n            sex_male.active = false;\r\n            \r\n            if(sex == 1){\r\n                sex_male.active = true;\r\n            }   \r\n            else if(sex == 2){\r\n                sex_female.active = true;\r\n            }\r\n        }\r\n    },\r\n    \r\n    onClicked:function(){\r\n        this._userinfo.active = false;\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        account:null,\r\n\t    userId:null,\r\n\t\tuserName:null,\r\n\t\tlv:0,\r\n\t\texp:0,\r\n\t\tcoins:0,\r\n\t\tgems:0,\r\n\t\tsign:0,\r\n        ip:\"\",\r\n        sex:0,\r\n        roomData:null,\r\n        \r\n        oldRoomId:null,\r\n    },\r\n    \r\n    guestAuth:function(){\r\n        var account = cc.args[\"account\"];\r\n        if(account == null){\r\n            account = cc.sys.localStorage.getItem(\"account\");\r\n        }\r\n        \r\n        if(account == null){\r\n            account = Date.now();\r\n            cc.sys.localStorage.setItem(\"account\",account);\r\n        }\r\n        \r\n        cc.vv.http.sendRequest(\"/guest\",{account:account},this.onAuth);\r\n    },\r\n    \r\n    onAuth:function(ret){\r\n        var self = cc.vv.userMgr;\r\n        if(ret.errcode !== 0){\r\n            console.log(ret.errmsg);\r\n        }\r\n        else{\r\n            self.account = ret.account;\r\n            self.sign = ret.sign;\r\n            cc.vv.http.url = \"http://\" + cc.vv.SI.hall;\r\n            self.login();\r\n        }   \r\n    },\r\n    \r\n    login:function(){\r\n        var self = this;\r\n        var onLogin = function(ret){\r\n            if(ret.errcode !== 0){\r\n                console.log(ret.errmsg);\r\n            }\r\n            else{\r\n                if(!ret.userid){\r\n                    //jump to register user info.\r\n                    cc.director.loadScene(\"createrole\");\r\n                }\r\n                else{\r\n                    console.log(ret);\r\n                    self.account = ret.account;\r\n        \t\t\tself.userId = ret.userid;\r\n        \t\t\tself.userName = ret.name;\r\n        \t\t\tself.lv = ret.lv;\r\n        \t\t\tself.exp = ret.exp;\r\n        \t\t\tself.coins = ret.coins;\r\n        \t\t\tself.gems = ret.gems;\r\n                    self.roomData = ret.roomid;\r\n                    self.sex = ret.sex;\r\n                    self.ip = ret.ip;\r\n        \t\t\tcc.director.loadScene(\"hall\");\r\n                }\r\n            }\r\n        };\r\n        cc.vv.wc.show(\"正在登录游戏\");\r\n        cc.vv.http.sendRequest(\"/login\",{account:this.account,sign:this.sign},onLogin);\r\n    },\r\n    \r\n    create:function(name){\r\n        var self = this;\r\n        var onCreate = function(ret){\r\n            if(ret.errcode !== 0){\r\n                console.log(ret.errmsg);\r\n            }\r\n            else{\r\n                self.login();\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            account:this.account,\r\n            sign:this.sign,\r\n            name:name\r\n        };\r\n        cc.vv.http.sendRequest(\"/create_user\",data,onCreate);    \r\n    },\r\n    \r\n    enterRoom:function(roomId,callback){\r\n        var self = this;\r\n        var onEnter = function(ret){\r\n            if(ret.errcode !== 0){\r\n                if(ret.errcode == -1){\r\n                    setTimeout(function(){\r\n                        self.enterRoom(roomId,callback);\r\n                    },5000);\r\n                }\r\n                else{\r\n                    cc.vv.wc.hide();\r\n                    if(callback != null){\r\n                        callback(ret);\r\n                    }\r\n                }\r\n            }\r\n            else{\r\n                if(callback != null){\r\n                    callback(ret);\r\n                }\r\n                //连接游戏服，连接成功后，长连接(socket.io)，然后登录游戏服，\r\n                //成功后回调切换场景\r\n                cc.vv.gameNetMgr.connectGameServer(ret);\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            account:cc.vv.userMgr.account,\r\n            sign:cc.vv.userMgr.sign,\r\n            roomid:roomId\r\n        };\r\n        cc.vv.wc.show(\"正在进入房间 \" + roomId);\r\n        cc.vv.http.sendRequest(\"/enter_private_room\",data,onEnter);\r\n    },\r\n    getHistoryList:function(callback){\r\n        var self = this;\r\n        var onGet = function(ret){\r\n            if(ret.errcode !== 0){\r\n                console.log(ret.errmsg);\r\n            }\r\n            else{\r\n                console.log(ret.history);\r\n                if(callback != null){\r\n                    callback(ret.history);\r\n                }\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            account:cc.vv.userMgr.account,\r\n            sign:cc.vv.userMgr.sign,\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_history_list\",data,onGet);\r\n    },\r\n    getGamesOfRoom:function(uuid,callback){\r\n        var self = this;\r\n        var onGet = function(ret){\r\n            if(ret.errcode !== 0){\r\n                console.log(ret.errmsg);\r\n            }\r\n            else{\r\n                console.log(ret.data);\r\n                callback(ret.data);\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            account:cc.vv.userMgr.account,\r\n            sign:cc.vv.userMgr.sign,\r\n            uuid:uuid,\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_games_of_room\",data,onGet);\r\n    },\r\n    \r\n    getDetailOfGame:function(uuid,index,callback){\r\n        var self = this;\r\n        var onGet = function(ret){\r\n            if(ret.errcode !== 0){\r\n                console.log(ret.errmsg);\r\n            }\r\n            else{\r\n                console.log(ret.data);\r\n                callback(ret.data);\r\n            }       \r\n        };\r\n        \r\n        var data = {\r\n            account:cc.vv.userMgr.account,\r\n            sign:cc.vv.userMgr.sign,\r\n            uuid:uuid,\r\n            index:index,\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_detail_of_game\",data,onGet);\r\n    }\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    addClickEvent:function(node,target,component,handler){\r\n        console.log(component + \":\" + handler);\r\n        var eventHandler = new cc.Component.EventHandler();\r\n        eventHandler.target = target;\r\n        eventHandler.component = component;\r\n        eventHandler.handler = handler;\r\n\r\n        var clickEvents = node.getComponent(cc.Button).clickEvents;\r\n        clickEvents.push(eventHandler);\r\n    },\r\n    \r\n    addSlideEvent:function(node,target,component,handler){\r\n        var eventHandler = new cc.Component.EventHandler();\r\n        eventHandler.target = target;\r\n        eventHandler.component = component;\r\n        eventHandler.handler = handler;\r\n\r\n        var slideEvents = node.getComponent(cc.Slider).slideEvents;\r\n        slideEvents.push(eventHandler);\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n","var radix = 12;\r\nvar base = 128 - radix;\r\nfunction crypto(value){\r\n    value -= base;\r\n    var h = Math.floor(value/radix) + base;\r\n    var l = value%radix + base;\r\n    return String.fromCharCode(h) + String.fromCharCode(l);\r\n}\r\n\r\nvar encodermap = {}\r\nvar decodermap = {}\r\nfor(var i = 0; i < 256; ++i){\r\n    var code = null;\r\n    var v = i + 1;\r\n    if(v >= base){\r\n        code = crypto(v);\r\n    }\r\n    else{\r\n        code = String.fromCharCode(v);    \r\n    }\r\n    \r\n    encodermap[i] = code;\r\n    decodermap[code] = i;\r\n}\r\n\r\nfunction encode(data){\r\n    var content = \"\";\r\n    var len = data.length;\r\n    var a = (len >> 24) & 0xff;\r\n    var b = (len >> 16) & 0xff;\r\n    var c = (len >> 8) & 0xff;\r\n    var d = len & 0xff;\r\n    content += encodermap[a];\r\n    content += encodermap[b];\r\n    content += encodermap[c];\r\n    content += encodermap[d];\r\n    for(var i = 0; i < data.length; ++i){\r\n        content += encodermap[data[i]];\r\n    }\r\n    return content;\r\n}\r\n\r\nfunction getCode(content,index){\r\n    var c = content.charCodeAt(index);\r\n    if(c >= base){\r\n        c = content.charAt(index) + content.charAt(index + 1);\r\n    }\r\n    else{\r\n        c = content.charAt(index);\r\n    }\r\n    return c;\r\n}\r\nfunction decode(content){\r\n    var index = 0;\r\n    var len = 0;\r\n    for(var i = 0; i < 4; ++i){\r\n        var c = getCode(content,index);\r\n        index += c.length;\r\n        var v = decodermap[c];\r\n        len |= v << (3-i)*8;\r\n    }\r\n    \r\n    var newData = new Uint8Array(len);\r\n    var cnt = 0;\r\n    while(index < content.length){\r\n        var c = getCode(content,index);\r\n        index += c.length;\r\n        newData[cnt] = decodermap[c];\r\n        cnt++;\r\n    }\r\n    return newData;\r\n}\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        onPlayCallback:null,\r\n        _voiceMediaPath:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    init: function () {\r\n        /*\r\n        var url = cc.url.raw(\"resources/test.amr\");\r\n        var fileData = jsb.fileUtils.getDataFromFile(url);\r\n        var content = \"\";\r\n        var sep = \"\";\r\n        for(var i = 0; i < fileData.length; ++i){\r\n            content += sep + fileData[i];\r\n            sep = \",\";\r\n        }\r\n        \r\n        var url = cc.url.raw(\"resources/test.txt\");\r\n        jsb.fileUtils.writeStringToFile(content,url);\r\n        \r\n        var url = cc.url.raw(\"resources/test2.amrs\");\r\n        var content = encode(fileData);\r\n        jsb.fileUtils.writeStringToFile(content,url);\r\n        \r\n        var url = cc.url.raw(\"resources/test2.amr\");\r\n        jsb.fileUtils.writeDataToFile(decode(content),url);\r\n        */\r\n        \r\n        if(cc.sys.isNative){\r\n            this._voiceMediaPath = jsb.fileUtils.getWritablePath() + \"/voicemsgs/\";\r\n            this.setStorageDir(this._voiceMediaPath);\r\n        }\r\n    },\r\n    \r\n    prepare:function(filename){\r\n        if(!cc.sys.isNative){\r\n            return;\r\n        }\r\n        cc.vv.audioMgr.pauseAll();\r\n        this.clearCache(filename);\r\n        if(cc.sys.os == cc.sys.OS_ANDROID){\r\n            jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"prepare\", \"(Ljava/lang/String;)V\",filename);\r\n        }\r\n        else if(cc.sys.os == cc.sys.OS_IOS){\r\n            jsb.reflection.callStaticMethod(\"VoiceSDK\", \"prepareRecord:\",filename);\r\n        }\r\n    },\r\n    \r\n    release:function(){\r\n        if(!cc.sys.isNative){\r\n            return;\r\n        }\r\n        cc.vv.audioMgr.resumeAll();\r\n        if(cc.sys.os == cc.sys.OS_ANDROID){\r\n            jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"release\", \"()V\");\r\n        }\r\n        else if(cc.sys.os == cc.sys.OS_IOS){\r\n            jsb.reflection.callStaticMethod(\"VoiceSDK\", \"finishRecord\");\r\n        }\r\n    },\r\n    \r\n    cancel:function(){\r\n        if(!cc.sys.isNative){\r\n            return;\r\n        }\r\n        cc.vv.audioMgr.resumeAll();\r\n        if(cc.sys.os == cc.sys.OS_ANDROID){\r\n            jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"cancel\", \"()V\");\r\n        }\r\n        else if(cc.sys.os == cc.sys.OS_IOS){\r\n            jsb.reflection.callStaticMethod(\"VoiceSDK\", \"cancelRecord\");\r\n        }\r\n    },\r\n\r\n    writeVoice:function(filename,voiceData){\r\n        if(!cc.sys.isNative){\r\n            return;\r\n        }\r\n        if(voiceData && voiceData.length > 0){\r\n            var fileData = decode(voiceData);\r\n            var url = this._voiceMediaPath + filename;\r\n            this.clearCache(filename);\r\n            jsb.fileUtils.writeDataToFile(fileData,url); \r\n        }\r\n    },\r\n    \r\n    clearCache:function(filename){\r\n        if(cc.sys.isNative){\r\n            var url = this._voiceMediaPath + filename;\r\n            //console.log(\"check file:\" + url);\r\n            if(jsb.fileUtils.isFileExist(url)){\r\n                //console.log(\"remove:\" + url);\r\n                jsb.fileUtils.removeFile(url);\r\n            }\r\n            if(jsb.fileUtils.isFileExist(url + \".wav\")){\r\n                //console.log(\"remove:\" + url + \".wav\");\r\n                jsb.fileUtils.removeFile(url + \".wav\");\r\n            }   \r\n        }\r\n    },\r\n    \r\n    play:function(filename){\r\n        if(!cc.sys.isNative){\r\n            return;\r\n        }\r\n        cc.vv.audioMgr.pauseAll();\r\n        if(cc.sys.os == cc.sys.OS_ANDROID){\r\n            jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoicePlayer\", \"play\", \"(Ljava/lang/String;)V\",filename); \r\n        }\r\n        else if(cc.sys.os == cc.sys.OS_IOS){\r\n            jsb.reflection.callStaticMethod(\"VoiceSDK\", \"play:\",filename);\r\n        }\r\n        else{\r\n        }\r\n    },\r\n    \r\n    stop:function(){\r\n        if(!cc.sys.isNative){\r\n            return;\r\n        }\r\n        cc.vv.audioMgr.resumeAll();\r\n        if(cc.sys.os == cc.sys.OS_ANDROID){\r\n            jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoicePlayer\", \"stop\", \"()V\"); \r\n        }\r\n        else if(cc.sys.os == cc.sys.OS_IOS){\r\n            jsb.reflection.callStaticMethod(\"VoiceSDK\", \"stopPlay\");\r\n        }\r\n        else{\r\n        }\r\n    },\r\n    \r\n    getVoiceLevel:function(maxLevel){\r\n        return Math.floor(Math.random() * maxLevel + 1);\r\n        if(cc.sys.os == cc.sys.OS_ANDROID){ \r\n            return jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"getVoiceLevel\", \"(I)I\",maxLevel);\r\n        }\r\n        else if(cc.sys.os == cc.sys.OS_IOS){\r\n        }\r\n        else{\r\n            return Math.floor(Math.random() * maxLevel + 1);\r\n        }\r\n    },\r\n    \r\n    getVoiceData:function(filename){\r\n        if(cc.sys.isNative){\r\n            var url = this._voiceMediaPath + filename;\r\n            console.log(\"getVoiceData:\" + url);\r\n            var fileData = jsb.fileUtils.getDataFromFile(url);\r\n            if(fileData){\r\n                var content = encode(fileData);\r\n                return content;\r\n            }\r\n        }\r\n        return \"\";\r\n    },\r\n    \r\n    download:function(){\r\n        \r\n    },\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n    \r\n    setStorageDir:function(dir){\r\n        if(!cc.sys.isNative){\r\n            return;\r\n        }\r\n        if(cc.sys.os == cc.sys.OS_ANDROID){ \r\n            jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"setStorageDir\", \"(Ljava/lang/String;)V\",dir);    \r\n        }\r\n        else if(cc.sys.os == cc.sys.OS_IOS){\r\n            jsb.reflection.callStaticMethod(\"VoiceSDK\", \"setStorageDir:\",dir);\r\n            if(!jsb.fileUtils.isDirectoryExist(dir)){\r\n                jsb.fileUtils.createDirectory(dir);\r\n            }\r\n        }\r\n    }\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _lastTouchTime:null,\r\n        _voice:null,\r\n        _volume:null,\r\n        _voice_failed:null,\r\n        _lastCheckTime:-1,\r\n        _timeBar:null,\r\n        MAX_TIME:15000,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        \r\n        this._voice = cc.find(\"Canvas/voice\");\r\n        this._voice.active = false;\r\n        \r\n        this._voice_failed = cc.find(\"Canvas/voice/voice_failed\");\r\n        this._voice_failed.active = false;\r\n        \r\n        this._timeBar = cc.find(\"Canvas/voice/time\");\r\n        this._timeBar.scaleX = 0.0;\r\n        \r\n        this._volume = cc.find(\"Canvas/voice/volume\");\r\n        for(var i = 1; i < this._volume.children.length; ++i){\r\n            this._volume.children[i].active = false;\r\n        }\r\n        \r\n        var btnVoice = cc.find(\"Canvas/voice/voice_failed/btn_ok\");\r\n        if(btnVoice){\r\n            cc.vv.utils.addClickEvent(btnVoice,this.node,\"Voice\",\"onBtnOKClicked\");\r\n        }\r\n        \r\n        var self = this;\r\n        var btnVoice = cc.find(\"Canvas/btn_voice\");\r\n        if(btnVoice){\r\n            btnVoice.on(cc.Node.EventType.TOUCH_START,function(){\r\n                console.log(\"cc.Node.EventType.TOUCH_START\");\r\n                cc.vv.voiceMgr.prepare(\"record.amr\");\r\n                self._lastTouchTime = Date.now();\r\n                self._voice.active = true;\r\n                self._voice_failed.active = false;\r\n            });\r\n\r\n            btnVoice.on(cc.Node.EventType.TOUCH_MOVE,function(){\r\n                console.log(\"cc.Node.EventType.TOUCH_MOVE\");\r\n            });\r\n                        \r\n            btnVoice.on(cc.Node.EventType.TOUCH_END,function(){\r\n                console.log(\"cc.Node.EventType.TOUCH_END\");\r\n                if(Date.now() - self._lastTouchTime < 1000){\r\n                    self._voice_failed.active = true;\r\n                    cc.vv.voiceMgr.cancel();\r\n                }\r\n                else{\r\n                    self.onVoiceOK();\r\n                }\r\n                self._lastTouchTime = null;\r\n            });\r\n            \r\n            btnVoice.on(cc.Node.EventType.TOUCH_CANCEL,function(){\r\n                console.log(\"cc.Node.EventType.TOUCH_CANCEL\");\r\n                cc.vv.voiceMgr.cancel();\r\n                self._lastTouchTime = null;\r\n                self._voice.active = false;\r\n            });\r\n        }\r\n    },\r\n    \r\n    onVoiceOK:function(){\r\n        if(this._lastTouchTime != null){\r\n            cc.vv.voiceMgr.release();\r\n            var time = Date.now() - this._lastTouchTime;\r\n            var msg = cc.vv.voiceMgr.getVoiceData(\"record.amr\");\r\n            cc.vv.net.send(\"voice_msg\",{msg:msg,time:time});\r\n        }\r\n        this._voice.active = false;\r\n    },\r\n    \r\n    onBtnOKClicked:function(){\r\n        this._voice.active = false;\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        if(this._voice.active == true && this._voice_failed.active == false){\r\n            if(Date.now() - this._lastCheckTime > 300){\r\n                for(var i = 0; i < this._volume.children.length; ++i){\r\n                    this._volume.children[i].active = false;\r\n                }\r\n                var v = cc.vv.voiceMgr.getVoiceLevel(7);\r\n                if(v >= 1 && v <= 7){\r\n                    this._volume.children[v-1].active = true;   \r\n                }\r\n                this._lastCheckTime = Date.now();\r\n            }\r\n        }\r\n        \r\n        if(this._lastTouchTime){\r\n            var time = Date.now() - this._lastTouchTime;\r\n            if(time >= this.MAX_TIME){\r\n                this.onVoiceOK();\r\n                this._lastTouchTime = null;\r\n            }\r\n            else{\r\n                var percent = time / this.MAX_TIME;\r\n                this._timeBar.scaleX = 1 - percent;\r\n            }\r\n        }\r\n    },\r\n});\r\n","cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        target:cc.Node,\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _isShow:false,\r\n        lblContent:cc.Label,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return null;\r\n        }\r\n        \r\n        cc.vv.wc = this;\r\n        this.node.active = this._isShow;\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        this.target.rotation = this.target.rotation - dt*45;\r\n    },\r\n    \r\n    show:function(content){\r\n        this._isShow = true;\r\n        if(this.node){\r\n            this.node.active = this._isShow;   \r\n        }\r\n        if(this.lblContent){\r\n            if(content == null){\r\n                content = \"\";\r\n            }\r\n            this.lblContent.string = content;\r\n        }\r\n    },\r\n    hide:function(){\r\n        this._isShow = false;\r\n        if(this.node){\r\n            this.node.active = this._isShow;   \r\n        }\r\n    }\r\n});\r\n","if (!CC_JSB && !cc.sys.isNative) {\n\t(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.io = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\n\tmodule.exports =  _dereq_('./lib/');\n\n\t},{\"./lib/\":2}],2:[function(_dereq_,module,exports){\n\n\tmodule.exports = _dereq_('./socket');\n\n\t/**\n\t * Exports parser\n\t *\n\t * @api public\n\t *\n\t */\n\tmodule.exports.parser = _dereq_('engine.io-parser');\n\n\t},{\"./socket\":3,\"engine.io-parser\":19}],3:[function(_dereq_,module,exports){\n\t(function (global){\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar transports = _dereq_('./transports');\n\tvar Emitter = _dereq_('component-emitter');\n\tvar debug = _dereq_('debug')('engine.io-client:socket');\n\tvar index = _dereq_('indexof');\n\tvar parser = _dereq_('engine.io-parser');\n\tvar parseuri = _dereq_('parseuri');\n\tvar parsejson = _dereq_('parsejson');\n\tvar parseqs = _dereq_('parseqs');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = Socket;\n\n\t/**\n\t * Noop function.\n\t *\n\t * @api private\n\t */\n\n\tfunction noop(){}\n\n\t/**\n\t * Socket constructor.\n\t *\n\t * @param {String|Object} uri or options\n\t * @param {Object} options\n\t * @api public\n\t */\n\n\tfunction Socket(uri, opts){\n\t  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n\t  opts = opts || {};\n\n\t  if (uri && 'object' == typeof uri) {\n\t\topts = uri;\n\t\turi = null;\n\t  }\n\n\t  if (uri) {\n\t\turi = parseuri(uri);\n\t\topts.hostname = uri.host;\n\t\topts.secure = uri.protocol == 'https' || uri.protocol == 'wss';\n\t\topts.port = uri.port;\n\t\tif (uri.query) opts.query = uri.query;\n\t  } else if (opts.host) {\n\t\topts.hostname = parseuri(opts.host).host;\n\t  }\n\n\t  this.secure = null != opts.secure ? opts.secure :\n\t\t(global.location && 'https:' == location.protocol);\n\n\t  if (opts.hostname && !opts.port) {\n\t\t// if no port is specified manually, use the protocol default\n\t\topts.port = this.secure ? '443' : '80';\n\t  }\n\n\t  this.agent = opts.agent || false;\n\t  this.hostname = opts.hostname ||\n\t\t(global.location ? location.hostname : 'localhost');\n\t  this.port = opts.port || (global.location && location.port ?\n\t\t   location.port :\n\t\t   (this.secure ? 443 : 80));\n\t  this.query = opts.query || {};\n\t  if ('string' == typeof this.query) this.query = parseqs.decode(this.query);\n\t  this.upgrade = false !== opts.upgrade;\n\t  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n\t  this.forceJSONP = !!opts.forceJSONP;\n\t  this.jsonp = false !== opts.jsonp;\n\t  this.forceBase64 = !!opts.forceBase64;\n\t  this.enablesXDR = !!opts.enablesXDR;\n\t  this.timestampParam = opts.timestampParam || 't';\n\t  this.timestampRequests = opts.timestampRequests;\n\t  this.transports = opts.transports || ['polling', 'websocket'];\n\t  this.readyState = '';\n\t  this.writeBuffer = [];\n\t  this.policyPort = opts.policyPort || 843;\n\t  this.rememberUpgrade = opts.rememberUpgrade || false;\n\t  this.binaryType = null;\n\t  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n\t  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n\t  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n\t  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n\t\tthis.perMessageDeflate.threshold = 1024;\n\t  }\n\n\t  // SSL options for Node.js client\n\t  this.pfx = opts.pfx || null;\n\t  this.key = opts.key || null;\n\t  this.passphrase = opts.passphrase || null;\n\t  this.cert = opts.cert || null;\n\t  this.ca = opts.ca || null;\n\t  this.ciphers = opts.ciphers || null;\n\t  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n\n\t  // other options for Node.js client\n\t  var freeGlobal = typeof global == 'object' && global;\n\t  if (freeGlobal.global === freeGlobal) {\n\t\tif (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n\t\t  this.extraHeaders = opts.extraHeaders;\n\t\t}\n\t  }\n\n\t  this.open();\n\t}\n\n\tSocket.priorWebsocketSuccess = false;\n\n\t/**\n\t * Mix in `Emitter`.\n\t */\n\n\tEmitter(Socket.prototype);\n\n\t/**\n\t * Protocol version.\n\t *\n\t * @api public\n\t */\n\n\tSocket.protocol = parser.protocol; // this is an int\n\n\t/**\n\t * Expose deps for legacy compatibility\n\t * and standalone browser access.\n\t */\n\n\tSocket.Socket = Socket;\n\tSocket.Transport = _dereq_('./transport');\n\tSocket.transports = _dereq_('./transports');\n\tSocket.parser = _dereq_('engine.io-parser');\n\n\t/**\n\t * Creates transport of the given type.\n\t *\n\t * @param {String} transport name\n\t * @return {Transport}\n\t * @api private\n\t */\n\n\tSocket.prototype.createTransport = function (name) {\n\t  debug('creating transport \"%s\"', name);\n\t  var query = clone(this.query);\n\n\t  // append engine.io protocol identifier\n\t  query.EIO = parser.protocol;\n\n\t  // transport name\n\t  query.transport = name;\n\n\t  // session id if we already have one\n\t  if (this.id) query.sid = this.id;\n\n\t  var transport = new transports[name]({\n\t\tagent: this.agent,\n\t\thostname: this.hostname,\n\t\tport: this.port,\n\t\tsecure: this.secure,\n\t\tpath: this.path,\n\t\tquery: query,\n\t\tforceJSONP: this.forceJSONP,\n\t\tjsonp: this.jsonp,\n\t\tforceBase64: this.forceBase64,\n\t\tenablesXDR: this.enablesXDR,\n\t\ttimestampRequests: this.timestampRequests,\n\t\ttimestampParam: this.timestampParam,\n\t\tpolicyPort: this.policyPort,\n\t\tsocket: this,\n\t\tpfx: this.pfx,\n\t\tkey: this.key,\n\t\tpassphrase: this.passphrase,\n\t\tcert: this.cert,\n\t\tca: this.ca,\n\t\tciphers: this.ciphers,\n\t\trejectUnauthorized: this.rejectUnauthorized,\n\t\tperMessageDeflate: this.perMessageDeflate,\n\t\textraHeaders: this.extraHeaders\n\t  });\n\n\t  return transport;\n\t};\n\n\tfunction clone (obj) {\n\t  var o = {};\n\t  for (var i in obj) {\n\t\tif (obj.hasOwnProperty(i)) {\n\t\t  o[i] = obj[i];\n\t\t}\n\t  }\n\t  return o;\n\t}\n\n\t/**\n\t * Initializes transport to use and starts probe.\n\t *\n\t * @api private\n\t */\n\tSocket.prototype.open = function () {\n\t  var transport;\n\t  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') != -1) {\n\t\ttransport = 'websocket';\n\t  } else if (0 === this.transports.length) {\n\t\t// Emit error on next tick so it can be listened to\n\t\tvar self = this;\n\t\tsetTimeout(function() {\n\t\t  self.emit('error', 'No transports available');\n\t\t}, 0);\n\t\treturn;\n\t  } else {\n\t\ttransport = this.transports[0];\n\t  }\n\t  this.readyState = 'opening';\n\n\t  // Retry with the next transport if the transport is disabled (jsonp: false)\n\t  try {\n\t\ttransport = this.createTransport(transport);\n\t  } catch (e) {\n\t\tthis.transports.shift();\n\t\tthis.open();\n\t\treturn;\n\t  }\n\n\t  transport.open();\n\t  this.setTransport(transport);\n\t};\n\n\t/**\n\t * Sets the current transport. Disables the existing one (if any).\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.setTransport = function(transport){\n\t  debug('setting transport %s', transport.name);\n\t  var self = this;\n\n\t  if (this.transport) {\n\t\tdebug('clearing existing transport %s', this.transport.name);\n\t\tthis.transport.removeAllListeners();\n\t  }\n\n\t  // set up transport\n\t  this.transport = transport;\n\n\t  // set up transport listeners\n\t  transport\n\t  .on('drain', function(){\n\t\tself.onDrain();\n\t  })\n\t  .on('packet', function(packet){\n\t\tself.onPacket(packet);\n\t  })\n\t  .on('error', function(e){\n\t\tself.onError(e);\n\t  })\n\t  .on('close', function(){\n\t\tself.onClose('transport close');\n\t  });\n\t};\n\n\t/**\n\t * Probes a transport.\n\t *\n\t * @param {String} transport name\n\t * @api private\n\t */\n\n\tSocket.prototype.probe = function (name) {\n\t  debug('probing transport \"%s\"', name);\n\t  var transport = this.createTransport(name, { probe: 1 })\n\t\t, failed = false\n\t\t, self = this;\n\n\t  Socket.priorWebsocketSuccess = false;\n\n\t  function onTransportOpen(){\n\t\tif (self.onlyBinaryUpgrades) {\n\t\t  var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n\t\t  failed = failed || upgradeLosesBinary;\n\t\t}\n\t\tif (failed) return;\n\n\t\tdebug('probe transport \"%s\" opened', name);\n\t\ttransport.send([{ type: 'ping', data: 'probe' }]);\n\t\ttransport.once('packet', function (msg) {\n\t\t  if (failed) return;\n\t\t  if ('pong' == msg.type && 'probe' == msg.data) {\n\t\t\tdebug('probe transport \"%s\" pong', name);\n\t\t\tself.upgrading = true;\n\t\t\tself.emit('upgrading', transport);\n\t\t\tif (!transport) return;\n\t\t\tSocket.priorWebsocketSuccess = 'websocket' == transport.name;\n\n\t\t\tdebug('pausing current transport \"%s\"', self.transport.name);\n\t\t\tself.transport.pause(function () {\n\t\t\t  if (failed) return;\n\t\t\t  if ('closed' == self.readyState) return;\n\t\t\t  debug('changing transport and sending upgrade packet');\n\n\t\t\t  cleanup();\n\n\t\t\t  self.setTransport(transport);\n\t\t\t  transport.send([{ type: 'upgrade' }]);\n\t\t\t  self.emit('upgrade', transport);\n\t\t\t  transport = null;\n\t\t\t  self.upgrading = false;\n\t\t\t  self.flush();\n\t\t\t});\n\t\t  } else {\n\t\t\tdebug('probe transport \"%s\" failed', name);\n\t\t\tvar err = new Error('probe error');\n\t\t\terr.transport = transport.name;\n\t\t\tself.emit('upgradeError', err);\n\t\t  }\n\t\t});\n\t  }\n\n\t  function freezeTransport() {\n\t\tif (failed) return;\n\n\t\t// Any callback called by transport should be ignored since now\n\t\tfailed = true;\n\n\t\tcleanup();\n\n\t\ttransport.close();\n\t\ttransport = null;\n\t  }\n\n\t  //Handle any error that happens while probing\n\t  function onerror(err) {\n\t\tvar error = new Error('probe error: ' + err);\n\t\terror.transport = transport.name;\n\n\t\tfreezeTransport();\n\n\t\tdebug('probe transport \"%s\" failed because of error: %s', name, err);\n\n\t\tself.emit('upgradeError', error);\n\t  }\n\n\t  function onTransportClose(){\n\t\tonerror(\"transport closed\");\n\t  }\n\n\t  //When the socket is closed while we're probing\n\t  function onclose(){\n\t\tonerror(\"socket closed\");\n\t  }\n\n\t  //When the socket is upgraded while we're probing\n\t  function onupgrade(to){\n\t\tif (transport && to.name != transport.name) {\n\t\t  debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n\t\t  freezeTransport();\n\t\t}\n\t  }\n\n\t  //Remove all listeners on the transport and on self\n\t  function cleanup(){\n\t\ttransport.removeListener('open', onTransportOpen);\n\t\ttransport.removeListener('error', onerror);\n\t\ttransport.removeListener('close', onTransportClose);\n\t\tself.removeListener('close', onclose);\n\t\tself.removeListener('upgrading', onupgrade);\n\t  }\n\n\t  transport.once('open', onTransportOpen);\n\t  transport.once('error', onerror);\n\t  transport.once('close', onTransportClose);\n\n\t  this.once('close', onclose);\n\t  this.once('upgrading', onupgrade);\n\n\t  transport.open();\n\n\t};\n\n\t/**\n\t * Called when connection is deemed open.\n\t *\n\t * @api public\n\t */\n\n\tSocket.prototype.onOpen = function () {\n\t  debug('socket open');\n\t  this.readyState = 'open';\n\t  Socket.priorWebsocketSuccess = 'websocket' == this.transport.name;\n\t  this.emit('open');\n\t  this.flush();\n\n\t  // we check for `readyState` in case an `open`\n\t  // listener already closed the socket\n\t  if ('open' == this.readyState && this.upgrade && this.transport.pause) {\n\t\tdebug('starting upgrade probes');\n\t\tfor (var i = 0, l = this.upgrades.length; i < l; i++) {\n\t\t  this.probe(this.upgrades[i]);\n\t\t}\n\t  }\n\t};\n\n\t/**\n\t * Handles a packet.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.onPacket = function (packet) {\n\t  if ('opening' == this.readyState || 'open' == this.readyState) {\n\t\tdebug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n\t\tthis.emit('packet', packet);\n\n\t\t// Socket is live - any packet counts\n\t\tthis.emit('heartbeat');\n\n\t\tswitch (packet.type) {\n\t\t  case 'open':\n\t\t\tthis.onHandshake(parsejson(packet.data));\n\t\t\tbreak;\n\n\t\t  case 'pong':\n\t\t\tthis.setPing();\n\t\t\tthis.emit('pong');\n\t\t\tbreak;\n\n\t\t  case 'error':\n\t\t\tvar err = new Error('server error');\n\t\t\terr.code = packet.data;\n\t\t\tthis.onError(err);\n\t\t\tbreak;\n\n\t\t  case 'message':\n\t\t\tthis.emit('data', packet.data);\n\t\t\tthis.emit('message', packet.data);\n\t\t\tbreak;\n\t\t}\n\t  } else {\n\t\tdebug('packet received with socket readyState \"%s\"', this.readyState);\n\t  }\n\t};\n\n\t/**\n\t * Called upon handshake completion.\n\t *\n\t * @param {Object} handshake obj\n\t * @api private\n\t */\n\n\tSocket.prototype.onHandshake = function (data) {\n\t  this.emit('handshake', data);\n\t  this.id = data.sid;\n\t  this.transport.query.sid = data.sid;\n\t  this.upgrades = this.filterUpgrades(data.upgrades);\n\t  this.pingInterval = data.pingInterval;\n\t  this.pingTimeout = data.pingTimeout;\n\t  this.onOpen();\n\t  // In case open handler closes socket\n\t  if  ('closed' == this.readyState) return;\n\t  this.setPing();\n\n\t  // Prolong liveness of socket on heartbeat\n\t  this.removeListener('heartbeat', this.onHeartbeat);\n\t  this.on('heartbeat', this.onHeartbeat);\n\t};\n\n\t/**\n\t * Resets ping timeout.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.onHeartbeat = function (timeout) {\n\t  clearTimeout(this.pingTimeoutTimer);\n\t  var self = this;\n\t  self.pingTimeoutTimer = setTimeout(function () {\n\t\tif ('closed' == self.readyState) return;\n\t\tself.onClose('ping timeout');\n\t  }, timeout || (self.pingInterval + self.pingTimeout));\n\t};\n\n\t/**\n\t * Pings server every `this.pingInterval` and expects response\n\t * within `this.pingTimeout` or closes connection.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.setPing = function () {\n\t  var self = this;\n\t  clearTimeout(self.pingIntervalTimer);\n\t  self.pingIntervalTimer = setTimeout(function () {\n\t\tdebug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n\t\tself.ping();\n\t\tself.onHeartbeat(self.pingTimeout);\n\t  }, self.pingInterval);\n\t};\n\n\t/**\n\t* Sends a ping packet.\n\t*\n\t* @api private\n\t*/\n\n\tSocket.prototype.ping = function () {\n\t  var self = this;\n\t  this.sendPacket('ping', function(){\n\t\tself.emit('ping');\n\t  });\n\t};\n\n\t/**\n\t * Called on `drain` event\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.onDrain = function() {\n\t  this.writeBuffer.splice(0, this.prevBufferLen);\n\n\t  // setting prevBufferLen = 0 is very important\n\t  // for example, when upgrading, upgrade packet is sent over,\n\t  // and a nonzero prevBufferLen could cause problems on `drain`\n\t  this.prevBufferLen = 0;\n\n\t  if (0 === this.writeBuffer.length) {\n\t\tthis.emit('drain');\n\t  } else {\n\t\tthis.flush();\n\t  }\n\t};\n\n\t/**\n\t * Flush write buffers.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.flush = function () {\n\t  if ('closed' != this.readyState && this.transport.writable &&\n\t\t!this.upgrading && this.writeBuffer.length) {\n\t\tdebug('flushing %d packets in socket', this.writeBuffer.length);\n\t\tthis.transport.send(this.writeBuffer);\n\t\t// keep track of current length of writeBuffer\n\t\t// splice writeBuffer and callbackBuffer on `drain`\n\t\tthis.prevBufferLen = this.writeBuffer.length;\n\t\tthis.emit('flush');\n\t  }\n\t};\n\n\t/**\n\t * Sends a message.\n\t *\n\t * @param {String} message.\n\t * @param {Function} callback function.\n\t * @param {Object} options.\n\t * @return {Socket} for chaining.\n\t * @api public\n\t */\n\n\tSocket.prototype.write =\n\tSocket.prototype.send = function (msg, options, fn) {\n\t  this.sendPacket('message', msg, options, fn);\n\t  return this;\n\t};\n\n\t/**\n\t * Sends a packet.\n\t *\n\t * @param {String} packet type.\n\t * @param {String} data.\n\t * @param {Object} options.\n\t * @param {Function} callback function.\n\t * @api private\n\t */\n\n\tSocket.prototype.sendPacket = function (type, data, options, fn) {\n\t  if('function' == typeof data) {\n\t\tfn = data;\n\t\tdata = undefined;\n\t  }\n\n\t  if ('function' == typeof options) {\n\t\tfn = options;\n\t\toptions = null;\n\t  }\n\n\t  if ('closing' == this.readyState || 'closed' == this.readyState) {\n\t\treturn;\n\t  }\n\n\t  options = options || {};\n\t  options.compress = false !== options.compress;\n\n\t  var packet = {\n\t\ttype: type,\n\t\tdata: data,\n\t\toptions: options\n\t  };\n\t  this.emit('packetCreate', packet);\n\t  this.writeBuffer.push(packet);\n\t  if (fn) this.once('flush', fn);\n\t  this.flush();\n\t};\n\n\t/**\n\t * Closes the connection.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.close = function () {\n\t  if ('opening' == this.readyState || 'open' == this.readyState) {\n\t\tthis.readyState = 'closing';\n\n\t\tvar self = this;\n\n\t\tif (this.writeBuffer.length) {\n\t\t  this.once('drain', function() {\n\t\t\tif (this.upgrading) {\n\t\t\t  waitForUpgrade();\n\t\t\t} else {\n\t\t\t  close();\n\t\t\t}\n\t\t  });\n\t\t} else if (this.upgrading) {\n\t\t  waitForUpgrade();\n\t\t} else {\n\t\t  close();\n\t\t}\n\t  }\n\n\t  function close() {\n\t\tself.onClose('forced close');\n\t\tdebug('socket closing - telling transport to close');\n\t\tself.transport.close();\n\t  }\n\n\t  function cleanupAndClose() {\n\t\tself.removeListener('upgrade', cleanupAndClose);\n\t\tself.removeListener('upgradeError', cleanupAndClose);\n\t\tclose();\n\t  }\n\n\t  function waitForUpgrade() {\n\t\t// wait for upgrade to finish since we can't send packets while pausing a transport\n\t\tself.once('upgrade', cleanupAndClose);\n\t\tself.once('upgradeError', cleanupAndClose);\n\t  }\n\n\t  return this;\n\t};\n\n\t/**\n\t * Called upon transport error\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.onError = function (err) {\n\t  debug('socket error %j', err);\n\t  Socket.priorWebsocketSuccess = false;\n\t  this.emit('error', err);\n\t  this.onClose('transport error', err);\n\t};\n\n\t/**\n\t * Called upon transport close.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.onClose = function (reason, desc) {\n\t  if ('opening' == this.readyState || 'open' == this.readyState || 'closing' == this.readyState) {\n\t\tdebug('socket close with reason: \"%s\"', reason);\n\t\tvar self = this;\n\n\t\t// clear timers\n\t\tclearTimeout(this.pingIntervalTimer);\n\t\tclearTimeout(this.pingTimeoutTimer);\n\n\t\t// stop event from firing again for transport\n\t\tthis.transport.removeAllListeners('close');\n\n\t\t// ensure transport won't stay open\n\t\tthis.transport.close();\n\n\t\t// ignore further transport communication\n\t\tthis.transport.removeAllListeners();\n\n\t\t// set ready state\n\t\tthis.readyState = 'closed';\n\n\t\t// clear session id\n\t\tthis.id = null;\n\n\t\t// emit close event\n\t\tthis.emit('close', reason, desc);\n\n\t\t// clean buffers after, so users can still\n\t\t// grab the buffers on `close` event\n\t\tself.writeBuffer = [];\n\t\tself.prevBufferLen = 0;\n\t  }\n\t};\n\n\t/**\n\t * Filters upgrades, returning only those matching client transports.\n\t *\n\t * @param {Array} server upgrades\n\t * @api private\n\t *\n\t */\n\n\tSocket.prototype.filterUpgrades = function (upgrades) {\n\t  var filteredUpgrades = [];\n\t  for (var i = 0, j = upgrades.length; i<j; i++) {\n\t\tif (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n\t  }\n\t  return filteredUpgrades;\n\t};\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"./transport\":4,\"./transports\":5,\"component-emitter\":15,\"debug\":17,\"engine.io-parser\":19,\"indexof\":23,\"parsejson\":26,\"parseqs\":27,\"parseuri\":28}],4:[function(_dereq_,module,exports){\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar parser = _dereq_('engine.io-parser');\n\tvar Emitter = _dereq_('component-emitter');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = Transport;\n\n\t/**\n\t * Transport abstract constructor.\n\t *\n\t * @param {Object} options.\n\t * @api private\n\t */\n\n\tfunction Transport (opts) {\n\t  this.path = opts.path;\n\t  this.hostname = opts.hostname;\n\t  this.port = opts.port;\n\t  this.secure = opts.secure;\n\t  this.query = opts.query;\n\t  this.timestampParam = opts.timestampParam;\n\t  this.timestampRequests = opts.timestampRequests;\n\t  this.readyState = '';\n\t  this.agent = opts.agent || false;\n\t  this.socket = opts.socket;\n\t  this.enablesXDR = opts.enablesXDR;\n\n\t  // SSL options for Node.js client\n\t  this.pfx = opts.pfx;\n\t  this.key = opts.key;\n\t  this.passphrase = opts.passphrase;\n\t  this.cert = opts.cert;\n\t  this.ca = opts.ca;\n\t  this.ciphers = opts.ciphers;\n\t  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n\t  // other options for Node.js client\n\t  this.extraHeaders = opts.extraHeaders;\n\t}\n\n\t/**\n\t * Mix in `Emitter`.\n\t */\n\n\tEmitter(Transport.prototype);\n\n\t/**\n\t * Emits an error.\n\t *\n\t * @param {String} str\n\t * @return {Transport} for chaining\n\t * @api public\n\t */\n\n\tTransport.prototype.onError = function (msg, desc) {\n\t  var err = new Error(msg);\n\t  err.type = 'TransportError';\n\t  err.description = desc;\n\t  this.emit('error', err);\n\t  return this;\n\t};\n\n\t/**\n\t * Opens the transport.\n\t *\n\t * @api public\n\t */\n\n\tTransport.prototype.open = function () {\n\t  if ('closed' == this.readyState || '' == this.readyState) {\n\t\tthis.readyState = 'opening';\n\t\tthis.doOpen();\n\t  }\n\n\t  return this;\n\t};\n\n\t/**\n\t * Closes the transport.\n\t *\n\t * @api private\n\t */\n\n\tTransport.prototype.close = function () {\n\t  if ('opening' == this.readyState || 'open' == this.readyState) {\n\t\tthis.doClose();\n\t\tthis.onClose();\n\t  }\n\n\t  return this;\n\t};\n\n\t/**\n\t * Sends multiple packets.\n\t *\n\t * @param {Array} packets\n\t * @api private\n\t */\n\n\tTransport.prototype.send = function(packets){\n\t  if ('open' == this.readyState) {\n\t\tthis.write(packets);\n\t  } else {\n\t\tthrow new Error('Transport not open');\n\t  }\n\t};\n\n\t/**\n\t * Called upon open\n\t *\n\t * @api private\n\t */\n\n\tTransport.prototype.onOpen = function () {\n\t  this.readyState = 'open';\n\t  this.writable = true;\n\t  this.emit('open');\n\t};\n\n\t/**\n\t * Called with data.\n\t *\n\t * @param {String} data\n\t * @api private\n\t */\n\n\tTransport.prototype.onData = function(data){\n\t  var packet = parser.decodePacket(data, this.socket.binaryType);\n\t  this.onPacket(packet);\n\t};\n\n\t/**\n\t * Called with a decoded packet.\n\t */\n\n\tTransport.prototype.onPacket = function (packet) {\n\t  this.emit('packet', packet);\n\t};\n\n\t/**\n\t * Called upon close.\n\t *\n\t * @api private\n\t */\n\n\tTransport.prototype.onClose = function () {\n\t  this.readyState = 'closed';\n\t  this.emit('close');\n\t};\n\n\t},{\"component-emitter\":15,\"engine.io-parser\":19}],5:[function(_dereq_,module,exports){\n\t(function (global){\n\t/**\n\t * Module dependencies\n\t */\n\n\tvar XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\n\tvar XHR = _dereq_('./polling-xhr');\n\tvar JSONP = _dereq_('./polling-jsonp');\n\tvar websocket = _dereq_('./websocket');\n\n\t/**\n\t * Export transports.\n\t */\n\n\texports.polling = polling;\n\texports.websocket = websocket;\n\n\t/**\n\t * Polling transport polymorphic constructor.\n\t * Decides on xhr vs jsonp based on feature detection.\n\t *\n\t * @api private\n\t */\n\n\tfunction polling(opts){\n\t  var xhr;\n\t  var xd = false;\n\t  var xs = false;\n\t  var jsonp = false !== opts.jsonp;\n\n\t  if (global.location) {\n\t\tvar isSSL = 'https:' == location.protocol;\n\t\tvar port = location.port;\n\n\t\t// some user agents have empty `location.port`\n\t\tif (!port) {\n\t\t  port = isSSL ? 443 : 80;\n\t\t}\n\n\t\txd = opts.hostname != location.hostname || port != opts.port;\n\t\txs = opts.secure != isSSL;\n\t  }\n\n\t  opts.xdomain = xd;\n\t  opts.xscheme = xs;\n\t  xhr = new XMLHttpRequest(opts);\n\n\t  if ('open' in xhr && !opts.forceJSONP) {\n\t\treturn new XHR(opts);\n\t  } else {\n\t\tif (!jsonp) throw new Error('JSONP disabled');\n\t\treturn new JSONP(opts);\n\t  }\n\t}\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"./polling-jsonp\":6,\"./polling-xhr\":7,\"./websocket\":9,\"xmlhttprequest-ssl\":10}],6:[function(_dereq_,module,exports){\n\t(function (global){\n\n\t/**\n\t * Module requirements.\n\t */\n\n\tvar Polling = _dereq_('./polling');\n\tvar inherit = _dereq_('component-inherit');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = JSONPPolling;\n\n\t/**\n\t * Cached regular expressions.\n\t */\n\n\tvar rNewline = /\\n/g;\n\tvar rEscapedNewline = /\\\\n/g;\n\n\t/**\n\t * Global JSONP callbacks.\n\t */\n\n\tvar callbacks;\n\n\t/**\n\t * Callbacks count.\n\t */\n\n\tvar index = 0;\n\n\t/**\n\t * Noop.\n\t */\n\n\tfunction empty () { }\n\n\t/**\n\t * JSONP Polling constructor.\n\t *\n\t * @param {Object} opts.\n\t * @api public\n\t */\n\n\tfunction JSONPPolling (opts) {\n\t  Polling.call(this, opts);\n\n\t  this.query = this.query || {};\n\n\t  // define global callbacks array if not present\n\t  // we do this here (lazily) to avoid unneeded global pollution\n\t  if (!callbacks) {\n\t\t// we need to consider multiple engines in the same page\n\t\tif (!global.___eio) global.___eio = [];\n\t\tcallbacks = global.___eio;\n\t  }\n\n\t  // callback identifier\n\t  this.index = callbacks.length;\n\n\t  // add callback to jsonp global\n\t  var self = this;\n\t  callbacks.push(function (msg) {\n\t\tself.onData(msg);\n\t  });\n\n\t  // append to query string\n\t  this.query.j = this.index;\n\n\t  // prevent spurious errors from being emitted when the window is unloaded\n\t  if (global.document && global.addEventListener) {\n\t\tglobal.addEventListener('beforeunload', function () {\n\t\t  if (self.script) self.script.onerror = empty;\n\t\t}, false);\n\t  }\n\t}\n\n\t/**\n\t * Inherits from Polling.\n\t */\n\n\tinherit(JSONPPolling, Polling);\n\n\t/*\n\t * JSONP only supports binary as base64 encoded strings\n\t */\n\n\tJSONPPolling.prototype.supportsBinary = false;\n\n\t/**\n\t * Closes the socket.\n\t *\n\t * @api private\n\t */\n\n\tJSONPPolling.prototype.doClose = function () {\n\t  if (this.script) {\n\t\tthis.script.parentNode.removeChild(this.script);\n\t\tthis.script = null;\n\t  }\n\n\t  if (this.form) {\n\t\tthis.form.parentNode.removeChild(this.form);\n\t\tthis.form = null;\n\t\tthis.iframe = null;\n\t  }\n\n\t  Polling.prototype.doClose.call(this);\n\t};\n\n\t/**\n\t * Starts a poll cycle.\n\t *\n\t * @api private\n\t */\n\n\tJSONPPolling.prototype.doPoll = function () {\n\t  var self = this;\n\t  var script = document.createElement('script');\n\n\t  if (this.script) {\n\t\tthis.script.parentNode.removeChild(this.script);\n\t\tthis.script = null;\n\t  }\n\n\t  script.async = true;\n\t  script.src = this.uri();\n\t  script.onerror = function(e){\n\t\tself.onError('jsonp poll error',e);\n\t  };\n\n\t  var insertAt = document.getElementsByTagName('script')[0];\n\t  if (insertAt) {\n\t\tinsertAt.parentNode.insertBefore(script, insertAt);\n\t  }\n\t  else {\n\t\t(document.head || document.body).appendChild(script);\n\t  }\n\t  this.script = script;\n\n\t  var isUAgecko = 'undefined' != typeof navigator && /gecko/i.test(navigator.userAgent);\n\t  \n\t  if (isUAgecko) {\n\t\tsetTimeout(function () {\n\t\t  var iframe = document.createElement('iframe');\n\t\t  document.body.appendChild(iframe);\n\t\t  document.body.removeChild(iframe);\n\t\t}, 100);\n\t  }\n\t};\n\n\t/**\n\t * Writes with a hidden iframe.\n\t *\n\t * @param {String} data to send\n\t * @param {Function} called upon flush.\n\t * @api private\n\t */\n\n\tJSONPPolling.prototype.doWrite = function (data, fn) {\n\t  var self = this;\n\n\t  if (!this.form) {\n\t\tvar form = document.createElement('form');\n\t\tvar area = document.createElement('textarea');\n\t\tvar id = this.iframeId = 'eio_iframe_' + this.index;\n\t\tvar iframe;\n\n\t\tform.className = 'socketio';\n\t\tform.style.position = 'absolute';\n\t\tform.style.top = '-1000px';\n\t\tform.style.left = '-1000px';\n\t\tform.target = id;\n\t\tform.method = 'POST';\n\t\tform.setAttribute('accept-charset', 'utf-8');\n\t\tarea.name = 'd';\n\t\tform.appendChild(area);\n\t\tdocument.body.appendChild(form);\n\n\t\tthis.form = form;\n\t\tthis.area = area;\n\t  }\n\n\t  this.form.action = this.uri();\n\n\t  function complete () {\n\t\tinitIframe();\n\t\tfn();\n\t  }\n\n\t  function initIframe () {\n\t\tif (self.iframe) {\n\t\t  try {\n\t\t\tself.form.removeChild(self.iframe);\n\t\t  } catch (e) {\n\t\t\tself.onError('jsonp polling iframe removal error', e);\n\t\t  }\n\t\t}\n\n\t\ttry {\n\t\t  // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n\t\t  var html = '<iframe src=\"javascript:0\" name=\"'+ self.iframeId +'\">';\n\t\t  iframe = document.createElement(html);\n\t\t} catch (e) {\n\t\t  iframe = document.createElement('iframe');\n\t\t  iframe.name = self.iframeId;\n\t\t  iframe.src = 'javascript:0';\n\t\t}\n\n\t\tiframe.id = self.iframeId;\n\n\t\tself.form.appendChild(iframe);\n\t\tself.iframe = iframe;\n\t  }\n\n\t  initIframe();\n\n\t  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n\t  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n\t  data = data.replace(rEscapedNewline, '\\\\\\n');\n\t  this.area.value = data.replace(rNewline, '\\\\n');\n\n\t  try {\n\t\tthis.form.submit();\n\t  } catch(e) {}\n\n\t  if (this.iframe.attachEvent) {\n\t\tthis.iframe.onreadystatechange = function(){\n\t\t  if (self.iframe.readyState == 'complete') {\n\t\t\tcomplete();\n\t\t  }\n\t\t};\n\t  } else {\n\t\tthis.iframe.onload = complete;\n\t  }\n\t};\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"./polling\":8,\"component-inherit\":16}],7:[function(_dereq_,module,exports){\n\t(function (global){\n\t/**\n\t * Module requirements.\n\t */\n\n\tvar XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\n\tvar Polling = _dereq_('./polling');\n\tvar Emitter = _dereq_('component-emitter');\n\tvar inherit = _dereq_('component-inherit');\n\tvar debug = _dereq_('debug')('engine.io-client:polling-xhr');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = XHR;\n\tmodule.exports.Request = Request;\n\n\t/**\n\t * Empty function\n\t */\n\n\tfunction empty(){}\n\n\t/**\n\t * XHR Polling constructor.\n\t *\n\t * @param {Object} opts\n\t * @api public\n\t */\n\n\tfunction XHR(opts){\n\t  Polling.call(this, opts);\n\n\t  if (global.location) {\n\t\tvar isSSL = 'https:' == location.protocol;\n\t\tvar port = location.port;\n\n\t\t// some user agents have empty `location.port`\n\t\tif (!port) {\n\t\t  port = isSSL ? 443 : 80;\n\t\t}\n\n\t\tthis.xd = opts.hostname != global.location.hostname ||\n\t\t  port != opts.port;\n\t\tthis.xs = opts.secure != isSSL;\n\t  } else {\n\t\tthis.extraHeaders = opts.extraHeaders;\n\t  }\n\t}\n\n\t/**\n\t * Inherits from Polling.\n\t */\n\n\tinherit(XHR, Polling);\n\n\t/**\n\t * XHR supports binary\n\t */\n\n\tXHR.prototype.supportsBinary = true;\n\n\t/**\n\t * Creates a request.\n\t *\n\t * @param {String} method\n\t * @api private\n\t */\n\n\tXHR.prototype.request = function(opts){\n\t  opts = opts || {};\n\t  opts.uri = this.uri();\n\t  opts.xd = this.xd;\n\t  opts.xs = this.xs;\n\t  opts.agent = this.agent || false;\n\t  opts.supportsBinary = this.supportsBinary;\n\t  opts.enablesXDR = this.enablesXDR;\n\n\t  // SSL options for Node.js client\n\t  opts.pfx = this.pfx;\n\t  opts.key = this.key;\n\t  opts.passphrase = this.passphrase;\n\t  opts.cert = this.cert;\n\t  opts.ca = this.ca;\n\t  opts.ciphers = this.ciphers;\n\t  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n\t  // other options for Node.js client\n\t  opts.extraHeaders = this.extraHeaders;\n\n\t  return new Request(opts);\n\t};\n\n\t/**\n\t * Sends data.\n\t *\n\t * @param {String} data to send.\n\t * @param {Function} called upon flush.\n\t * @api private\n\t */\n\n\tXHR.prototype.doWrite = function(data, fn){\n\t  var isBinary = typeof data !== 'string' && data !== undefined;\n\t  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n\t  var self = this;\n\t  req.on('success', fn);\n\t  req.on('error', function(err){\n\t\tself.onError('xhr post error', err);\n\t  });\n\t  this.sendXhr = req;\n\t};\n\n\t/**\n\t * Starts a poll cycle.\n\t *\n\t * @api private\n\t */\n\n\tXHR.prototype.doPoll = function(){\n\t  debug('xhr poll');\n\t  var req = this.request();\n\t  var self = this;\n\t  req.on('data', function(data){\n\t\tself.onData(data);\n\t  });\n\t  req.on('error', function(err){\n\t\tself.onError('xhr poll error', err);\n\t  });\n\t  this.pollXhr = req;\n\t};\n\n\t/**\n\t * Request constructor\n\t *\n\t * @param {Object} options\n\t * @api public\n\t */\n\n\tfunction Request(opts){\n\t  this.method = opts.method || 'GET';\n\t  this.uri = opts.uri;\n\t  this.xd = !!opts.xd;\n\t  this.xs = !!opts.xs;\n\t  this.async = false !== opts.async;\n\t  this.data = undefined != opts.data ? opts.data : null;\n\t  this.agent = opts.agent;\n\t  this.isBinary = opts.isBinary;\n\t  this.supportsBinary = opts.supportsBinary;\n\t  this.enablesXDR = opts.enablesXDR;\n\n\t  // SSL options for Node.js client\n\t  this.pfx = opts.pfx;\n\t  this.key = opts.key;\n\t  this.passphrase = opts.passphrase;\n\t  this.cert = opts.cert;\n\t  this.ca = opts.ca;\n\t  this.ciphers = opts.ciphers;\n\t  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n\t  // other options for Node.js client\n\t  this.extraHeaders = opts.extraHeaders;\n\n\t  this.create();\n\t}\n\n\t/**\n\t * Mix in `Emitter`.\n\t */\n\n\tEmitter(Request.prototype);\n\n\t/**\n\t * Creates the XHR object and sends the request.\n\t *\n\t * @api private\n\t */\n\n\tRequest.prototype.create = function(){\n\t  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n\t  // SSL options for Node.js client\n\t  opts.pfx = this.pfx;\n\t  opts.key = this.key;\n\t  opts.passphrase = this.passphrase;\n\t  opts.cert = this.cert;\n\t  opts.ca = this.ca;\n\t  opts.ciphers = this.ciphers;\n\t  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n\t  var xhr = this.xhr = new XMLHttpRequest(opts);\n\t  var self = this;\n\n\t  try {\n\t\tdebug('xhr open %s: %s', this.method, this.uri);\n\t\txhr.open(this.method, this.uri, this.async);\n\t\ttry {\n\t\t  if (this.extraHeaders) {\n\t\t\txhr.setDisableHeaderCheck(true);\n\t\t\tfor (var i in this.extraHeaders) {\n\t\t\t  if (this.extraHeaders.hasOwnProperty(i)) {\n\t\t\t\txhr.setRequestHeader(i, this.extraHeaders[i]);\n\t\t\t  }\n\t\t\t}\n\t\t  }\n\t\t} catch (e) {}\n\t\tif (this.supportsBinary) {\n\t\t  // This has to be done after open because Firefox is stupid\n\t\t  // http://stackoverflow.com/questions/13216903/get-binary-data-with-xmlhttprequest-in-a-firefox-extension\n\t\t  xhr.responseType = 'arraybuffer';\n\t\t}\n\n\t\tif ('POST' == this.method) {\n\t\t  try {\n\t\t\tif (this.isBinary) {\n\t\t\t  xhr.setRequestHeader('Content-type', 'application/octet-stream');\n\t\t\t} else {\n\t\t\t  xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n\t\t\t}\n\t\t  } catch (e) {}\n\t\t}\n\n\t\t// ie6 check\n\t\tif ('withCredentials' in xhr) {\n\t\t  xhr.withCredentials = true;\n\t\t}\n\n\t\tif (this.hasXDR()) {\n\t\t  xhr.onload = function(){\n\t\t\tself.onLoad();\n\t\t  };\n\t\t  xhr.onerror = function(){\n\t\t\tself.onError(xhr.responseText);\n\t\t  };\n\t\t} else {\n\t\t  xhr.onreadystatechange = function(){\n\t\t\tif (4 != xhr.readyState) return;\n\t\t\tif (200 == xhr.status || 1223 == xhr.status) {\n\t\t\t  self.onLoad();\n\t\t\t} else {\n\t\t\t  // make sure the `error` event handler that's user-set\n\t\t\t  // does not throw in the same tick and gets caught here\n\t\t\t  setTimeout(function(){\n\t\t\t\tself.onError(xhr.status);\n\t\t\t  }, 0);\n\t\t\t}\n\t\t  };\n\t\t}\n\n\t\tdebug('xhr data %s', this.data);\n\t\txhr.send(this.data);\n\t  } catch (e) {\n\t\t// Need to defer since .create() is called directly fhrom the constructor\n\t\t// and thus the 'error' event can only be only bound *after* this exception\n\t\t// occurs.  Therefore, also, we cannot throw here at all.\n\t\tsetTimeout(function() {\n\t\t  self.onError(e);\n\t\t}, 0);\n\t\treturn;\n\t  }\n\n\t  if (global.document) {\n\t\tthis.index = Request.requestsCount++;\n\t\tRequest.requests[this.index] = this;\n\t  }\n\t};\n\n\t/**\n\t * Called upon successful response.\n\t *\n\t * @api private\n\t */\n\n\tRequest.prototype.onSuccess = function(){\n\t  this.emit('success');\n\t  this.cleanup();\n\t};\n\n\t/**\n\t * Called if we have data.\n\t *\n\t * @api private\n\t */\n\n\tRequest.prototype.onData = function(data){\n\t  this.emit('data', data);\n\t  this.onSuccess();\n\t};\n\n\t/**\n\t * Called upon error.\n\t *\n\t * @api private\n\t */\n\n\tRequest.prototype.onError = function(err){\n\t  this.emit('error', err);\n\t  this.cleanup(true);\n\t};\n\n\t/**\n\t * Cleans up house.\n\t *\n\t * @api private\n\t */\n\n\tRequest.prototype.cleanup = function(fromError){\n\t  if ('undefined' == typeof this.xhr || null === this.xhr) {\n\t\treturn;\n\t  }\n\t  // xmlhttprequest\n\t  if (this.hasXDR()) {\n\t\tthis.xhr.onload = this.xhr.onerror = empty;\n\t  } else {\n\t\tthis.xhr.onreadystatechange = empty;\n\t  }\n\n\t  if (fromError) {\n\t\ttry {\n\t\t  this.xhr.abort();\n\t\t} catch(e) {}\n\t  }\n\n\t  if (global.document) {\n\t\tdelete Request.requests[this.index];\n\t  }\n\n\t  this.xhr = null;\n\t};\n\n\t/**\n\t * Called upon load.\n\t *\n\t * @api private\n\t */\n\n\tRequest.prototype.onLoad = function(){\n\t  var data;\n\t  try {\n\t\tvar contentType;\n\t\ttry {\n\t\t  contentType = this.xhr.getResponseHeader('Content-Type').split(';')[0];\n\t\t} catch (e) {}\n\t\tif (contentType === 'application/octet-stream') {\n\t\t  data = this.xhr.response;\n\t\t} else {\n\t\t  if (!this.supportsBinary) {\n\t\t\tdata = this.xhr.responseText;\n\t\t  } else {\n\t\t\ttry {\n\t\t\t  data = String.fromCharCode.apply(null, new Uint8Array(this.xhr.response));\n\t\t\t} catch (e) {\n\t\t\t  var ui8Arr = new Uint8Array(this.xhr.response);\n\t\t\t  var dataArray = [];\n\t\t\t  for (var idx = 0, length = ui8Arr.length; idx < length; idx++) {\n\t\t\t\tdataArray.push(ui8Arr[idx]);\n\t\t\t  }\n\n\t\t\t  data = String.fromCharCode.apply(null, dataArray);\n\t\t\t}\n\t\t  }\n\t\t}\n\t  } catch (e) {\n\t\tthis.onError(e);\n\t  }\n\t  if (null != data) {\n\t\tthis.onData(data);\n\t  }\n\t};\n\n\t/**\n\t * Check if it has XDomainRequest.\n\t *\n\t * @api private\n\t */\n\n\tRequest.prototype.hasXDR = function(){\n\t  return 'undefined' !== typeof global.XDomainRequest && !this.xs && this.enablesXDR;\n\t};\n\n\t/**\n\t * Aborts the request.\n\t *\n\t * @api public\n\t */\n\n\tRequest.prototype.abort = function(){\n\t  this.cleanup();\n\t};\n\n\t/**\n\t * Aborts pending requests when unloading the window. This is needed to prevent\n\t * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n\t * emitted.\n\t */\n\n\tif (global.document) {\n\t  Request.requestsCount = 0;\n\t  Request.requests = {};\n\t  if (global.attachEvent) {\n\t\tglobal.attachEvent('onunload', unloadHandler);\n\t  } else if (global.addEventListener) {\n\t\tglobal.addEventListener('beforeunload', unloadHandler, false);\n\t  }\n\t}\n\n\tfunction unloadHandler() {\n\t  for (var i in Request.requests) {\n\t\tif (Request.requests.hasOwnProperty(i)) {\n\t\t  Request.requests[i].abort();\n\t\t}\n\t  }\n\t}\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"./polling\":8,\"component-emitter\":15,\"component-inherit\":16,\"debug\":17,\"xmlhttprequest-ssl\":10}],8:[function(_dereq_,module,exports){\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar Transport = _dereq_('../transport');\n\tvar parseqs = _dereq_('parseqs');\n\tvar parser = _dereq_('engine.io-parser');\n\tvar inherit = _dereq_('component-inherit');\n\tvar yeast = _dereq_('yeast');\n\tvar debug = _dereq_('debug')('engine.io-client:polling');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = Polling;\n\n\t/**\n\t * Is XHR2 supported?\n\t */\n\n\tvar hasXHR2 = (function() {\n\t  var XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\n\t  var xhr = new XMLHttpRequest({ xdomain: false });\n\t  return null != xhr.responseType;\n\t})();\n\n\t/**\n\t * Polling interface.\n\t *\n\t * @param {Object} opts\n\t * @api private\n\t */\n\n\tfunction Polling(opts){\n\t  var forceBase64 = (opts && opts.forceBase64);\n\t  if (!hasXHR2 || forceBase64) {\n\t\tthis.supportsBinary = false;\n\t  }\n\t  Transport.call(this, opts);\n\t}\n\n\t/**\n\t * Inherits from Transport.\n\t */\n\n\tinherit(Polling, Transport);\n\n\t/**\n\t * Transport name.\n\t */\n\n\tPolling.prototype.name = 'polling';\n\n\t/**\n\t * Opens the socket (triggers polling). We write a PING message to determine\n\t * when the transport is open.\n\t *\n\t * @api private\n\t */\n\n\tPolling.prototype.doOpen = function(){\n\t  this.poll();\n\t};\n\n\t/**\n\t * Pauses polling.\n\t *\n\t * @param {Function} callback upon buffers are flushed and transport is paused\n\t * @api private\n\t */\n\n\tPolling.prototype.pause = function(onPause){\n\t  var pending = 0;\n\t  var self = this;\n\n\t  this.readyState = 'pausing';\n\n\t  function pause(){\n\t\tdebug('paused');\n\t\tself.readyState = 'paused';\n\t\tonPause();\n\t  }\n\n\t  if (this.polling || !this.writable) {\n\t\tvar total = 0;\n\n\t\tif (this.polling) {\n\t\t  debug('we are currently polling - waiting to pause');\n\t\t  total++;\n\t\t  this.once('pollComplete', function(){\n\t\t\tdebug('pre-pause polling complete');\n\t\t\t--total || pause();\n\t\t  });\n\t\t}\n\n\t\tif (!this.writable) {\n\t\t  debug('we are currently writing - waiting to pause');\n\t\t  total++;\n\t\t  this.once('drain', function(){\n\t\t\tdebug('pre-pause writing complete');\n\t\t\t--total || pause();\n\t\t  });\n\t\t}\n\t  } else {\n\t\tpause();\n\t  }\n\t};\n\n\t/**\n\t * Starts polling cycle.\n\t *\n\t * @api public\n\t */\n\n\tPolling.prototype.poll = function(){\n\t  debug('polling');\n\t  this.polling = true;\n\t  this.doPoll();\n\t  this.emit('poll');\n\t};\n\n\t/**\n\t * Overloads onData to detect payloads.\n\t *\n\t * @api private\n\t */\n\n\tPolling.prototype.onData = function(data){\n\t  var self = this;\n\t  debug('polling got data %s', data);\n\t  var callback = function(packet, index, total) {\n\t\t// if its the first message we consider the transport open\n\t\tif ('opening' == self.readyState) {\n\t\t  self.onOpen();\n\t\t}\n\n\t\t// if its a close packet, we close the ongoing requests\n\t\tif ('close' == packet.type) {\n\t\t  self.onClose();\n\t\t  return false;\n\t\t}\n\n\t\t// otherwise bypass onData and handle the message\n\t\tself.onPacket(packet);\n\t  };\n\n\t  // decode payload\n\t  parser.decodePayload(data, this.socket.binaryType, callback);\n\n\t  // if an event did not trigger closing\n\t  if ('closed' != this.readyState) {\n\t\t// if we got data we're not polling\n\t\tthis.polling = false;\n\t\tthis.emit('pollComplete');\n\n\t\tif ('open' == this.readyState) {\n\t\t  this.poll();\n\t\t} else {\n\t\t  debug('ignoring poll - transport state \"%s\"', this.readyState);\n\t\t}\n\t  }\n\t};\n\n\t/**\n\t * For polling, send a close packet.\n\t *\n\t * @api private\n\t */\n\n\tPolling.prototype.doClose = function(){\n\t  var self = this;\n\n\t  function close(){\n\t\tdebug('writing close packet');\n\t\tself.write([{ type: 'close' }]);\n\t  }\n\n\t  if ('open' == this.readyState) {\n\t\tdebug('transport open - closing');\n\t\tclose();\n\t  } else {\n\t\t// in case we're trying to close while\n\t\t// handshaking is in progress (GH-164)\n\t\tdebug('transport not open - deferring close');\n\t\tthis.once('open', close);\n\t  }\n\t};\n\n\t/**\n\t * Writes a packets payload.\n\t *\n\t * @param {Array} data packets\n\t * @param {Function} drain callback\n\t * @api private\n\t */\n\n\tPolling.prototype.write = function(packets){\n\t  var self = this;\n\t  this.writable = false;\n\t  var callbackfn = function() {\n\t\tself.writable = true;\n\t\tself.emit('drain');\n\t  };\n\n\t  var self = this;\n\t  parser.encodePayload(packets, this.supportsBinary, function(data) {\n\t\tself.doWrite(data, callbackfn);\n\t  });\n\t};\n\n\t/**\n\t * Generates uri for connection.\n\t *\n\t * @api private\n\t */\n\n\tPolling.prototype.uri = function(){\n\t  var query = this.query || {};\n\t  var schema = this.secure ? 'https' : 'http';\n\t  var port = '';\n\n\t  // cache busting is forced\n\t  if (false !== this.timestampRequests) {\n\t\tquery[this.timestampParam] = yeast();\n\t  }\n\n\t  if (!this.supportsBinary && !query.sid) {\n\t\tquery.b64 = 1;\n\t  }\n\n\t  query = parseqs.encode(query);\n\n\t  // avoid port if default for schema\n\t  if (this.port && (('https' == schema && this.port != 443) ||\n\t\t ('http' == schema && this.port != 80))) {\n\t\tport = ':' + this.port;\n\t  }\n\n\t  // prepend ? to query\n\t  if (query.length) {\n\t\tquery = '?' + query;\n\t  }\n\n\t  var ipv6 = this.hostname.indexOf(':') !== -1;\n\t  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n\t};\n\n\t},{\"../transport\":4,\"component-inherit\":16,\"debug\":17,\"engine.io-parser\":19,\"parseqs\":27,\"xmlhttprequest-ssl\":10,\"yeast\":30}],9:[function(_dereq_,module,exports){\n\t(function (global){\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar Transport = _dereq_('../transport');\n\tvar parser = _dereq_('engine.io-parser');\n\tvar parseqs = _dereq_('parseqs');\n\tvar inherit = _dereq_('component-inherit');\n\tvar yeast = _dereq_('yeast');\n\tvar debug = _dereq_('debug')('engine.io-client:websocket');\n\tvar BrowserWebSocket = global.WebSocket || global.MozWebSocket;\n\n\t/**\n\t * Get either the `WebSocket` or `MozWebSocket` globals\n\t * in the browser or try to resolve WebSocket-compatible\n\t * interface exposed by `ws` for Node-like environment.\n\t */\n\n\tvar WebSocket = BrowserWebSocket;\n\tif (!WebSocket && typeof window === 'undefined') {\n\t  try {\n\t\tWebSocket = _dereq_('ws');\n\t  } catch (e) { }\n\t}\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = WS;\n\n\t/**\n\t * WebSocket transport constructor.\n\t *\n\t * @api {Object} connection options\n\t * @api public\n\t */\n\n\tfunction WS(opts){\n\t  var forceBase64 = (opts && opts.forceBase64);\n\t  if (forceBase64) {\n\t\tthis.supportsBinary = false;\n\t  }\n\t  this.perMessageDeflate = opts.perMessageDeflate;\n\t  Transport.call(this, opts);\n\t}\n\n\t/**\n\t * Inherits from Transport.\n\t */\n\n\tinherit(WS, Transport);\n\n\t/**\n\t * Transport name.\n\t *\n\t * @api public\n\t */\n\n\tWS.prototype.name = 'websocket';\n\n\t/*\n\t * WebSockets support binary\n\t */\n\n\tWS.prototype.supportsBinary = true;\n\n\t/**\n\t * Opens socket.\n\t *\n\t * @api private\n\t */\n\n\tWS.prototype.doOpen = function(){\n\t  if (!this.check()) {\n\t\t// let probe timeout\n\t\treturn;\n\t  }\n\n\t  var self = this;\n\t  var uri = this.uri();\n\t  var protocols = void(0);\n\t  var opts = {\n\t\tagent: this.agent,\n\t\tperMessageDeflate: this.perMessageDeflate\n\t  };\n\n\t  // SSL options for Node.js client\n\t  opts.pfx = this.pfx;\n\t  opts.key = this.key;\n\t  opts.passphrase = this.passphrase;\n\t  opts.cert = this.cert;\n\t  opts.ca = this.ca;\n\t  opts.ciphers = this.ciphers;\n\t  opts.rejectUnauthorized = this.rejectUnauthorized;\n\t  if (this.extraHeaders) {\n\t\topts.headers = this.extraHeaders;\n\t  }\n\n\t  this.ws = BrowserWebSocket ? new WebSocket(uri) : new WebSocket(uri, protocols, opts);\n\n\t  if (this.ws.binaryType === undefined) {\n\t\tthis.supportsBinary = false;\n\t  }\n\n\t  if (this.ws.supports && this.ws.supports.binary) {\n\t\tthis.supportsBinary = true;\n\t\tthis.ws.binaryType = 'buffer';\n\t  } else {\n\t\tthis.ws.binaryType = 'arraybuffer';\n\t  }\n\n\t  this.addEventListeners();\n\t};\n\n\t/**\n\t * Adds event listeners to the socket\n\t *\n\t * @api private\n\t */\n\n\tWS.prototype.addEventListeners = function(){\n\t  var self = this;\n\n\t  this.ws.onopen = function(){\n\t\tself.onOpen();\n\t  };\n\t  this.ws.onclose = function(){\n\t\tself.onClose();\n\t  };\n\t  this.ws.onmessage = function(ev){\n\t\tself.onData(ev.data);\n\t  };\n\t  this.ws.onerror = function(e){\n\t\tself.onError('websocket error', e);\n\t  };\n\t};\n\n\t/**\n\t * Override `onData` to use a timer on iOS.\n\t * See: https://gist.github.com/mloughran/2052006\n\t *\n\t * @api private\n\t */\n\n\tif ('undefined' != typeof navigator\n\t  && /iPad|iPhone|iPod/i.test(navigator.userAgent)) {\n\t  WS.prototype.onData = function(data){\n\t\tvar self = this;\n\t\tsetTimeout(function(){\n\t\t  Transport.prototype.onData.call(self, data);\n\t\t}, 0);\n\t  };\n\t}\n\n\t/**\n\t * Writes data to socket.\n\t *\n\t * @param {Array} array of packets.\n\t * @api private\n\t */\n\n\tWS.prototype.write = function(packets){\n\t  var self = this;\n\t  this.writable = false;\n\n\t  // encodePacket efficient as it uses WS framing\n\t  // no need for encodePayload\n\t  var total = packets.length;\n\t  for (var i = 0, l = total; i < l; i++) {\n\t\t(function(packet) {\n\t\t  parser.encodePacket(packet, self.supportsBinary, function(data) {\n\t\t\tif (!BrowserWebSocket) {\n\t\t\t  // always create a new object (GH-437)\n\t\t\t  var opts = {};\n\t\t\t  if (packet.options) {\n\t\t\t\topts.compress = packet.options.compress;\n\t\t\t  }\n\n\t\t\t  if (self.perMessageDeflate) {\n\t\t\t\tvar len = 'string' == typeof data ? global.Buffer.byteLength(data) : data.length;\n\t\t\t\tif (len < self.perMessageDeflate.threshold) {\n\t\t\t\t  opts.compress = false;\n\t\t\t\t}\n\t\t\t  }\n\t\t\t}\n\n\t\t\t//Sometimes the websocket has already been closed but the browser didn't\n\t\t\t//have a chance of informing us about it yet, in that case send will\n\t\t\t//throw an error\n\t\t\ttry {\n\t\t\t  if (BrowserWebSocket) {\n\t\t\t\t// TypeError is thrown when passing the second argument on Safari\n\t\t\t\tself.ws.send(data);\n\t\t\t  } else {\n\t\t\t\tself.ws.send(data, opts);\n\t\t\t  }\n\t\t\t} catch (e){\n\t\t\t  debug('websocket closed before onclose event');\n\t\t\t}\n\n\t\t\t--total || done();\n\t\t  });\n\t\t})(packets[i]);\n\t  }\n\n\t  function done(){\n\t\tself.emit('flush');\n\n\t\t// fake drain\n\t\t// defer to next tick to allow Socket to clear writeBuffer\n\t\tsetTimeout(function(){\n\t\t  self.writable = true;\n\t\t  self.emit('drain');\n\t\t}, 0);\n\t  }\n\t};\n\n\t/**\n\t * Called upon close\n\t *\n\t * @api private\n\t */\n\n\tWS.prototype.onClose = function(){\n\t  Transport.prototype.onClose.call(this);\n\t};\n\n\t/**\n\t * Closes socket.\n\t *\n\t * @api private\n\t */\n\n\tWS.prototype.doClose = function(){\n\t  if (typeof this.ws !== 'undefined') {\n\t\tthis.ws.close();\n\t  }\n\t};\n\n\t/**\n\t * Generates uri for connection.\n\t *\n\t * @api private\n\t */\n\n\tWS.prototype.uri = function(){\n\t  var query = this.query || {};\n\t  var schema = this.secure ? 'wss' : 'ws';\n\t  var port = '';\n\n\t  // avoid port if default for schema\n\t  if (this.port && (('wss' == schema && this.port != 443)\n\t\t|| ('ws' == schema && this.port != 80))) {\n\t\tport = ':' + this.port;\n\t  }\n\n\t  // append timestamp to URI\n\t  if (this.timestampRequests) {\n\t\tquery[this.timestampParam] = yeast();\n\t  }\n\n\t  // communicate binary support capabilities\n\t  if (!this.supportsBinary) {\n\t\tquery.b64 = 1;\n\t  }\n\n\t  query = parseqs.encode(query);\n\n\t  // prepend ? to query\n\t  if (query.length) {\n\t\tquery = '?' + query;\n\t  }\n\n\t  var ipv6 = this.hostname.indexOf(':') !== -1;\n\t  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n\t};\n\n\t/**\n\t * Feature detection for WebSocket.\n\t *\n\t * @return {Boolean} whether this transport is available.\n\t * @api public\n\t */\n\n\tWS.prototype.check = function(){\n\t  return !!WebSocket && !('__initialize' in WebSocket && this.name === WS.prototype.name);\n\t};\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"../transport\":4,\"component-inherit\":16,\"debug\":17,\"engine.io-parser\":19,\"parseqs\":27,\"ws\":undefined,\"yeast\":30}],10:[function(_dereq_,module,exports){\n\t// browser shim for xmlhttprequest module\n\tvar hasCORS = _dereq_('has-cors');\n\n\tmodule.exports = function(opts) {\n\t  var xdomain = opts.xdomain;\n\n\t  // scheme must be same when usign XDomainRequest\n\t  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n\t  var xscheme = opts.xscheme;\n\n\t  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n\t  // https://github.com/Automattic/engine.io-client/pull/217\n\t  var enablesXDR = opts.enablesXDR;\n\n\t  // XMLHttpRequest can be disabled on IE\n\t  try {\n\t\tif ('undefined' != typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n\t\t  return new XMLHttpRequest();\n\t\t}\n\t  } catch (e) { }\n\n\t  // Use XDomainRequest for IE8 if enablesXDR is true\n\t  // because loading bar keeps flashing when using jsonp-polling\n\t  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n\t  try {\n\t\tif ('undefined' != typeof XDomainRequest && !xscheme && enablesXDR) {\n\t\t  return new XDomainRequest();\n\t\t}\n\t  } catch (e) { }\n\n\t  if (!xdomain) {\n\t\ttry {\n\t\t  return new ActiveXObject('Microsoft.XMLHTTP');\n\t\t} catch(e) { }\n\t  }\n\t}\n\n\t},{\"has-cors\":22}],11:[function(_dereq_,module,exports){\n\tmodule.exports = after\n\n\tfunction after(count, callback, err_cb) {\n\t\tvar bail = false\n\t\terr_cb = err_cb || noop\n\t\tproxy.count = count\n\n\t\treturn (count === 0) ? callback() : proxy\n\n\t\tfunction proxy(err, result) {\n\t\t\tif (proxy.count <= 0) {\n\t\t\t\tthrow new Error('after called too many times')\n\t\t\t}\n\t\t\t--proxy.count\n\n\t\t\t// after first error, rest are passed to err_cb\n\t\t\tif (err) {\n\t\t\t\tbail = true\n\t\t\t\tcallback(err)\n\t\t\t\t// future error callbacks will go to error handler\n\t\t\t\tcallback = err_cb\n\t\t\t} else if (proxy.count === 0 && !bail) {\n\t\t\t\tcallback(null, result)\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction noop() {}\n\n\t},{}],12:[function(_dereq_,module,exports){\n\t/**\n\t * An abstraction for slicing an arraybuffer even when\n\t * ArrayBuffer.prototype.slice is not supported\n\t *\n\t * @api public\n\t */\n\n\tmodule.exports = function(arraybuffer, start, end) {\n\t  var bytes = arraybuffer.byteLength;\n\t  start = start || 0;\n\t  end = end || bytes;\n\n\t  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n\t  if (start < 0) { start += bytes; }\n\t  if (end < 0) { end += bytes; }\n\t  if (end > bytes) { end = bytes; }\n\n\t  if (start >= bytes || start >= end || bytes === 0) {\n\t\treturn new ArrayBuffer(0);\n\t  }\n\n\t  var abv = new Uint8Array(arraybuffer);\n\t  var result = new Uint8Array(end - start);\n\t  for (var i = start, ii = 0; i < end; i++, ii++) {\n\t\tresult[ii] = abv[i];\n\t  }\n\t  return result.buffer;\n\t};\n\n\t},{}],13:[function(_dereq_,module,exports){\n\t/*\n\t * base64-arraybuffer\n\t * https://github.com/niklasvh/base64-arraybuffer\n\t *\n\t * Copyright (c) 2012 Niklas von Hertzen\n\t * Licensed under the MIT license.\n\t */\n\t(function(chars){\n\t  \"use strict\";\n\n\t  exports.encode = function(arraybuffer) {\n\t\tvar bytes = new Uint8Array(arraybuffer),\n\t\ti, len = bytes.length, base64 = \"\";\n\n\t\tfor (i = 0; i < len; i+=3) {\n\t\t  base64 += chars[bytes[i] >> 2];\n\t\t  base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n\t\t  base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n\t\t  base64 += chars[bytes[i + 2] & 63];\n\t\t}\n\n\t\tif ((len % 3) === 2) {\n\t\t  base64 = base64.substring(0, base64.length - 1) + \"=\";\n\t\t} else if (len % 3 === 1) {\n\t\t  base64 = base64.substring(0, base64.length - 2) + \"==\";\n\t\t}\n\n\t\treturn base64;\n\t  };\n\n\t  exports.decode =  function(base64) {\n\t\tvar bufferLength = base64.length * 0.75,\n\t\tlen = base64.length, i, p = 0,\n\t\tencoded1, encoded2, encoded3, encoded4;\n\n\t\tif (base64[base64.length - 1] === \"=\") {\n\t\t  bufferLength--;\n\t\t  if (base64[base64.length - 2] === \"=\") {\n\t\t\tbufferLength--;\n\t\t  }\n\t\t}\n\n\t\tvar arraybuffer = new ArrayBuffer(bufferLength),\n\t\tbytes = new Uint8Array(arraybuffer);\n\n\t\tfor (i = 0; i < len; i+=4) {\n\t\t  encoded1 = chars.indexOf(base64[i]);\n\t\t  encoded2 = chars.indexOf(base64[i+1]);\n\t\t  encoded3 = chars.indexOf(base64[i+2]);\n\t\t  encoded4 = chars.indexOf(base64[i+3]);\n\n\t\t  bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n\t\t  bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n\t\t  bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n\t\t}\n\n\t\treturn arraybuffer;\n\t  };\n\t})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n\n\t},{}],14:[function(_dereq_,module,exports){\n\t(function (global){\n\t/**\n\t * Create a blob builder even when vendor prefixes exist\n\t */\n\n\tvar BlobBuilder = global.BlobBuilder\n\t  || global.WebKitBlobBuilder\n\t  || global.MSBlobBuilder\n\t  || global.MozBlobBuilder;\n\n\t/**\n\t * Check if Blob constructor is supported\n\t */\n\n\tvar blobSupported = (function() {\n\t  try {\n\t\tvar a = new Blob(['hi']);\n\t\treturn a.size === 2;\n\t  } catch(e) {\n\t\treturn false;\n\t  }\n\t})();\n\n\t/**\n\t * Check if Blob constructor supports ArrayBufferViews\n\t * Fails in Safari 6, so we need to map to ArrayBuffers there.\n\t */\n\n\tvar blobSupportsArrayBufferView = blobSupported && (function() {\n\t  try {\n\t\tvar b = new Blob([new Uint8Array([1,2])]);\n\t\treturn b.size === 2;\n\t  } catch(e) {\n\t\treturn false;\n\t  }\n\t})();\n\n\t/**\n\t * Check if BlobBuilder is supported\n\t */\n\n\tvar blobBuilderSupported = BlobBuilder\n\t  && BlobBuilder.prototype.append\n\t  && BlobBuilder.prototype.getBlob;\n\n\t/**\n\t * Helper function that maps ArrayBufferViews to ArrayBuffers\n\t * Used by BlobBuilder constructor and old browsers that didn't\n\t * support it in the Blob constructor.\n\t */\n\n\tfunction mapArrayBufferViews(ary) {\n\t  for (var i = 0; i < ary.length; i++) {\n\t\tvar chunk = ary[i];\n\t\tif (chunk.buffer instanceof ArrayBuffer) {\n\t\t  var buf = chunk.buffer;\n\n\t\t  // if this is a subarray, make a copy so we only\n\t\t  // include the subarray region from the underlying buffer\n\t\t  if (chunk.byteLength !== buf.byteLength) {\n\t\t\tvar copy = new Uint8Array(chunk.byteLength);\n\t\t\tcopy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\n\t\t\tbuf = copy.buffer;\n\t\t  }\n\n\t\t  ary[i] = buf;\n\t\t}\n\t  }\n\t}\n\n\tfunction BlobBuilderConstructor(ary, options) {\n\t  options = options || {};\n\n\t  var bb = new BlobBuilder();\n\t  mapArrayBufferViews(ary);\n\n\t  for (var i = 0; i < ary.length; i++) {\n\t\tbb.append(ary[i]);\n\t  }\n\n\t  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\n\t};\n\n\tfunction BlobConstructor(ary, options) {\n\t  mapArrayBufferViews(ary);\n\t  return new Blob(ary, options || {});\n\t};\n\n\tmodule.exports = (function() {\n\t  if (blobSupported) {\n\t\treturn blobSupportsArrayBufferView ? global.Blob : BlobConstructor;\n\t  } else if (blobBuilderSupported) {\n\t\treturn BlobBuilderConstructor;\n\t  } else {\n\t\treturn undefined;\n\t  }\n\t})();\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{}],15:[function(_dereq_,module,exports){\n\n\t/**\n\t * Expose `Emitter`.\n\t */\n\n\tmodule.exports = Emitter;\n\n\t/**\n\t * Initialize a new `Emitter`.\n\t *\n\t * @api public\n\t */\n\n\tfunction Emitter(obj) {\n\t  if (obj) return mixin(obj);\n\t};\n\n\t/**\n\t * Mixin the emitter properties.\n\t *\n\t * @param {Object} obj\n\t * @return {Object}\n\t * @api private\n\t */\n\n\tfunction mixin(obj) {\n\t  for (var key in Emitter.prototype) {\n\t\tobj[key] = Emitter.prototype[key];\n\t  }\n\t  return obj;\n\t}\n\n\t/**\n\t * Listen on the given `event` with `fn`.\n\t *\n\t * @param {String} event\n\t * @param {Function} fn\n\t * @return {Emitter}\n\t * @api public\n\t */\n\n\tEmitter.prototype.on =\n\tEmitter.prototype.addEventListener = function(event, fn){\n\t  this._callbacks = this._callbacks || {};\n\t  (this._callbacks[event] = this._callbacks[event] || [])\n\t\t.push(fn);\n\t  return this;\n\t};\n\n\t/**\n\t * Adds an `event` listener that will be invoked a single\n\t * time then automatically removed.\n\t *\n\t * @param {String} event\n\t * @param {Function} fn\n\t * @return {Emitter}\n\t * @api public\n\t */\n\n\tEmitter.prototype.once = function(event, fn){\n\t  var self = this;\n\t  this._callbacks = this._callbacks || {};\n\n\t  function on() {\n\t\tself.off(event, on);\n\t\tfn.apply(this, arguments);\n\t  }\n\n\t  on.fn = fn;\n\t  this.on(event, on);\n\t  return this;\n\t};\n\n\t/**\n\t * Remove the given callback for `event` or all\n\t * registered callbacks.\n\t *\n\t * @param {String} event\n\t * @param {Function} fn\n\t * @return {Emitter}\n\t * @api public\n\t */\n\n\tEmitter.prototype.off =\n\tEmitter.prototype.removeListener =\n\tEmitter.prototype.removeAllListeners =\n\tEmitter.prototype.removeEventListener = function(event, fn){\n\t  this._callbacks = this._callbacks || {};\n\n\t  // all\n\t  if (0 == arguments.length) {\n\t\tthis._callbacks = {};\n\t\treturn this;\n\t  }\n\n\t  // specific event\n\t  var callbacks = this._callbacks[event];\n\t  if (!callbacks) return this;\n\n\t  // remove all handlers\n\t  if (1 == arguments.length) {\n\t\tdelete this._callbacks[event];\n\t\treturn this;\n\t  }\n\n\t  // remove specific handler\n\t  var cb;\n\t  for (var i = 0; i < callbacks.length; i++) {\n\t\tcb = callbacks[i];\n\t\tif (cb === fn || cb.fn === fn) {\n\t\t  callbacks.splice(i, 1);\n\t\t  break;\n\t\t}\n\t  }\n\t  return this;\n\t};\n\n\t/**\n\t * Emit `event` with the given args.\n\t *\n\t * @param {String} event\n\t * @param {Mixed} ...\n\t * @return {Emitter}\n\t */\n\n\tEmitter.prototype.emit = function(event){\n\t  this._callbacks = this._callbacks || {};\n\t  var args = [].slice.call(arguments, 1)\n\t\t, callbacks = this._callbacks[event];\n\n\t  if (callbacks) {\n\t\tcallbacks = callbacks.slice(0);\n\t\tfor (var i = 0, len = callbacks.length; i < len; ++i) {\n\t\t  callbacks[i].apply(this, args);\n\t\t}\n\t  }\n\n\t  return this;\n\t};\n\n\t/**\n\t * Return array of callbacks for `event`.\n\t *\n\t * @param {String} event\n\t * @return {Array}\n\t * @api public\n\t */\n\n\tEmitter.prototype.listeners = function(event){\n\t  this._callbacks = this._callbacks || {};\n\t  return this._callbacks[event] || [];\n\t};\n\n\t/**\n\t * Check if this emitter has `event` handlers.\n\t *\n\t * @param {String} event\n\t * @return {Boolean}\n\t * @api public\n\t */\n\n\tEmitter.prototype.hasListeners = function(event){\n\t  return !! this.listeners(event).length;\n\t};\n\n\t},{}],16:[function(_dereq_,module,exports){\n\n\tmodule.exports = function(a, b){\n\t  var fn = function(){};\n\t  fn.prototype = b.prototype;\n\t  a.prototype = new fn;\n\t  a.prototype.constructor = a;\n\t};\n\t},{}],17:[function(_dereq_,module,exports){\n\n\t/**\n\t * This is the web browser implementation of `debug()`.\n\t *\n\t * Expose `debug()` as the module.\n\t */\n\n\texports = module.exports = _dereq_('./debug');\n\texports.log = log;\n\texports.formatArgs = formatArgs;\n\texports.save = save;\n\texports.load = load;\n\texports.useColors = useColors;\n\texports.storage = 'undefined' != typeof chrome\n\t\t\t\t   && 'undefined' != typeof chrome.storage\n\t\t\t\t\t  ? chrome.storage.local\n\t\t\t\t\t  : localstorage();\n\n\t/**\n\t * Colors.\n\t */\n\n\texports.colors = [\n\t  'lightseagreen',\n\t  'forestgreen',\n\t  'goldenrod',\n\t  'dodgerblue',\n\t  'darkorchid',\n\t  'crimson'\n\t];\n\n\t/**\n\t * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n\t * and the Firebug extension (any Firefox version) are known\n\t * to support \"%c\" CSS customizations.\n\t *\n\t * TODO: add a `localStorage` variable to explicitly enable/disable colors\n\t */\n\n\tfunction useColors() {\n\t  // is webkit? http://stackoverflow.com/a/16459606/376773\n\t  return ('WebkitAppearance' in document.documentElement.style) ||\n\t\t// is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(window.console && (console.firebug || (console.exception && console.table))) ||\n\t\t// is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31);\n\t}\n\n\t/**\n\t * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n\t */\n\n\texports.formatters.j = function(v) {\n\t  return JSON.stringify(v);\n\t};\n\n\n\t/**\n\t * Colorize log arguments if enabled.\n\t *\n\t * @api public\n\t */\n\n\tfunction formatArgs() {\n\t  var args = arguments;\n\t  var useColors = this.useColors;\n\n\t  args[0] = (useColors ? '%c' : '')\n\t\t+ this.namespace\n\t\t+ (useColors ? ' %c' : ' ')\n\t\t+ args[0]\n\t\t+ (useColors ? '%c ' : ' ')\n\t\t+ '+' + exports.humanize(this.diff);\n\n\t  if (!useColors) return args;\n\n\t  var c = 'color: ' + this.color;\n\t  args = [args[0], c, 'color: inherit'].concat(Array.prototype.slice.call(args, 1));\n\n\t  // the final \"%c\" is somewhat tricky, because there could be other\n\t  // arguments passed either before or after the %c, so we need to\n\t  // figure out the correct index to insert the CSS into\n\t  var index = 0;\n\t  var lastC = 0;\n\t  args[0].replace(/%[a-z%]/g, function(match) {\n\t\tif ('%%' === match) return;\n\t\tindex++;\n\t\tif ('%c' === match) {\n\t\t  // we only are interested in the *last* %c\n\t\t  // (the user may have provided their own)\n\t\t  lastC = index;\n\t\t}\n\t  });\n\n\t  args.splice(lastC, 0, c);\n\t  return args;\n\t}\n\n\t/**\n\t * Invokes `console.log()` when available.\n\t * No-op when `console.log` is not a \"function\".\n\t *\n\t * @api public\n\t */\n\n\tfunction log() {\n\t  // this hackery is required for IE8/9, where\n\t  // the `console.log` function doesn't have 'apply'\n\t  return 'object' === typeof console\n\t\t&& console.log\n\t\t&& Function.prototype.apply.call(console.log, console, arguments);\n\t}\n\n\t/**\n\t * Save `namespaces`.\n\t *\n\t * @param {String} namespaces\n\t * @api private\n\t */\n\n\tfunction save(namespaces) {\n\t  try {\n\t\tif (null == namespaces) {\n\t\t  exports.storage.removeItem('debug');\n\t\t} else {\n\t\t  exports.storage.debug = namespaces;\n\t\t}\n\t  } catch(e) {}\n\t}\n\n\t/**\n\t * Load `namespaces`.\n\t *\n\t * @return {String} returns the previously persisted debug modes\n\t * @api private\n\t */\n\n\tfunction load() {\n\t  var r;\n\t  try {\n\t\tr = exports.storage.debug;\n\t  } catch(e) {}\n\t  return r;\n\t}\n\n\t/**\n\t * Enable namespaces listed in `localStorage.debug` initially.\n\t */\n\n\texports.enable(load());\n\n\t/**\n\t * Localstorage attempts to return the localstorage.\n\t *\n\t * This is necessary because safari throws\n\t * when a user disables cookies/localstorage\n\t * and you attempt to access it.\n\t *\n\t * @return {LocalStorage}\n\t * @api private\n\t */\n\n\tfunction localstorage(){\n\t  try {\n\t\treturn window.localStorage;\n\t  } catch (e) {}\n\t}\n\n\t},{\"./debug\":18}],18:[function(_dereq_,module,exports){\n\n\t/**\n\t * This is the common logic for both the Node.js and web browser\n\t * implementations of `debug()`.\n\t *\n\t * Expose `debug()` as the module.\n\t */\n\n\texports = module.exports = debug;\n\texports.coerce = coerce;\n\texports.disable = disable;\n\texports.enable = enable;\n\texports.enabled = enabled;\n\texports.humanize = _dereq_('ms');\n\n\t/**\n\t * The currently active debug mode names, and names to skip.\n\t */\n\n\texports.names = [];\n\texports.skips = [];\n\n\t/**\n\t * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t *\n\t * Valid key names are a single, lowercased letter, i.e. \"n\".\n\t */\n\n\texports.formatters = {};\n\n\t/**\n\t * Previously assigned color.\n\t */\n\n\tvar prevColor = 0;\n\n\t/**\n\t * Previous log timestamp.\n\t */\n\n\tvar prevTime;\n\n\t/**\n\t * Select a color.\n\t *\n\t * @return {Number}\n\t * @api private\n\t */\n\n\tfunction selectColor() {\n\t  return exports.colors[prevColor++ % exports.colors.length];\n\t}\n\n\t/**\n\t * Create a debugger with the given `namespace`.\n\t *\n\t * @param {String} namespace\n\t * @return {Function}\n\t * @api public\n\t */\n\n\tfunction debug(namespace) {\n\n\t  // define the `disabled` version\n\t  function disabled() {\n\t  }\n\t  disabled.enabled = false;\n\n\t  // define the `enabled` version\n\t  function enabled() {\n\n\t\tvar self = enabled;\n\n\t\t// set `diff` timestamp\n\t\tvar curr = +new Date();\n\t\tvar ms = curr - (prevTime || curr);\n\t\tself.diff = ms;\n\t\tself.prev = prevTime;\n\t\tself.curr = curr;\n\t\tprevTime = curr;\n\n\t\t// add the `color` if not set\n\t\tif (null == self.useColors) self.useColors = exports.useColors();\n\t\tif (null == self.color && self.useColors) self.color = selectColor();\n\n\t\tvar args = Array.prototype.slice.call(arguments);\n\n\t\targs[0] = exports.coerce(args[0]);\n\n\t\tif ('string' !== typeof args[0]) {\n\t\t  // anything else let's inspect with %o\n\t\t  args = ['%o'].concat(args);\n\t\t}\n\n\t\t// apply any `formatters` transformations\n\t\tvar index = 0;\n\t\targs[0] = args[0].replace(/%([a-z%])/g, function(match, format) {\n\t\t  // if we encounter an escaped % then don't increase the array index\n\t\t  if (match === '%%') return match;\n\t\t  index++;\n\t\t  var formatter = exports.formatters[format];\n\t\t  if ('function' === typeof formatter) {\n\t\t\tvar val = args[index];\n\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t// now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\targs.splice(index, 1);\n\t\t\tindex--;\n\t\t  }\n\t\t  return match;\n\t\t});\n\n\t\tif ('function' === typeof exports.formatArgs) {\n\t\t  args = exports.formatArgs.apply(self, args);\n\t\t}\n\t\tvar logFn = enabled.log || exports.log || console.log.bind(console);\n\t\tlogFn.apply(self, args);\n\t  }\n\t  enabled.enabled = true;\n\n\t  var fn = exports.enabled(namespace) ? enabled : disabled;\n\n\t  fn.namespace = namespace;\n\n\t  return fn;\n\t}\n\n\t/**\n\t * Enables a debug mode by namespaces. This can include modes\n\t * separated by a colon and wildcards.\n\t *\n\t * @param {String} namespaces\n\t * @api public\n\t */\n\n\tfunction enable(namespaces) {\n\t  exports.save(namespaces);\n\n\t  var split = (namespaces || '').split(/[\\s,]+/);\n\t  var len = split.length;\n\n\t  for (var i = 0; i < len; i++) {\n\t\tif (!split[i]) continue; // ignore empty strings\n\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\t\tif (namespaces[0] === '-') {\n\t\t  exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t} else {\n\t\t  exports.names.push(new RegExp('^' + namespaces + '$'));\n\t\t}\n\t  }\n\t}\n\n\t/**\n\t * Disable debug output.\n\t *\n\t * @api public\n\t */\n\n\tfunction disable() {\n\t  exports.enable('');\n\t}\n\n\t/**\n\t * Returns true if the given mode name is enabled, false otherwise.\n\t *\n\t * @param {String} name\n\t * @return {Boolean}\n\t * @api public\n\t */\n\n\tfunction enabled(name) {\n\t  var i, len;\n\t  for (i = 0, len = exports.skips.length; i < len; i++) {\n\t\tif (exports.skips[i].test(name)) {\n\t\t  return false;\n\t\t}\n\t  }\n\t  for (i = 0, len = exports.names.length; i < len; i++) {\n\t\tif (exports.names[i].test(name)) {\n\t\t  return true;\n\t\t}\n\t  }\n\t  return false;\n\t}\n\n\t/**\n\t * Coerce `val`.\n\t *\n\t * @param {Mixed} val\n\t * @return {Mixed}\n\t * @api private\n\t */\n\n\tfunction coerce(val) {\n\t  if (val instanceof Error) return val.stack || val.message;\n\t  return val;\n\t}\n\n\t},{\"ms\":25}],19:[function(_dereq_,module,exports){\n\t(function (global){\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar keys = _dereq_('./keys');\n\tvar hasBinary = _dereq_('has-binary');\n\tvar sliceBuffer = _dereq_('arraybuffer.slice');\n\tvar base64encoder = _dereq_('base64-arraybuffer');\n\tvar after = _dereq_('after');\n\tvar utf8 = _dereq_('utf8');\n\n\t/**\n\t * Check if we are running an android browser. That requires us to use\n\t * ArrayBuffer with polling transports...\n\t *\n\t * http://ghinda.net/jpeg-blob-ajax-android/\n\t */\n\n\tvar isAndroid = navigator.userAgent.match(/Android/i);\n\n\t/**\n\t * Check if we are running in PhantomJS.\n\t * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n\t * https://github.com/ariya/phantomjs/issues/11395\n\t * @type boolean\n\t */\n\tvar isPhantomJS = /PhantomJS/i.test(navigator.userAgent);\n\n\t/**\n\t * When true, avoids using Blobs to encode payloads.\n\t * @type boolean\n\t */\n\tvar dontSendBlobs = isAndroid || isPhantomJS;\n\n\t/**\n\t * Current protocol version.\n\t */\n\n\texports.protocol = 3;\n\n\t/**\n\t * Packet types.\n\t */\n\n\tvar packets = exports.packets = {\n\t\topen:     0    // non-ws\n\t  , close:    1    // non-ws\n\t  , ping:     2\n\t  , pong:     3\n\t  , message:  4\n\t  , upgrade:  5\n\t  , noop:     6\n\t};\n\n\tvar packetslist = keys(packets);\n\n\t/**\n\t * Premade error packet.\n\t */\n\n\tvar err = { type: 'error', data: 'parser error' };\n\n\t/**\n\t * Create a blob api even for blob builder when vendor prefixes exist\n\t */\n\n\tvar Blob = _dereq_('blob');\n\n\t/**\n\t * Encodes a packet.\n\t *\n\t *     <packet type id> [ <data> ]\n\t *\n\t * Example:\n\t *\n\t *     5hello world\n\t *     3\n\t *     4\n\t *\n\t * Binary is encoded in an identical principle\n\t *\n\t * @api private\n\t */\n\n\texports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n\t  if ('function' == typeof supportsBinary) {\n\t\tcallback = supportsBinary;\n\t\tsupportsBinary = false;\n\t  }\n\n\t  if ('function' == typeof utf8encode) {\n\t\tcallback = utf8encode;\n\t\tutf8encode = null;\n\t  }\n\n\t  var data = (packet.data === undefined)\n\t\t? undefined\n\t\t: packet.data.buffer || packet.data;\n\n\t  if (global.ArrayBuffer && data instanceof ArrayBuffer) {\n\t\treturn encodeArrayBuffer(packet, supportsBinary, callback);\n\t  } else if (Blob && data instanceof global.Blob) {\n\t\treturn encodeBlob(packet, supportsBinary, callback);\n\t  }\n\n\t  // might be an object with { base64: true, data: dataAsBase64String }\n\t  if (data && data.base64) {\n\t\treturn encodeBase64Object(packet, callback);\n\t  }\n\n\t  // Sending data as a utf-8 string\n\t  var encoded = packets[packet.type];\n\n\t  // data fragment is optional\n\t  if (undefined !== packet.data) {\n\t\tencoded += utf8encode ? utf8.encode(String(packet.data)) : String(packet.data);\n\t  }\n\n\t  return callback('' + encoded);\n\n\t};\n\n\tfunction encodeBase64Object(packet, callback) {\n\t  // packet data is an object { base64: true, data: dataAsBase64String }\n\t  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n\t  return callback(message);\n\t}\n\n\t/**\n\t * Encode packet helpers for binary types\n\t */\n\n\tfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n\t  if (!supportsBinary) {\n\t\treturn exports.encodeBase64Packet(packet, callback);\n\t  }\n\n\t  var data = packet.data;\n\t  var contentArray = new Uint8Array(data);\n\t  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n\t  resultBuffer[0] = packets[packet.type];\n\t  for (var i = 0; i < contentArray.length; i++) {\n\t\tresultBuffer[i+1] = contentArray[i];\n\t  }\n\n\t  return callback(resultBuffer.buffer);\n\t}\n\n\tfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n\t  if (!supportsBinary) {\n\t\treturn exports.encodeBase64Packet(packet, callback);\n\t  }\n\n\t  var fr = new FileReader();\n\t  fr.onload = function() {\n\t\tpacket.data = fr.result;\n\t\texports.encodePacket(packet, supportsBinary, true, callback);\n\t  };\n\t  return fr.readAsArrayBuffer(packet.data);\n\t}\n\n\tfunction encodeBlob(packet, supportsBinary, callback) {\n\t  if (!supportsBinary) {\n\t\treturn exports.encodeBase64Packet(packet, callback);\n\t  }\n\n\t  if (dontSendBlobs) {\n\t\treturn encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n\t  }\n\n\t  var length = new Uint8Array(1);\n\t  length[0] = packets[packet.type];\n\t  var blob = new Blob([length.buffer, packet.data]);\n\n\t  return callback(blob);\n\t}\n\n\t/**\n\t * Encodes a packet with binary data in a base64 string\n\t *\n\t * @param {Object} packet, has `type` and `data`\n\t * @return {String} base64 encoded message\n\t */\n\n\texports.encodeBase64Packet = function(packet, callback) {\n\t  var message = 'b' + exports.packets[packet.type];\n\t  if (Blob && packet.data instanceof global.Blob) {\n\t\tvar fr = new FileReader();\n\t\tfr.onload = function() {\n\t\t  var b64 = fr.result.split(',')[1];\n\t\t  callback(message + b64);\n\t\t};\n\t\treturn fr.readAsDataURL(packet.data);\n\t  }\n\n\t  var b64data;\n\t  try {\n\t\tb64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n\t  } catch (e) {\n\t\t// iPhone Safari doesn't let you apply with typed arrays\n\t\tvar typed = new Uint8Array(packet.data);\n\t\tvar basic = new Array(typed.length);\n\t\tfor (var i = 0; i < typed.length; i++) {\n\t\t  basic[i] = typed[i];\n\t\t}\n\t\tb64data = String.fromCharCode.apply(null, basic);\n\t  }\n\t  message += global.btoa(b64data);\n\t  return callback(message);\n\t};\n\n\t/**\n\t * Decodes a packet. Changes format to Blob if requested.\n\t *\n\t * @return {Object} with `type` and `data` (if any)\n\t * @api private\n\t */\n\n\texports.decodePacket = function (data, binaryType, utf8decode) {\n\t  // String data\n\t  if (typeof data == 'string' || data === undefined) {\n\t\tif (data.charAt(0) == 'b') {\n\t\t  return exports.decodeBase64Packet(data.substr(1), binaryType);\n\t\t}\n\n\t\tif (utf8decode) {\n\t\t  try {\n\t\t\tdata = utf8.decode(data);\n\t\t  } catch (e) {\n\t\t\treturn err;\n\t\t  }\n\t\t}\n\t\tvar type = data.charAt(0);\n\n\t\tif (Number(type) != type || !packetslist[type]) {\n\t\t  return err;\n\t\t}\n\n\t\tif (data.length > 1) {\n\t\t  return { type: packetslist[type], data: data.substring(1) };\n\t\t} else {\n\t\t  return { type: packetslist[type] };\n\t\t}\n\t  }\n\n\t  var asArray = new Uint8Array(data);\n\t  var type = asArray[0];\n\t  var rest = sliceBuffer(data, 1);\n\t  if (Blob && binaryType === 'blob') {\n\t\trest = new Blob([rest]);\n\t  }\n\t  return { type: packetslist[type], data: rest };\n\t};\n\n\t/**\n\t * Decodes a packet encoded in a base64 string\n\t *\n\t * @param {String} base64 encoded message\n\t * @return {Object} with `type` and `data` (if any)\n\t */\n\n\texports.decodeBase64Packet = function(msg, binaryType) {\n\t  var type = packetslist[msg.charAt(0)];\n\t  if (!global.ArrayBuffer) {\n\t\treturn { type: type, data: { base64: true, data: msg.substr(1) } };\n\t  }\n\n\t  var data = base64encoder.decode(msg.substr(1));\n\n\t  if (binaryType === 'blob' && Blob) {\n\t\tdata = new Blob([data]);\n\t  }\n\n\t  return { type: type, data: data };\n\t};\n\n\t/**\n\t * Encodes multiple messages (payload).\n\t *\n\t *     <length>:data\n\t *\n\t * Example:\n\t *\n\t *     11:hello world2:hi\n\t *\n\t * If any contents are binary, they will be encoded as base64 strings. Base64\n\t * encoded strings are marked with a b before the length specifier\n\t *\n\t * @param {Array} packets\n\t * @api private\n\t */\n\n\texports.encodePayload = function (packets, supportsBinary, callback) {\n\t  if (typeof supportsBinary == 'function') {\n\t\tcallback = supportsBinary;\n\t\tsupportsBinary = null;\n\t  }\n\n\t  var isBinary = hasBinary(packets);\n\n\t  if (supportsBinary && isBinary) {\n\t\tif (Blob && !dontSendBlobs) {\n\t\t  return exports.encodePayloadAsBlob(packets, callback);\n\t\t}\n\n\t\treturn exports.encodePayloadAsArrayBuffer(packets, callback);\n\t  }\n\n\t  if (!packets.length) {\n\t\treturn callback('0:');\n\t  }\n\n\t  function setLengthHeader(message) {\n\t\treturn message.length + ':' + message;\n\t  }\n\n\t  function encodeOne(packet, doneCallback) {\n\t\texports.encodePacket(packet, !isBinary ? false : supportsBinary, true, function(message) {\n\t\t  doneCallback(null, setLengthHeader(message));\n\t\t});\n\t  }\n\n\t  map(packets, encodeOne, function(err, results) {\n\t\treturn callback(results.join(''));\n\t  });\n\t};\n\n\t/**\n\t * Async array map using after\n\t */\n\n\tfunction map(ary, each, done) {\n\t  var result = new Array(ary.length);\n\t  var next = after(ary.length, done);\n\n\t  var eachWithIndex = function(i, el, cb) {\n\t\teach(el, function(error, msg) {\n\t\t  result[i] = msg;\n\t\t  cb(error, result);\n\t\t});\n\t  };\n\n\t  for (var i = 0; i < ary.length; i++) {\n\t\teachWithIndex(i, ary[i], next);\n\t  }\n\t}\n\n\t/*\n\t * Decodes data when a payload is maybe expected. Possible binary contents are\n\t * decoded from their base64 representation\n\t *\n\t * @param {String} data, callback method\n\t * @api public\n\t */\n\n\texports.decodePayload = function (data, binaryType, callback) {\n\t  if (typeof data != 'string') {\n\t\treturn exports.decodePayloadAsBinary(data, binaryType, callback);\n\t  }\n\n\t  if (typeof binaryType === 'function') {\n\t\tcallback = binaryType;\n\t\tbinaryType = null;\n\t  }\n\n\t  var packet;\n\t  if (data == '') {\n\t\t// parser error - ignoring payload\n\t\treturn callback(err, 0, 1);\n\t  }\n\n\t  var length = ''\n\t\t, n, msg;\n\n\t  for (var i = 0, l = data.length; i < l; i++) {\n\t\tvar chr = data.charAt(i);\n\n\t\tif (':' != chr) {\n\t\t  length += chr;\n\t\t} else {\n\t\t  if ('' == length || (length != (n = Number(length)))) {\n\t\t\t// parser error - ignoring payload\n\t\t\treturn callback(err, 0, 1);\n\t\t  }\n\n\t\t  msg = data.substr(i + 1, n);\n\n\t\t  if (length != msg.length) {\n\t\t\t// parser error - ignoring payload\n\t\t\treturn callback(err, 0, 1);\n\t\t  }\n\n\t\t  if (msg.length) {\n\t\t\tpacket = exports.decodePacket(msg, binaryType, true);\n\n\t\t\tif (err.type == packet.type && err.data == packet.data) {\n\t\t\t  // parser error in individual packet - ignoring payload\n\t\t\t  return callback(err, 0, 1);\n\t\t\t}\n\n\t\t\tvar ret = callback(packet, i + n, l);\n\t\t\tif (false === ret) return;\n\t\t  }\n\n\t\t  // advance cursor\n\t\t  i += n;\n\t\t  length = '';\n\t\t}\n\t  }\n\n\t  if (length != '') {\n\t\t// parser error - ignoring payload\n\t\treturn callback(err, 0, 1);\n\t  }\n\n\t};\n\n\t/**\n\t * Encodes multiple messages (payload) as binary.\n\t *\n\t * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n\t * 255><data>\n\t *\n\t * Example:\n\t * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n\t *\n\t * @param {Array} packets\n\t * @return {ArrayBuffer} encoded payload\n\t * @api private\n\t */\n\n\texports.encodePayloadAsArrayBuffer = function(packets, callback) {\n\t  if (!packets.length) {\n\t\treturn callback(new ArrayBuffer(0));\n\t  }\n\n\t  function encodeOne(packet, doneCallback) {\n\t\texports.encodePacket(packet, true, true, function(data) {\n\t\t  return doneCallback(null, data);\n\t\t});\n\t  }\n\n\t  map(packets, encodeOne, function(err, encodedPackets) {\n\t\tvar totalLength = encodedPackets.reduce(function(acc, p) {\n\t\t  var len;\n\t\t  if (typeof p === 'string'){\n\t\t\tlen = p.length;\n\t\t  } else {\n\t\t\tlen = p.byteLength;\n\t\t  }\n\t\t  return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n\t\t}, 0);\n\n\t\tvar resultArray = new Uint8Array(totalLength);\n\n\t\tvar bufferIndex = 0;\n\t\tencodedPackets.forEach(function(p) {\n\t\t  var isString = typeof p === 'string';\n\t\t  var ab = p;\n\t\t  if (isString) {\n\t\t\tvar view = new Uint8Array(p.length);\n\t\t\tfor (var i = 0; i < p.length; i++) {\n\t\t\t  view[i] = p.charCodeAt(i);\n\t\t\t}\n\t\t\tab = view.buffer;\n\t\t  }\n\n\t\t  if (isString) { // not true binary\n\t\t\tresultArray[bufferIndex++] = 0;\n\t\t  } else { // true binary\n\t\t\tresultArray[bufferIndex++] = 1;\n\t\t  }\n\n\t\t  var lenStr = ab.byteLength.toString();\n\t\t  for (var i = 0; i < lenStr.length; i++) {\n\t\t\tresultArray[bufferIndex++] = parseInt(lenStr[i]);\n\t\t  }\n\t\t  resultArray[bufferIndex++] = 255;\n\n\t\t  var view = new Uint8Array(ab);\n\t\t  for (var i = 0; i < view.length; i++) {\n\t\t\tresultArray[bufferIndex++] = view[i];\n\t\t  }\n\t\t});\n\n\t\treturn callback(resultArray.buffer);\n\t  });\n\t};\n\n\t/**\n\t * Encode as Blob\n\t */\n\n\texports.encodePayloadAsBlob = function(packets, callback) {\n\t  function encodeOne(packet, doneCallback) {\n\t\texports.encodePacket(packet, true, true, function(encoded) {\n\t\t  var binaryIdentifier = new Uint8Array(1);\n\t\t  binaryIdentifier[0] = 1;\n\t\t  if (typeof encoded === 'string') {\n\t\t\tvar view = new Uint8Array(encoded.length);\n\t\t\tfor (var i = 0; i < encoded.length; i++) {\n\t\t\t  view[i] = encoded.charCodeAt(i);\n\t\t\t}\n\t\t\tencoded = view.buffer;\n\t\t\tbinaryIdentifier[0] = 0;\n\t\t  }\n\n\t\t  var len = (encoded instanceof ArrayBuffer)\n\t\t\t? encoded.byteLength\n\t\t\t: encoded.size;\n\n\t\t  var lenStr = len.toString();\n\t\t  var lengthAry = new Uint8Array(lenStr.length + 1);\n\t\t  for (var i = 0; i < lenStr.length; i++) {\n\t\t\tlengthAry[i] = parseInt(lenStr[i]);\n\t\t  }\n\t\t  lengthAry[lenStr.length] = 255;\n\n\t\t  if (Blob) {\n\t\t\tvar blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n\t\t\tdoneCallback(null, blob);\n\t\t  }\n\t\t});\n\t  }\n\n\t  map(packets, encodeOne, function(err, results) {\n\t\treturn callback(new Blob(results));\n\t  });\n\t};\n\n\t/*\n\t * Decodes data when a payload is maybe expected. Strings are decoded by\n\t * interpreting each byte as a key code for entries marked to start with 0. See\n\t * description of encodePayloadAsBinary\n\t *\n\t * @param {ArrayBuffer} data, callback method\n\t * @api public\n\t */\n\n\texports.decodePayloadAsBinary = function (data, binaryType, callback) {\n\t  if (typeof binaryType === 'function') {\n\t\tcallback = binaryType;\n\t\tbinaryType = null;\n\t  }\n\n\t  var bufferTail = data;\n\t  var buffers = [];\n\n\t  var numberTooLong = false;\n\t  while (bufferTail.byteLength > 0) {\n\t\tvar tailArray = new Uint8Array(bufferTail);\n\t\tvar isString = tailArray[0] === 0;\n\t\tvar msgLength = '';\n\n\t\tfor (var i = 1; ; i++) {\n\t\t  if (tailArray[i] == 255) break;\n\n\t\t  if (msgLength.length > 310) {\n\t\t\tnumberTooLong = true;\n\t\t\tbreak;\n\t\t  }\n\n\t\t  msgLength += tailArray[i];\n\t\t}\n\n\t\tif(numberTooLong) return callback(err, 0, 1);\n\n\t\tbufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n\t\tmsgLength = parseInt(msgLength);\n\n\t\tvar msg = sliceBuffer(bufferTail, 0, msgLength);\n\t\tif (isString) {\n\t\t  try {\n\t\t\tmsg = String.fromCharCode.apply(null, new Uint8Array(msg));\n\t\t  } catch (e) {\n\t\t\t// iPhone Safari doesn't let you apply to typed arrays\n\t\t\tvar typed = new Uint8Array(msg);\n\t\t\tmsg = '';\n\t\t\tfor (var i = 0; i < typed.length; i++) {\n\t\t\t  msg += String.fromCharCode(typed[i]);\n\t\t\t}\n\t\t  }\n\t\t}\n\n\t\tbuffers.push(msg);\n\t\tbufferTail = sliceBuffer(bufferTail, msgLength);\n\t  }\n\n\t  var total = buffers.length;\n\t  buffers.forEach(function(buffer, i) {\n\t\tcallback(exports.decodePacket(buffer, binaryType, true), i, total);\n\t  });\n\t};\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"./keys\":20,\"after\":11,\"arraybuffer.slice\":12,\"base64-arraybuffer\":13,\"blob\":14,\"has-binary\":21,\"utf8\":29}],20:[function(_dereq_,module,exports){\n\n\t/**\n\t * Gets the keys for an object.\n\t *\n\t * @return {Array} keys\n\t * @api private\n\t */\n\n\tmodule.exports = Object.keys || function keys (obj){\n\t  var arr = [];\n\t  var has = Object.prototype.hasOwnProperty;\n\n\t  for (var i in obj) {\n\t\tif (has.call(obj, i)) {\n\t\t  arr.push(i);\n\t\t}\n\t  }\n\t  return arr;\n\t};\n\n\t},{}],21:[function(_dereq_,module,exports){\n\t(function (global){\n\n\t/*\n\t * Module requirements.\n\t */\n\n\tvar isArray = _dereq_('isarray');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = hasBinary;\n\n\t/**\n\t * Checks for binary data.\n\t *\n\t * Right now only Buffer and ArrayBuffer are supported..\n\t *\n\t * @param {Object} anything\n\t * @api public\n\t */\n\n\tfunction hasBinary(data) {\n\n\t  function _hasBinary(obj) {\n\t\tif (!obj) return false;\n\n\t\tif ( (global.Buffer && global.Buffer.isBuffer(obj)) ||\n\t\t\t (global.ArrayBuffer && obj instanceof ArrayBuffer) ||\n\t\t\t (global.Blob && obj instanceof Blob) ||\n\t\t\t (global.File && obj instanceof File)\n\t\t\t) {\n\t\t  return true;\n\t\t}\n\n\t\tif (isArray(obj)) {\n\t\t  for (var i = 0; i < obj.length; i++) {\n\t\t\t  if (_hasBinary(obj[i])) {\n\t\t\t\t  return true;\n\t\t\t  }\n\t\t  }\n\t\t} else if (obj && 'object' == typeof obj) {\n\t\t  if (obj.toJSON) {\n\t\t\tobj = obj.toJSON();\n\t\t  }\n\n\t\t  for (var key in obj) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {\n\t\t\t  return true;\n\t\t\t}\n\t\t  }\n\t\t}\n\n\t\treturn false;\n\t  }\n\n\t  return _hasBinary(data);\n\t}\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"isarray\":24}],22:[function(_dereq_,module,exports){\n\n\t/**\n\t * Module exports.\n\t *\n\t * Logic borrowed from Modernizr:\n\t *\n\t *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n\t */\n\n\ttry {\n\t  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n\t\t'withCredentials' in new XMLHttpRequest();\n\t} catch (err) {\n\t  // if XMLHttp support is disabled in IE then it will throw\n\t  // when trying to create\n\t  module.exports = false;\n\t}\n\n\t},{}],23:[function(_dereq_,module,exports){\n\n\tvar indexOf = [].indexOf;\n\n\tmodule.exports = function(arr, obj){\n\t  if (indexOf) return arr.indexOf(obj);\n\t  for (var i = 0; i < arr.length; ++i) {\n\t\tif (arr[i] === obj) return i;\n\t  }\n\t  return -1;\n\t};\n\t},{}],24:[function(_dereq_,module,exports){\n\tmodule.exports = Array.isArray || function (arr) {\n\t  return Object.prototype.toString.call(arr) == '[object Array]';\n\t};\n\n\t},{}],25:[function(_dereq_,module,exports){\n\t/**\n\t * Helpers.\n\t */\n\n\tvar s = 1000;\n\tvar m = s * 60;\n\tvar h = m * 60;\n\tvar d = h * 24;\n\tvar y = d * 365.25;\n\n\t/**\n\t * Parse or format the given `val`.\n\t *\n\t * Options:\n\t *\n\t *  - `long` verbose formatting [false]\n\t *\n\t * @param {String|Number} val\n\t * @param {Object} options\n\t * @return {String|Number}\n\t * @api public\n\t */\n\n\tmodule.exports = function(val, options){\n\t  options = options || {};\n\t  if ('string' == typeof val) return parse(val);\n\t  return options.long\n\t\t? long(val)\n\t\t: short(val);\n\t};\n\n\t/**\n\t * Parse the given `str` and return milliseconds.\n\t *\n\t * @param {String} str\n\t * @return {Number}\n\t * @api private\n\t */\n\n\tfunction parse(str) {\n\t  str = '' + str;\n\t  if (str.length > 10000) return;\n\t  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);\n\t  if (!match) return;\n\t  var n = parseFloat(match[1]);\n\t  var type = (match[2] || 'ms').toLowerCase();\n\t  switch (type) {\n\t\tcase 'years':\n\t\tcase 'year':\n\t\tcase 'yrs':\n\t\tcase 'yr':\n\t\tcase 'y':\n\t\t  return n * y;\n\t\tcase 'days':\n\t\tcase 'day':\n\t\tcase 'd':\n\t\t  return n * d;\n\t\tcase 'hours':\n\t\tcase 'hour':\n\t\tcase 'hrs':\n\t\tcase 'hr':\n\t\tcase 'h':\n\t\t  return n * h;\n\t\tcase 'minutes':\n\t\tcase 'minute':\n\t\tcase 'mins':\n\t\tcase 'min':\n\t\tcase 'm':\n\t\t  return n * m;\n\t\tcase 'seconds':\n\t\tcase 'second':\n\t\tcase 'secs':\n\t\tcase 'sec':\n\t\tcase 's':\n\t\t  return n * s;\n\t\tcase 'milliseconds':\n\t\tcase 'millisecond':\n\t\tcase 'msecs':\n\t\tcase 'msec':\n\t\tcase 'ms':\n\t\t  return n;\n\t  }\n\t}\n\n\t/**\n\t * Short format for `ms`.\n\t *\n\t * @param {Number} ms\n\t * @return {String}\n\t * @api private\n\t */\n\n\tfunction short(ms) {\n\t  if (ms >= d) return Math.round(ms / d) + 'd';\n\t  if (ms >= h) return Math.round(ms / h) + 'h';\n\t  if (ms >= m) return Math.round(ms / m) + 'm';\n\t  if (ms >= s) return Math.round(ms / s) + 's';\n\t  return ms + 'ms';\n\t}\n\n\t/**\n\t * Long format for `ms`.\n\t *\n\t * @param {Number} ms\n\t * @return {String}\n\t * @api private\n\t */\n\n\tfunction long(ms) {\n\t  return plural(ms, d, 'day')\n\t\t|| plural(ms, h, 'hour')\n\t\t|| plural(ms, m, 'minute')\n\t\t|| plural(ms, s, 'second')\n\t\t|| ms + ' ms';\n\t}\n\n\t/**\n\t * Pluralization helper.\n\t */\n\n\tfunction plural(ms, n, name) {\n\t  if (ms < n) return;\n\t  if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\n\t  return Math.ceil(ms / n) + ' ' + name + 's';\n\t}\n\n\t},{}],26:[function(_dereq_,module,exports){\n\t(function (global){\n\t/**\n\t * JSON parse.\n\t *\n\t * @see Based on jQuery#parseJSON (MIT) and JSON2\n\t * @api private\n\t */\n\n\tvar rvalidchars = /^[\\],:{}\\s]*$/;\n\tvar rvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\n\tvar rvalidtokens = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\n\tvar rvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g;\n\tvar rtrimLeft = /^\\s+/;\n\tvar rtrimRight = /\\s+$/;\n\n\tmodule.exports = function parsejson(data) {\n\t  if ('string' != typeof data || !data) {\n\t\treturn null;\n\t  }\n\n\t  data = data.replace(rtrimLeft, '').replace(rtrimRight, '');\n\n\t  // Attempt to parse using the native JSON parser first\n\t  if (global.JSON && JSON.parse) {\n\t\treturn JSON.parse(data);\n\t  }\n\n\t  if (rvalidchars.test(data.replace(rvalidescape, '@')\n\t\t  .replace(rvalidtokens, ']')\n\t\t  .replace(rvalidbraces, ''))) {\n\t\treturn (new Function('return ' + data))();\n\t  }\n\t};\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{}],27:[function(_dereq_,module,exports){\n\t/**\n\t * Compiles a querystring\n\t * Returns string representation of the object\n\t *\n\t * @param {Object}\n\t * @api private\n\t */\n\n\texports.encode = function (obj) {\n\t  var str = '';\n\n\t  for (var i in obj) {\n\t\tif (obj.hasOwnProperty(i)) {\n\t\t  if (str.length) str += '&';\n\t\t  str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n\t\t}\n\t  }\n\n\t  return str;\n\t};\n\n\t/**\n\t * Parses a simple querystring into an object\n\t *\n\t * @param {String} qs\n\t * @api private\n\t */\n\n\texports.decode = function(qs){\n\t  var qry = {};\n\t  var pairs = qs.split('&');\n\t  for (var i = 0, l = pairs.length; i < l; i++) {\n\t\tvar pair = pairs[i].split('=');\n\t\tqry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n\t  }\n\t  return qry;\n\t};\n\n\t},{}],28:[function(_dereq_,module,exports){\n\t/**\n\t * Parses an URI\n\t *\n\t * @author Steven Levithan <stevenlevithan.com> (MIT license)\n\t * @api private\n\t */\n\n\tvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\n\tvar parts = [\n\t\t'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n\t];\n\n\tmodule.exports = function parseuri(str) {\n\t\tvar src = str,\n\t\t\tb = str.indexOf('['),\n\t\t\te = str.indexOf(']');\n\n\t\tif (b != -1 && e != -1) {\n\t\t\tstr = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n\t\t}\n\n\t\tvar m = re.exec(str || ''),\n\t\t\turi = {},\n\t\t\ti = 14;\n\n\t\twhile (i--) {\n\t\t\turi[parts[i]] = m[i] || '';\n\t\t}\n\n\t\tif (b != -1 && e != -1) {\n\t\t\turi.source = src;\n\t\t\turi.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n\t\t\turi.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n\t\t\turi.ipv6uri = true;\n\t\t}\n\n\t\treturn uri;\n\t};\n\n\t},{}],29:[function(_dereq_,module,exports){\n\t(function (global){\n\t/*! https://mths.be/utf8js v2.0.0 by @mathias */\n\t;(function(root) {\n\n\t\t// Detect free variables `exports`\n\t\tvar freeExports = typeof exports == 'object' && exports;\n\n\t\t// Detect free variable `module`\n\t\tvar freeModule = typeof module == 'object' && module &&\n\t\t\tmodule.exports == freeExports && module;\n\n\t\t// Detect free variable `global`, from Node.js or Browserified code,\n\t\t// and use it as `root`\n\t\tvar freeGlobal = typeof global == 'object' && global;\n\t\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\t\troot = freeGlobal;\n\t\t}\n\n\t\t/*--------------------------------------------------------------------------*/\n\n\t\tvar stringFromCharCode = String.fromCharCode;\n\n\t\t// Taken from https://mths.be/punycode\n\t\tfunction ucs2decode(string) {\n\t\t\tvar output = [];\n\t\t\tvar counter = 0;\n\t\t\tvar length = string.length;\n\t\t\tvar value;\n\t\t\tvar extra;\n\t\t\twhile (counter < length) {\n\t\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\t\toutput.push(value);\n\t\t\t\t\t\tcounter--;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\toutput.push(value);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn output;\n\t\t}\n\n\t\t// Taken from https://mths.be/punycode\n\t\tfunction ucs2encode(array) {\n\t\t\tvar length = array.length;\n\t\t\tvar index = -1;\n\t\t\tvar value;\n\t\t\tvar output = '';\n\t\t\twhile (++index < length) {\n\t\t\t\tvalue = array[index];\n\t\t\t\tif (value > 0xFFFF) {\n\t\t\t\t\tvalue -= 0x10000;\n\t\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t\t}\n\t\t\t\toutput += stringFromCharCode(value);\n\t\t\t}\n\t\t\treturn output;\n\t\t}\n\n\t\tfunction checkScalarValue(codePoint) {\n\t\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\t\tthrow Error(\n\t\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t\t' is not a scalar value'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\t/*--------------------------------------------------------------------------*/\n\n\t\tfunction createByte(codePoint, shift) {\n\t\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t\t}\n\n\t\tfunction encodeCodePoint(codePoint) {\n\t\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\t\treturn stringFromCharCode(codePoint);\n\t\t\t}\n\t\t\tvar symbol = '';\n\t\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t\t}\n\t\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\t\tcheckScalarValue(codePoint);\n\t\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\t\tsymbol += createByte(codePoint, 6);\n\t\t\t}\n\t\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\t\tsymbol += createByte(codePoint, 6);\n\t\t\t}\n\t\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\t\treturn symbol;\n\t\t}\n\n\t\tfunction utf8encode(string) {\n\t\t\tvar codePoints = ucs2decode(string);\n\t\t\tvar length = codePoints.length;\n\t\t\tvar index = -1;\n\t\t\tvar codePoint;\n\t\t\tvar byteString = '';\n\t\t\twhile (++index < length) {\n\t\t\t\tcodePoint = codePoints[index];\n\t\t\t\tbyteString += encodeCodePoint(codePoint);\n\t\t\t}\n\t\t\treturn byteString;\n\t\t}\n\n\t\t/*--------------------------------------------------------------------------*/\n\n\t\tfunction readContinuationByte() {\n\t\t\tif (byteIndex >= byteCount) {\n\t\t\t\tthrow Error('Invalid byte index');\n\t\t\t}\n\n\t\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\t\tbyteIndex++;\n\n\t\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\t\treturn continuationByte & 0x3F;\n\t\t\t}\n\n\t\t\t// If we end up here, it’s not a continuation byte\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\n\t\tfunction decodeSymbol() {\n\t\t\tvar byte1;\n\t\t\tvar byte2;\n\t\t\tvar byte3;\n\t\t\tvar byte4;\n\t\t\tvar codePoint;\n\n\t\t\tif (byteIndex > byteCount) {\n\t\t\t\tthrow Error('Invalid byte index');\n\t\t\t}\n\n\t\t\tif (byteIndex == byteCount) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Read first byte\n\t\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\t\tbyteIndex++;\n\n\t\t\t// 1-byte sequence (no continuation bytes)\n\t\t\tif ((byte1 & 0x80) == 0) {\n\t\t\t\treturn byte1;\n\t\t\t}\n\n\t\t\t// 2-byte sequence\n\t\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\t\tvar byte2 = readContinuationByte();\n\t\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\t\tif (codePoint >= 0x80) {\n\t\t\t\t\treturn codePoint;\n\t\t\t\t} else {\n\t\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\t\tbyte2 = readContinuationByte();\n\t\t\t\tbyte3 = readContinuationByte();\n\t\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\t\tcheckScalarValue(codePoint);\n\t\t\t\t\treturn codePoint;\n\t\t\t\t} else {\n\t\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 4-byte sequence\n\t\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\t\tbyte2 = readContinuationByte();\n\t\t\t\tbyte3 = readContinuationByte();\n\t\t\t\tbyte4 = readContinuationByte();\n\t\t\t\tcodePoint = ((byte1 & 0x0F) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\t\treturn codePoint;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthrow Error('Invalid UTF-8 detected');\n\t\t}\n\n\t\tvar byteArray;\n\t\tvar byteCount;\n\t\tvar byteIndex;\n\t\tfunction utf8decode(byteString) {\n\t\t\tbyteArray = ucs2decode(byteString);\n\t\t\tbyteCount = byteArray.length;\n\t\t\tbyteIndex = 0;\n\t\t\tvar codePoints = [];\n\t\t\tvar tmp;\n\t\t\twhile ((tmp = decodeSymbol()) !== false) {\n\t\t\t\tcodePoints.push(tmp);\n\t\t\t}\n\t\t\treturn ucs2encode(codePoints);\n\t\t}\n\n\t\t/*--------------------------------------------------------------------------*/\n\n\t\tvar utf8 = {\n\t\t\t'version': '2.0.0',\n\t\t\t'encode': utf8encode,\n\t\t\t'decode': utf8decode\n\t\t};\n\n\t\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t\t// like the following:\n\t\tif (\n\t\t\ttypeof define == 'function' &&\n\t\t\ttypeof define.amd == 'object' &&\n\t\t\tdefine.amd\n\t\t) {\n\t\t\tdefine(function() {\n\t\t\t\treturn utf8;\n\t\t\t});\n\t\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\t\tfreeModule.exports = utf8;\n\t\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\t\tvar object = {};\n\t\t\t\tvar hasOwnProperty = object.hasOwnProperty;\n\t\t\t\tfor (var key in utf8) {\n\t\t\t\t\thasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else { // in Rhino or a web browser\n\t\t\troot.utf8 = utf8;\n\t\t}\n\n\t}(this));\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{}],30:[function(_dereq_,module,exports){\n\t'use strict';\n\n\tvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n\t  , length = 64\n\t  , map = {}\n\t  , seed = 0\n\t  , i = 0\n\t  , prev;\n\n\t/**\n\t * Return a string representing the specified number.\n\t *\n\t * @param {Number} num The number to convert.\n\t * @returns {String} The string representation of the number.\n\t * @api public\n\t */\n\tfunction encode(num) {\n\t  var encoded = '';\n\n\t  do {\n\t\tencoded = alphabet[num % length] + encoded;\n\t\tnum = Math.floor(num / length);\n\t  } while (num > 0);\n\n\t  return encoded;\n\t}\n\n\t/**\n\t * Return the integer value specified by the given string.\n\t *\n\t * @param {String} str The string to convert.\n\t * @returns {Number} The integer value represented by the string.\n\t * @api public\n\t */\n\tfunction decode(str) {\n\t  var decoded = 0;\n\n\t  for (i = 0; i < str.length; i++) {\n\t\tdecoded = decoded * length + map[str.charAt(i)];\n\t  }\n\n\t  return decoded;\n\t}\n\n\t/**\n\t * Yeast: A tiny growing id generator.\n\t *\n\t * @returns {String} A unique id.\n\t * @api public\n\t */\n\tfunction yeast() {\n\t  var now = encode(+new Date());\n\n\t  if (now !== prev) return seed = 0, prev = now;\n\t  return now +'.'+ encode(seed++);\n\t}\n\n\t//\n\t// Map each character to its index.\n\t//\n\tfor (; i < length; i++) map[alphabet[i]] = i;\n\n\t//\n\t// Expose the `yeast`, `encode` and `decode` functions.\n\t//\n\tyeast.encode = encode;\n\tyeast.decode = decode;\n\tmodule.exports = yeast;\n\n\t},{}],31:[function(_dereq_,module,exports){\n\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar url = _dereq_('./url');\n\tvar parser = _dereq_('socket.io-parser');\n\tvar Manager = _dereq_('./manager');\n\tvar debug = _dereq_('debug')('socket.io-client');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = exports = lookup;\n\n\t/**\n\t * Managers cache.\n\t */\n\n\tvar cache = exports.managers = {};\n\n\t/**\n\t * Looks up an existing `Manager` for multiplexing.\n\t * If the user summons:\n\t *\n\t *   `io('http://localhost/a');`\n\t *   `io('http://localhost/b');`\n\t *\n\t * We reuse the existing instance based on same scheme/port/host,\n\t * and we initialize sockets for each namespace.\n\t *\n\t * @api public\n\t */\n\n\tfunction lookup(uri, opts) {\n\t  if (typeof uri == 'object') {\n\t\topts = uri;\n\t\turi = undefined;\n\t  }\n\n\t  opts = opts || {};\n\n\t  var parsed = url(uri);\n\t  var source = parsed.source;\n\t  var id = parsed.id;\n\t  var path = parsed.path;\n\t  var sameNamespace = cache[id] && path in cache[id].nsps;\n\t  var newConnection = opts.forceNew || opts['force new connection'] ||\n\t\t\t\t\t\t  false === opts.multiplex || sameNamespace;\n\n\t  var io;\n\n\t  if (newConnection) {\n\t\tdebug('ignoring socket cache for %s', source);\n\t\tio = Manager(source, opts);\n\t  } else {\n\t\tif (!cache[id]) {\n\t\t  debug('new io instance for %s', source);\n\t\t  cache[id] = Manager(source, opts);\n\t\t}\n\t\tio = cache[id];\n\t  }\n\n\t  return io.socket(parsed.path);\n\t}\n\n\t/**\n\t * Protocol version.\n\t *\n\t * @api public\n\t */\n\n\texports.protocol = parser.protocol;\n\n\t/**\n\t * `connect`.\n\t *\n\t * @param {String} uri\n\t * @api public\n\t */\n\n\texports.connect = lookup;\n\n\t/**\n\t * Expose constructors for standalone build.\n\t *\n\t * @api public\n\t */\n\n\texports.Manager = _dereq_('./manager');\n\texports.Socket = _dereq_('./socket');\n\n\t},{\"./manager\":32,\"./socket\":34,\"./url\":35,\"debug\":39,\"socket.io-parser\":47}],32:[function(_dereq_,module,exports){\n\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar eio = _dereq_('engine.io-client');\n\tvar Socket = _dereq_('./socket');\n\tvar Emitter = _dereq_('component-emitter');\n\tvar parser = _dereq_('socket.io-parser');\n\tvar on = _dereq_('./on');\n\tvar bind = _dereq_('component-bind');\n\tvar debug = _dereq_('debug')('socket.io-client:manager');\n\tvar indexOf = _dereq_('indexof');\n\tvar Backoff = _dereq_('backo2');\n\n\t/**\n\t * IE6+ hasOwnProperty\n\t */\n\n\tvar has = Object.prototype.hasOwnProperty;\n\n\t/**\n\t * Module exports\n\t */\n\n\tmodule.exports = Manager;\n\n\t/**\n\t * `Manager` constructor.\n\t *\n\t * @param {String} engine instance or engine uri/opts\n\t * @param {Object} options\n\t * @api public\n\t */\n\n\tfunction Manager(uri, opts){\n\t  if (!(this instanceof Manager)) return new Manager(uri, opts);\n\t  if (uri && ('object' == typeof uri)) {\n\t\topts = uri;\n\t\turi = undefined;\n\t  }\n\t  opts = opts || {};\n\n\t  opts.path = opts.path || '/socket.io';\n\t  this.nsps = {};\n\t  this.subs = [];\n\t  this.opts = opts;\n\t  this.reconnection(opts.reconnection !== false);\n\t  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n\t  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n\t  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n\t  this.randomizationFactor(opts.randomizationFactor || 0.5);\n\t  this.backoff = new Backoff({\n\t\tmin: this.reconnectionDelay(),\n\t\tmax: this.reconnectionDelayMax(),\n\t\tjitter: this.randomizationFactor()\n\t  });\n\t  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n\t  this.readyState = 'closed';\n\t  this.uri = uri;\n\t  this.connecting = [];\n\t  this.lastPing = null;\n\t  this.encoding = false;\n\t  this.packetBuffer = [];\n\t  this.encoder = new parser.Encoder();\n\t  this.decoder = new parser.Decoder();\n\t  this.autoConnect = opts.autoConnect !== false;\n\t  if (this.autoConnect) this.open();\n\t}\n\n\t/**\n\t * Propagate given event to sockets and emit on `this`\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.emitAll = function() {\n\t  this.emit.apply(this, arguments);\n\t  for (var nsp in this.nsps) {\n\t\tif (has.call(this.nsps, nsp)) {\n\t\t  this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n\t\t}\n\t  }\n\t};\n\n\t/**\n\t * Update `socket.id` of all sockets\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.updateSocketIds = function(){\n\t  for (var nsp in this.nsps) {\n\t\tif (has.call(this.nsps, nsp)) {\n\t\t  this.nsps[nsp].id = this.engine.id;\n\t\t}\n\t  }\n\t};\n\n\t/**\n\t * Mix in `Emitter`.\n\t */\n\n\tEmitter(Manager.prototype);\n\n\t/**\n\t * Sets the `reconnection` config.\n\t *\n\t * @param {Boolean} true/false if it should automatically reconnect\n\t * @return {Manager} self or value\n\t * @api public\n\t */\n\n\tManager.prototype.reconnection = function(v){\n\t  if (!arguments.length) return this._reconnection;\n\t  this._reconnection = !!v;\n\t  return this;\n\t};\n\n\t/**\n\t * Sets the reconnection attempts config.\n\t *\n\t * @param {Number} max reconnection attempts before giving up\n\t * @return {Manager} self or value\n\t * @api public\n\t */\n\n\tManager.prototype.reconnectionAttempts = function(v){\n\t  if (!arguments.length) return this._reconnectionAttempts;\n\t  this._reconnectionAttempts = v;\n\t  return this;\n\t};\n\n\t/**\n\t * Sets the delay between reconnections.\n\t *\n\t * @param {Number} delay\n\t * @return {Manager} self or value\n\t * @api public\n\t */\n\n\tManager.prototype.reconnectionDelay = function(v){\n\t  if (!arguments.length) return this._reconnectionDelay;\n\t  this._reconnectionDelay = v;\n\t  this.backoff && this.backoff.setMin(v);\n\t  return this;\n\t};\n\n\tManager.prototype.randomizationFactor = function(v){\n\t  if (!arguments.length) return this._randomizationFactor;\n\t  this._randomizationFactor = v;\n\t  this.backoff && this.backoff.setJitter(v);\n\t  return this;\n\t};\n\n\t/**\n\t * Sets the maximum delay between reconnections.\n\t *\n\t * @param {Number} delay\n\t * @return {Manager} self or value\n\t * @api public\n\t */\n\n\tManager.prototype.reconnectionDelayMax = function(v){\n\t  if (!arguments.length) return this._reconnectionDelayMax;\n\t  this._reconnectionDelayMax = v;\n\t  this.backoff && this.backoff.setMax(v);\n\t  return this;\n\t};\n\n\t/**\n\t * Sets the connection timeout. `false` to disable\n\t *\n\t * @return {Manager} self or value\n\t * @api public\n\t */\n\n\tManager.prototype.timeout = function(v){\n\t  if (!arguments.length) return this._timeout;\n\t  this._timeout = v;\n\t  return this;\n\t};\n\n\t/**\n\t * Starts trying to reconnect if reconnection is enabled and we have not\n\t * started reconnecting yet\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.maybeReconnectOnOpen = function() {\n\t  // Only try to reconnect if it's the first time we're connecting\n\t  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n\t\t// keeps reconnection from firing twice for the same reconnection loop\n\t\tthis.reconnect();\n\t  }\n\t};\n\n\n\t/**\n\t * Sets the current transport `socket`.\n\t *\n\t * @param {Function} optional, callback\n\t * @return {Manager} self\n\t * @api public\n\t */\n\n\tManager.prototype.open =\n\tManager.prototype.connect = function(fn){\n\t  debug('readyState %s', this.readyState);\n\t  if (~this.readyState.indexOf('open')) return this;\n\n\t  debug('opening %s', this.uri);\n\t  this.engine = eio(this.uri, this.opts);\n\t  var socket = this.engine;\n\t  var self = this;\n\t  this.readyState = 'opening';\n\t  this.skipReconnect = false;\n\n\t  // emit `open`\n\t  var openSub = on(socket, 'open', function() {\n\t\tself.onopen();\n\t\tfn && fn();\n\t  });\n\n\t  // emit `connect_error`\n\t  var errorSub = on(socket, 'error', function(data){\n\t\tdebug('connect_error');\n\t\tself.cleanup();\n\t\tself.readyState = 'closed';\n\t\tself.emitAll('connect_error', data);\n\t\tif (fn) {\n\t\t  var err = new Error('Connection error');\n\t\t  err.data = data;\n\t\t  fn(err);\n\t\t} else {\n\t\t  // Only do this if there is no fn to handle the error\n\t\t  self.maybeReconnectOnOpen();\n\t\t}\n\t  });\n\n\t  // emit `connect_timeout`\n\t  if (false !== this._timeout) {\n\t\tvar timeout = this._timeout;\n\t\tdebug('connect attempt will timeout after %d', timeout);\n\n\t\t// set timer\n\t\tvar timer = setTimeout(function(){\n\t\t  debug('connect attempt timed out after %d', timeout);\n\t\t  openSub.destroy();\n\t\t  socket.close();\n\t\t  socket.emit('error', 'timeout');\n\t\t  self.emitAll('connect_timeout', timeout);\n\t\t}, timeout);\n\n\t\tthis.subs.push({\n\t\t  destroy: function(){\n\t\t\tclearTimeout(timer);\n\t\t  }\n\t\t});\n\t  }\n\n\t  this.subs.push(openSub);\n\t  this.subs.push(errorSub);\n\n\t  return this;\n\t};\n\n\t/**\n\t * Called upon transport open.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.onopen = function(){\n\t  debug('open');\n\n\t  // clear old subs\n\t  this.cleanup();\n\n\t  // mark as open\n\t  this.readyState = 'open';\n\t  this.emit('open');\n\n\t  // add new subs\n\t  var socket = this.engine;\n\t  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n\t  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n\t  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n\t  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n\t  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n\t  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n\t};\n\n\t/**\n\t * Called upon a ping.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.onping = function(){\n\t  this.lastPing = new Date;\n\t  this.emitAll('ping');\n\t};\n\n\t/**\n\t * Called upon a packet.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.onpong = function(){\n\t  this.emitAll('pong', new Date - this.lastPing);\n\t};\n\n\t/**\n\t * Called with data.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.ondata = function(data){\n\t  this.decoder.add(data);\n\t};\n\n\t/**\n\t * Called when parser fully decodes a packet.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.ondecoded = function(packet) {\n\t  this.emit('packet', packet);\n\t};\n\n\t/**\n\t * Called upon socket error.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.onerror = function(err){\n\t  debug('error', err);\n\t  this.emitAll('error', err);\n\t};\n\n\t/**\n\t * Creates a new socket for the given `nsp`.\n\t *\n\t * @return {Socket}\n\t * @api public\n\t */\n\n\tManager.prototype.socket = function(nsp){\n\t  var socket = this.nsps[nsp];\n\t  if (!socket) {\n\t\tsocket = new Socket(this, nsp);\n\t\tthis.nsps[nsp] = socket;\n\t\tvar self = this;\n\t\tsocket.on('connecting', onConnecting);\n\t\tsocket.on('connect', function(){\n\t\t  socket.id = self.engine.id;\n\t\t});\n\n\t\tif (this.autoConnect) {\n\t\t  // manually call here since connecting evnet is fired before listening\n\t\t  onConnecting();\n\t\t}\n\t  }\n\n\t  function onConnecting() {\n\t\tif (!~indexOf(self.connecting, socket)) {\n\t\t  self.connecting.push(socket);\n\t\t}\n\t  }\n\n\t  return socket;\n\t};\n\n\t/**\n\t * Called upon a socket close.\n\t *\n\t * @param {Socket} socket\n\t */\n\n\tManager.prototype.destroy = function(socket){\n\t  var index = indexOf(this.connecting, socket);\n\t  if (~index) this.connecting.splice(index, 1);\n\t  if (this.connecting.length) return;\n\n\t  this.close();\n\t};\n\n\t/**\n\t * Writes a packet.\n\t *\n\t * @param {Object} packet\n\t * @api private\n\t */\n\n\tManager.prototype.packet = function(packet){\n\t  debug('writing packet %j', packet);\n\t  var self = this;\n\n\t  if (!self.encoding) {\n\t\t// encode, then write to engine with result\n\t\tself.encoding = true;\n\t\tthis.encoder.encode(packet, function(encodedPackets) {\n\t\t  for (var i = 0; i < encodedPackets.length; i++) {\n\t\t\tself.engine.write(encodedPackets[i], packet.options);\n\t\t  }\n\t\t  self.encoding = false;\n\t\t  self.processPacketQueue();\n\t\t});\n\t  } else { // add packet to the queue\n\t\tself.packetBuffer.push(packet);\n\t  }\n\t};\n\n\t/**\n\t * If packet buffer is non-empty, begins encoding the\n\t * next packet in line.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.processPacketQueue = function() {\n\t  if (this.packetBuffer.length > 0 && !this.encoding) {\n\t\tvar pack = this.packetBuffer.shift();\n\t\tthis.packet(pack);\n\t  }\n\t};\n\n\t/**\n\t * Clean up transport subscriptions and packet buffer.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.cleanup = function(){\n\t  debug('cleanup');\n\n\t  var sub;\n\t  while (sub = this.subs.shift()) sub.destroy();\n\n\t  this.packetBuffer = [];\n\t  this.encoding = false;\n\t  this.lastPing = null;\n\n\t  this.decoder.destroy();\n\t};\n\n\t/**\n\t * Close the current socket.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.close =\n\tManager.prototype.disconnect = function(){\n\t  debug('disconnect');\n\t  this.skipReconnect = true;\n\t  this.reconnecting = false;\n\t  if ('opening' == this.readyState) {\n\t\t// `onclose` will not fire because\n\t\t// an open event never happened\n\t\tthis.cleanup();\n\t  }\n\t  this.backoff.reset();\n\t  this.readyState = 'closed';\n\t  if (this.engine) this.engine.close();\n\t};\n\n\t/**\n\t * Called upon engine close.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.onclose = function(reason){\n\t  debug('onclose');\n\n\t  this.cleanup();\n\t  this.backoff.reset();\n\t  this.readyState = 'closed';\n\t  this.emit('close', reason);\n\n\t  if (this._reconnection && !this.skipReconnect) {\n\t\tthis.reconnect();\n\t  }\n\t};\n\n\t/**\n\t * Attempt a reconnection.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.reconnect = function(){\n\t  if (this.reconnecting || this.skipReconnect) return this;\n\n\t  var self = this;\n\n\t  if (this.backoff.attempts >= this._reconnectionAttempts) {\n\t\tdebug('reconnect failed');\n\t\tthis.backoff.reset();\n\t\tthis.emitAll('reconnect_failed');\n\t\tthis.reconnecting = false;\n\t  } else {\n\t\tvar delay = this.backoff.duration();\n\t\tdebug('will wait %dms before reconnect attempt', delay);\n\n\t\tthis.reconnecting = true;\n\t\tvar timer = setTimeout(function(){\n\t\t  if (self.skipReconnect) return;\n\n\t\t  debug('attempting reconnect');\n\t\t  self.emitAll('reconnect_attempt', self.backoff.attempts);\n\t\t  self.emitAll('reconnecting', self.backoff.attempts);\n\n\t\t  // check again for the case socket closed in above events\n\t\t  if (self.skipReconnect) return;\n\n\t\t  self.open(function(err){\n\t\t\tif (err) {\n\t\t\t  debug('reconnect attempt error');\n\t\t\t  self.reconnecting = false;\n\t\t\t  self.reconnect();\n\t\t\t  self.emitAll('reconnect_error', err.data);\n\t\t\t} else {\n\t\t\t  debug('reconnect success');\n\t\t\t  self.onreconnect();\n\t\t\t}\n\t\t  });\n\t\t}, delay);\n\n\t\tthis.subs.push({\n\t\t  destroy: function(){\n\t\t\tclearTimeout(timer);\n\t\t  }\n\t\t});\n\t  }\n\t};\n\n\t/**\n\t * Called upon successful reconnect.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.onreconnect = function(){\n\t  var attempt = this.backoff.attempts;\n\t  this.reconnecting = false;\n\t  this.backoff.reset();\n\t  this.updateSocketIds();\n\t  this.emitAll('reconnect', attempt);\n\t};\n\n\t},{\"./on\":33,\"./socket\":34,\"backo2\":36,\"component-bind\":37,\"component-emitter\":38,\"debug\":39,\"engine.io-client\":1,\"indexof\":42,\"socket.io-parser\":47}],33:[function(_dereq_,module,exports){\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = on;\n\n\t/**\n\t * Helper for subscriptions.\n\t *\n\t * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n\t * @param {String} event name\n\t * @param {Function} callback\n\t * @api public\n\t */\n\n\tfunction on(obj, ev, fn) {\n\t  obj.on(ev, fn);\n\t  return {\n\t\tdestroy: function(){\n\t\t  obj.removeListener(ev, fn);\n\t\t}\n\t  };\n\t}\n\n\t},{}],34:[function(_dereq_,module,exports){\n\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar parser = _dereq_('socket.io-parser');\n\tvar Emitter = _dereq_('component-emitter');\n\tvar toArray = _dereq_('to-array');\n\tvar on = _dereq_('./on');\n\tvar bind = _dereq_('component-bind');\n\tvar debug = _dereq_('debug')('socket.io-client:socket');\n\tvar hasBin = _dereq_('has-binary');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = exports = Socket;\n\n\t/**\n\t * Internal events (blacklisted).\n\t * These events can't be emitted by the user.\n\t *\n\t * @api private\n\t */\n\n\tvar events = {\n\t  connect: 1,\n\t  connect_error: 1,\n\t  connect_timeout: 1,\n\t  connecting: 1,\n\t  disconnect: 1,\n\t  error: 1,\n\t  reconnect: 1,\n\t  reconnect_attempt: 1,\n\t  reconnect_failed: 1,\n\t  reconnect_error: 1,\n\t  reconnecting: 1,\n\t  ping: 1,\n\t  pong: 1\n\t};\n\n\t/**\n\t * Shortcut to `Emitter#emit`.\n\t */\n\n\tvar emit = Emitter.prototype.emit;\n\n\t/**\n\t * `Socket` constructor.\n\t *\n\t * @api public\n\t */\n\n\tfunction Socket(io, nsp){\n\t  this.io = io;\n\t  this.nsp = nsp;\n\t  this.json = this; // compat\n\t  this.ids = 0;\n\t  this.acks = {};\n\t  this.receiveBuffer = [];\n\t  this.sendBuffer = [];\n\t  this.connected = false;\n\t  this.disconnected = true;\n\t  if (this.io.autoConnect) this.open();\n\t}\n\n\t/**\n\t * Mix in `Emitter`.\n\t */\n\n\tEmitter(Socket.prototype);\n\n\t/**\n\t * Subscribe to open, close and packet events\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.subEvents = function() {\n\t  if (this.subs) return;\n\n\t  var io = this.io;\n\t  this.subs = [\n\t\ton(io, 'open', bind(this, 'onopen')),\n\t\ton(io, 'packet', bind(this, 'onpacket')),\n\t\ton(io, 'close', bind(this, 'onclose'))\n\t  ];\n\t};\n\n\t/**\n\t * \"Opens\" the socket.\n\t *\n\t * @api public\n\t */\n\n\tSocket.prototype.open =\n\tSocket.prototype.connect = function(){\n\t  if (this.connected) return this;\n\n\t  this.subEvents();\n\t  this.io.open(); // ensure open\n\t  if ('open' == this.io.readyState) this.onopen();\n\t  this.emit('connecting');\n\t  return this;\n\t};\n\n\t/**\n\t * Sends a `message` event.\n\t *\n\t * @return {Socket} self\n\t * @api public\n\t */\n\n\tSocket.prototype.send = function(){\n\t  var args = toArray(arguments);\n\t  args.unshift('message');\n\t  this.emit.apply(this, args);\n\t  return this;\n\t};\n\n\t/**\n\t * Override `emit`.\n\t * If the event is in `events`, it's emitted normally.\n\t *\n\t * @param {String} event name\n\t * @return {Socket} self\n\t * @api public\n\t */\n\n\tSocket.prototype.emit = function(ev){\n\t  if (events.hasOwnProperty(ev)) {\n\t\temit.apply(this, arguments);\n\t\treturn this;\n\t  }\n\n\t  var args = toArray(arguments);\n\t  var parserType = parser.EVENT; // default\n\t  if (hasBin(args)) { parserType = parser.BINARY_EVENT; } // binary\n\t  var packet = { type: parserType, data: args };\n\n\t  packet.options = {};\n\t  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n\t  // event ack callback\n\t  if ('function' == typeof args[args.length - 1]) {\n\t\tdebug('emitting packet with ack id %d', this.ids);\n\t\tthis.acks[this.ids] = args.pop();\n\t\tpacket.id = this.ids++;\n\t  }\n\n\t  if (this.connected) {\n\t\tthis.packet(packet);\n\t  } else {\n\t\tthis.sendBuffer.push(packet);\n\t  }\n\n\t  delete this.flags;\n\n\t  return this;\n\t};\n\n\t/**\n\t * Sends a packet.\n\t *\n\t * @param {Object} packet\n\t * @api private\n\t */\n\n\tSocket.prototype.packet = function(packet){\n\t  packet.nsp = this.nsp;\n\t  this.io.packet(packet);\n\t};\n\n\t/**\n\t * Called upon engine `open`.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.onopen = function(){\n\t  debug('transport is open - connecting');\n\n\t  // write connect packet if necessary\n\t  if ('/' != this.nsp) {\n\t\tthis.packet({ type: parser.CONNECT });\n\t  }\n\t};\n\n\t/**\n\t * Called upon engine `close`.\n\t *\n\t * @param {String} reason\n\t * @api private\n\t */\n\n\tSocket.prototype.onclose = function(reason){\n\t  debug('close (%s)', reason);\n\t  this.connected = false;\n\t  this.disconnected = true;\n\t  delete this.id;\n\t  this.emit('disconnect', reason);\n\t};\n\n\t/**\n\t * Called with socket packet.\n\t *\n\t * @param {Object} packet\n\t * @api private\n\t */\n\n\tSocket.prototype.onpacket = function(packet){\n\t  if (packet.nsp != this.nsp) return;\n\n\t  switch (packet.type) {\n\t\tcase parser.CONNECT:\n\t\t  this.onconnect();\n\t\t  break;\n\n\t\tcase parser.EVENT:\n\t\t  this.onevent(packet);\n\t\t  break;\n\n\t\tcase parser.BINARY_EVENT:\n\t\t  this.onevent(packet);\n\t\t  break;\n\n\t\tcase parser.ACK:\n\t\t  this.onack(packet);\n\t\t  break;\n\n\t\tcase parser.BINARY_ACK:\n\t\t  this.onack(packet);\n\t\t  break;\n\n\t\tcase parser.DISCONNECT:\n\t\t  this.ondisconnect();\n\t\t  break;\n\n\t\tcase parser.ERROR:\n\t\t  this.emit('error', packet.data);\n\t\t  break;\n\t  }\n\t};\n\n\t/**\n\t * Called upon a server event.\n\t *\n\t * @param {Object} packet\n\t * @api private\n\t */\n\n\tSocket.prototype.onevent = function(packet){\n\t  var args = packet.data || [];\n\t  debug('emitting event %j', args);\n\n\t  if (null != packet.id) {\n\t\tdebug('attaching ack callback to event');\n\t\targs.push(this.ack(packet.id));\n\t  }\n\n\t  if (this.connected) {\n\t\temit.apply(this, args);\n\t  } else {\n\t\tthis.receiveBuffer.push(args);\n\t  }\n\t};\n\n\t/**\n\t * Produces an ack callback to emit with an event.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.ack = function(id){\n\t  var self = this;\n\t  var sent = false;\n\t  return function(){\n\t\t// prevent double callbacks\n\t\tif (sent) return;\n\t\tsent = true;\n\t\tvar args = toArray(arguments);\n\t\tdebug('sending ack %j', args);\n\n\t\tvar type = hasBin(args) ? parser.BINARY_ACK : parser.ACK;\n\t\tself.packet({\n\t\t  type: type,\n\t\t  id: id,\n\t\t  data: args\n\t\t});\n\t  };\n\t};\n\n\t/**\n\t * Called upon a server acknowlegement.\n\t *\n\t * @param {Object} packet\n\t * @api private\n\t */\n\n\tSocket.prototype.onack = function(packet){\n\t  var ack = this.acks[packet.id];\n\t  if ('function' == typeof ack) {\n\t\tdebug('calling ack %s with %j', packet.id, packet.data);\n\t\tack.apply(this, packet.data);\n\t\tdelete this.acks[packet.id];\n\t  } else {\n\t\tdebug('bad ack %s', packet.id);\n\t  }\n\t};\n\n\t/**\n\t * Called upon server connect.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.onconnect = function(){\n\t  this.connected = true;\n\t  this.disconnected = false;\n\t  this.emit('connect');\n\t  this.emitBuffered();\n\t};\n\n\t/**\n\t * Emit buffered events (received and emitted).\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.emitBuffered = function(){\n\t  var i;\n\t  for (i = 0; i < this.receiveBuffer.length; i++) {\n\t\temit.apply(this, this.receiveBuffer[i]);\n\t  }\n\t  this.receiveBuffer = [];\n\n\t  for (i = 0; i < this.sendBuffer.length; i++) {\n\t\tthis.packet(this.sendBuffer[i]);\n\t  }\n\t  this.sendBuffer = [];\n\t};\n\n\t/**\n\t * Called upon server disconnect.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.ondisconnect = function(){\n\t  debug('server disconnect (%s)', this.nsp);\n\t  this.destroy();\n\t  this.onclose('io server disconnect');\n\t};\n\n\t/**\n\t * Called upon forced client/server side disconnections,\n\t * this method ensures the manager stops tracking us and\n\t * that reconnections don't get triggered for this.\n\t *\n\t * @api private.\n\t */\n\n\tSocket.prototype.destroy = function(){\n\t  if (this.subs) {\n\t\t// clean subscriptions to avoid reconnections\n\t\tfor (var i = 0; i < this.subs.length; i++) {\n\t\t  this.subs[i].destroy();\n\t\t}\n\t\tthis.subs = null;\n\t  }\n\n\t  this.io.destroy(this);\n\t};\n\n\t/**\n\t * Disconnects the socket manually.\n\t *\n\t * @return {Socket} self\n\t * @api public\n\t */\n\n\tSocket.prototype.close =\n\tSocket.prototype.disconnect = function(){\n\t  if (this.connected) {\n\t\tdebug('performing disconnect (%s)', this.nsp);\n\t\tthis.packet({ type: parser.DISCONNECT });\n\t  }\n\n\t  // remove socket from pool\n\t  this.destroy();\n\n\t  if (this.connected) {\n\t\t// fire events\n\t\tthis.onclose('io client disconnect');\n\t  }\n\t  return this;\n\t};\n\n\t/**\n\t * Sets the compress flag.\n\t *\n\t * @param {Boolean} if `true`, compresses the sending data\n\t * @return {Socket} self\n\t * @api public\n\t */\n\n\tSocket.prototype.compress = function(compress){\n\t  this.flags = this.flags || {};\n\t  this.flags.compress = compress;\n\t  return this;\n\t};\n\n\t},{\"./on\":33,\"component-bind\":37,\"component-emitter\":38,\"debug\":39,\"has-binary\":41,\"socket.io-parser\":47,\"to-array\":51}],35:[function(_dereq_,module,exports){\n\t(function (global){\n\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar parseuri = _dereq_('parseuri');\n\tvar debug = _dereq_('debug')('socket.io-client:url');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = url;\n\n\t/**\n\t * URL parser.\n\t *\n\t * @param {String} url\n\t * @param {Object} An object meant to mimic window.location.\n\t *                 Defaults to window.location.\n\t * @api public\n\t */\n\n\tfunction url(uri, loc){\n\t  var obj = uri;\n\n\t  // default to window.location\n\t  var loc = loc || global.location;\n\t  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n\t  // relative path support\n\t  if ('string' == typeof uri) {\n\t\tif ('/' == uri.charAt(0)) {\n\t\t  if ('/' == uri.charAt(1)) {\n\t\t\turi = loc.protocol + uri;\n\t\t  } else {\n\t\t\turi = loc.host + uri;\n\t\t  }\n\t\t}\n\n\t\tif (!/^(https?|wss?):\\/\\//.test(uri)) {\n\t\t  debug('protocol-less url %s', uri);\n\t\t  if ('undefined' != typeof loc) {\n\t\t\turi = loc.protocol + '//' + uri;\n\t\t  } else {\n\t\t\turi = 'https://' + uri;\n\t\t  }\n\t\t}\n\n\t\t// parse\n\t\tdebug('parse %s', uri);\n\t\tobj = parseuri(uri);\n\t  }\n\n\t  // make sure we treat `localhost:80` and `localhost` equally\n\t  if (!obj.port) {\n\t\tif (/^(http|ws)$/.test(obj.protocol)) {\n\t\t  obj.port = '80';\n\t\t}\n\t\telse if (/^(http|ws)s$/.test(obj.protocol)) {\n\t\t  obj.port = '443';\n\t\t}\n\t  }\n\n\t  obj.path = obj.path || '/';\n\n\t  var ipv6 = obj.host.indexOf(':') !== -1;\n\t  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n\t  // define unique id\n\t  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n\t  // define href\n\t  obj.href = obj.protocol + '://' + host + (loc && loc.port == obj.port ? '' : (':' + obj.port));\n\n\t  return obj;\n\t}\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"debug\":39,\"parseuri\":45}],36:[function(_dereq_,module,exports){\n\n\t/**\n\t * Expose `Backoff`.\n\t */\n\n\tmodule.exports = Backoff;\n\n\t/**\n\t * Initialize backoff timer with `opts`.\n\t *\n\t * - `min` initial timeout in milliseconds [100]\n\t * - `max` max timeout [10000]\n\t * - `jitter` [0]\n\t * - `factor` [2]\n\t *\n\t * @param {Object} opts\n\t * @api public\n\t */\n\n\tfunction Backoff(opts) {\n\t  opts = opts || {};\n\t  this.ms = opts.min || 100;\n\t  this.max = opts.max || 10000;\n\t  this.factor = opts.factor || 2;\n\t  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n\t  this.attempts = 0;\n\t}\n\n\t/**\n\t * Return the backoff duration.\n\t *\n\t * @return {Number}\n\t * @api public\n\t */\n\n\tBackoff.prototype.duration = function(){\n\t  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n\t  if (this.jitter) {\n\t\tvar rand =  Math.random();\n\t\tvar deviation = Math.floor(rand * this.jitter * ms);\n\t\tms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n\t  }\n\t  return Math.min(ms, this.max) | 0;\n\t};\n\n\t/**\n\t * Reset the number of attempts.\n\t *\n\t * @api public\n\t */\n\n\tBackoff.prototype.reset = function(){\n\t  this.attempts = 0;\n\t};\n\n\t/**\n\t * Set the minimum duration\n\t *\n\t * @api public\n\t */\n\n\tBackoff.prototype.setMin = function(min){\n\t  this.ms = min;\n\t};\n\n\t/**\n\t * Set the maximum duration\n\t *\n\t * @api public\n\t */\n\n\tBackoff.prototype.setMax = function(max){\n\t  this.max = max;\n\t};\n\n\t/**\n\t * Set the jitter\n\t *\n\t * @api public\n\t */\n\n\tBackoff.prototype.setJitter = function(jitter){\n\t  this.jitter = jitter;\n\t};\n\n\n\t},{}],37:[function(_dereq_,module,exports){\n\t/**\n\t * Slice reference.\n\t */\n\n\tvar slice = [].slice;\n\n\t/**\n\t * Bind `obj` to `fn`.\n\t *\n\t * @param {Object} obj\n\t * @param {Function|String} fn or string\n\t * @return {Function}\n\t * @api public\n\t */\n\n\tmodule.exports = function(obj, fn){\n\t  if ('string' == typeof fn) fn = obj[fn];\n\t  if ('function' != typeof fn) throw new Error('bind() requires a function');\n\t  var args = slice.call(arguments, 2);\n\t  return function(){\n\t\treturn fn.apply(obj, args.concat(slice.call(arguments)));\n\t  }\n\t};\n\n\t},{}],38:[function(_dereq_,module,exports){\n\n\t/**\n\t * Expose `Emitter`.\n\t */\n\n\tmodule.exports = Emitter;\n\n\t/**\n\t * Initialize a new `Emitter`.\n\t *\n\t * @api public\n\t */\n\n\tfunction Emitter(obj) {\n\t  if (obj) return mixin(obj);\n\t};\n\n\t/**\n\t * Mixin the emitter properties.\n\t *\n\t * @param {Object} obj\n\t * @return {Object}\n\t * @api private\n\t */\n\n\tfunction mixin(obj) {\n\t  for (var key in Emitter.prototype) {\n\t\tobj[key] = Emitter.prototype[key];\n\t  }\n\t  return obj;\n\t}\n\n\t/**\n\t * Listen on the given `event` with `fn`.\n\t *\n\t * @param {String} event\n\t * @param {Function} fn\n\t * @return {Emitter}\n\t * @api public\n\t */\n\n\tEmitter.prototype.on =\n\tEmitter.prototype.addEventListener = function(event, fn){\n\t  this._callbacks = this._callbacks || {};\n\t  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n\t\t.push(fn);\n\t  return this;\n\t};\n\n\t/**\n\t * Adds an `event` listener that will be invoked a single\n\t * time then automatically removed.\n\t *\n\t * @param {String} event\n\t * @param {Function} fn\n\t * @return {Emitter}\n\t * @api public\n\t */\n\n\tEmitter.prototype.once = function(event, fn){\n\t  function on() {\n\t\tthis.off(event, on);\n\t\tfn.apply(this, arguments);\n\t  }\n\n\t  on.fn = fn;\n\t  this.on(event, on);\n\t  return this;\n\t};\n\n\t/**\n\t * Remove the given callback for `event` or all\n\t * registered callbacks.\n\t *\n\t * @param {String} event\n\t * @param {Function} fn\n\t * @return {Emitter}\n\t * @api public\n\t */\n\n\tEmitter.prototype.off =\n\tEmitter.prototype.removeListener =\n\tEmitter.prototype.removeAllListeners =\n\tEmitter.prototype.removeEventListener = function(event, fn){\n\t  this._callbacks = this._callbacks || {};\n\n\t  // all\n\t  if (0 == arguments.length) {\n\t\tthis._callbacks = {};\n\t\treturn this;\n\t  }\n\n\t  // specific event\n\t  var callbacks = this._callbacks['$' + event];\n\t  if (!callbacks) return this;\n\n\t  // remove all handlers\n\t  if (1 == arguments.length) {\n\t\tdelete this._callbacks['$' + event];\n\t\treturn this;\n\t  }\n\n\t  // remove specific handler\n\t  var cb;\n\t  for (var i = 0; i < callbacks.length; i++) {\n\t\tcb = callbacks[i];\n\t\tif (cb === fn || cb.fn === fn) {\n\t\t  callbacks.splice(i, 1);\n\t\t  break;\n\t\t}\n\t  }\n\t  return this;\n\t};\n\n\t/**\n\t * Emit `event` with the given args.\n\t *\n\t * @param {String} event\n\t * @param {Mixed} ...\n\t * @return {Emitter}\n\t */\n\n\tEmitter.prototype.emit = function(event){\n\t  this._callbacks = this._callbacks || {};\n\t  var args = [].slice.call(arguments, 1)\n\t\t, callbacks = this._callbacks['$' + event];\n\n\t  if (callbacks) {\n\t\tcallbacks = callbacks.slice(0);\n\t\tfor (var i = 0, len = callbacks.length; i < len; ++i) {\n\t\t  callbacks[i].apply(this, args);\n\t\t}\n\t  }\n\n\t  return this;\n\t};\n\n\t/**\n\t * Return array of callbacks for `event`.\n\t *\n\t * @param {String} event\n\t * @return {Array}\n\t * @api public\n\t */\n\n\tEmitter.prototype.listeners = function(event){\n\t  this._callbacks = this._callbacks || {};\n\t  return this._callbacks['$' + event] || [];\n\t};\n\n\t/**\n\t * Check if this emitter has `event` handlers.\n\t *\n\t * @param {String} event\n\t * @return {Boolean}\n\t * @api public\n\t */\n\n\tEmitter.prototype.hasListeners = function(event){\n\t  return !! this.listeners(event).length;\n\t};\n\n\t},{}],39:[function(_dereq_,module,exports){\n\targuments[4][17][0].apply(exports,arguments)\n\t},{\"./debug\":40,\"dup\":17}],40:[function(_dereq_,module,exports){\n\targuments[4][18][0].apply(exports,arguments)\n\t},{\"dup\":18,\"ms\":44}],41:[function(_dereq_,module,exports){\n\t(function (global){\n\n\t/*\n\t * Module requirements.\n\t */\n\n\tvar isArray = _dereq_('isarray');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = hasBinary;\n\n\t/**\n\t * Checks for binary data.\n\t *\n\t * Right now only Buffer and ArrayBuffer are supported..\n\t *\n\t * @param {Object} anything\n\t * @api public\n\t */\n\n\tfunction hasBinary(data) {\n\n\t  function _hasBinary(obj) {\n\t\tif (!obj) return false;\n\n\t\tif ( (global.Buffer && global.Buffer.isBuffer && global.Buffer.isBuffer(obj)) ||\n\t\t\t (global.ArrayBuffer && obj instanceof ArrayBuffer) ||\n\t\t\t (global.Blob && obj instanceof Blob) ||\n\t\t\t (global.File && obj instanceof File)\n\t\t\t) {\n\t\t  return true;\n\t\t}\n\n\t\tif (isArray(obj)) {\n\t\t  for (var i = 0; i < obj.length; i++) {\n\t\t\t  if (_hasBinary(obj[i])) {\n\t\t\t\t  return true;\n\t\t\t  }\n\t\t  }\n\t\t} else if (obj && 'object' == typeof obj) {\n\t\t  // see: https://github.com/Automattic/has-binary/pull/4\n\t\t  if (obj.toJSON && 'function' == typeof obj.toJSON) {\n\t\t\tobj = obj.toJSON();\n\t\t  }\n\n\t\t  for (var key in obj) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {\n\t\t\t  return true;\n\t\t\t}\n\t\t  }\n\t\t}\n\n\t\treturn false;\n\t  }\n\n\t  return _hasBinary(data);\n\t}\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"isarray\":43}],42:[function(_dereq_,module,exports){\n\targuments[4][23][0].apply(exports,arguments)\n\t},{\"dup\":23}],43:[function(_dereq_,module,exports){\n\targuments[4][24][0].apply(exports,arguments)\n\t},{\"dup\":24}],44:[function(_dereq_,module,exports){\n\targuments[4][25][0].apply(exports,arguments)\n\t},{\"dup\":25}],45:[function(_dereq_,module,exports){\n\targuments[4][28][0].apply(exports,arguments)\n\t},{\"dup\":28}],46:[function(_dereq_,module,exports){\n\t(function (global){\n\t/*global Blob,File*/\n\n\t/**\n\t * Module requirements\n\t */\n\n\tvar isArray = _dereq_('isarray');\n\tvar isBuf = _dereq_('./is-buffer');\n\n\t/**\n\t * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n\t * Anything with blobs or files should be fed through removeBlobs before coming\n\t * here.\n\t *\n\t * @param {Object} packet - socket.io event packet\n\t * @return {Object} with deconstructed packet and list of buffers\n\t * @api public\n\t */\n\n\texports.deconstructPacket = function(packet){\n\t  var buffers = [];\n\t  var packetData = packet.data;\n\n\t  function _deconstructPacket(data) {\n\t\tif (!data) return data;\n\n\t\tif (isBuf(data)) {\n\t\t  var placeholder = { _placeholder: true, num: buffers.length };\n\t\t  buffers.push(data);\n\t\t  return placeholder;\n\t\t} else if (isArray(data)) {\n\t\t  var newData = new Array(data.length);\n\t\t  for (var i = 0; i < data.length; i++) {\n\t\t\tnewData[i] = _deconstructPacket(data[i]);\n\t\t  }\n\t\t  return newData;\n\t\t} else if ('object' == typeof data && !(data instanceof Date)) {\n\t\t  var newData = {};\n\t\t  for (var key in data) {\n\t\t\tnewData[key] = _deconstructPacket(data[key]);\n\t\t  }\n\t\t  return newData;\n\t\t}\n\t\treturn data;\n\t  }\n\n\t  var pack = packet;\n\t  pack.data = _deconstructPacket(packetData);\n\t  pack.attachments = buffers.length; // number of binary 'attachments'\n\t  return {packet: pack, buffers: buffers};\n\t};\n\n\t/**\n\t * Reconstructs a binary packet from its placeholder packet and buffers\n\t *\n\t * @param {Object} packet - event packet with placeholders\n\t * @param {Array} buffers - binary buffers to put in placeholder positions\n\t * @return {Object} reconstructed packet\n\t * @api public\n\t */\n\n\texports.reconstructPacket = function(packet, buffers) {\n\t  var curPlaceHolder = 0;\n\n\t  function _reconstructPacket(data) {\n\t\tif (data && data._placeholder) {\n\t\t  var buf = buffers[data.num]; // appropriate buffer (should be natural order anyway)\n\t\t  return buf;\n\t\t} else if (isArray(data)) {\n\t\t  for (var i = 0; i < data.length; i++) {\n\t\t\tdata[i] = _reconstructPacket(data[i]);\n\t\t  }\n\t\t  return data;\n\t\t} else if (data && 'object' == typeof data) {\n\t\t  for (var key in data) {\n\t\t\tdata[key] = _reconstructPacket(data[key]);\n\t\t  }\n\t\t  return data;\n\t\t}\n\t\treturn data;\n\t  }\n\n\t  packet.data = _reconstructPacket(packet.data);\n\t  packet.attachments = undefined; // no longer useful\n\t  return packet;\n\t};\n\n\t/**\n\t * Asynchronously removes Blobs or Files from data via\n\t * FileReader's readAsArrayBuffer method. Used before encoding\n\t * data as msgpack. Calls callback with the blobless data.\n\t *\n\t * @param {Object} data\n\t * @param {Function} callback\n\t * @api private\n\t */\n\n\texports.removeBlobs = function(data, callback) {\n\t  function _removeBlobs(obj, curKey, containingObject) {\n\t\tif (!obj) return obj;\n\n\t\t// convert any blob\n\t\tif ((global.Blob && obj instanceof Blob) ||\n\t\t\t(global.File && obj instanceof File)) {\n\t\t  pendingBlobs++;\n\n\t\t  // async filereader\n\t\t  var fileReader = new FileReader();\n\t\t  fileReader.onload = function() { // this.result == arraybuffer\n\t\t\tif (containingObject) {\n\t\t\t  containingObject[curKey] = this.result;\n\t\t\t}\n\t\t\telse {\n\t\t\t  bloblessData = this.result;\n\t\t\t}\n\n\t\t\t// if nothing pending its callback time\n\t\t\tif(! --pendingBlobs) {\n\t\t\t  callback(bloblessData);\n\t\t\t}\n\t\t  };\n\n\t\t  fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n\t\t} else if (isArray(obj)) { // handle array\n\t\t  for (var i = 0; i < obj.length; i++) {\n\t\t\t_removeBlobs(obj[i], i, obj);\n\t\t  }\n\t\t} else if (obj && 'object' == typeof obj && !isBuf(obj)) { // and object\n\t\t  for (var key in obj) {\n\t\t\t_removeBlobs(obj[key], key, obj);\n\t\t  }\n\t\t}\n\t  }\n\n\t  var pendingBlobs = 0;\n\t  var bloblessData = data;\n\t  _removeBlobs(bloblessData);\n\t  if (!pendingBlobs) {\n\t\tcallback(bloblessData);\n\t  }\n\t};\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"./is-buffer\":48,\"isarray\":43}],47:[function(_dereq_,module,exports){\n\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar debug = _dereq_('debug')('socket.io-parser');\n\tvar json = _dereq_('json3');\n\tvar isArray = _dereq_('isarray');\n\tvar Emitter = _dereq_('component-emitter');\n\tvar binary = _dereq_('./binary');\n\tvar isBuf = _dereq_('./is-buffer');\n\n\t/**\n\t * Protocol version.\n\t *\n\t * @api public\n\t */\n\n\texports.protocol = 4;\n\n\t/**\n\t * Packet types.\n\t *\n\t * @api public\n\t */\n\n\texports.types = [\n\t  'CONNECT',\n\t  'DISCONNECT',\n\t  'EVENT',\n\t  'BINARY_EVENT',\n\t  'ACK',\n\t  'BINARY_ACK',\n\t  'ERROR'\n\t];\n\n\t/**\n\t * Packet type `connect`.\n\t *\n\t * @api public\n\t */\n\n\texports.CONNECT = 0;\n\n\t/**\n\t * Packet type `disconnect`.\n\t *\n\t * @api public\n\t */\n\n\texports.DISCONNECT = 1;\n\n\t/**\n\t * Packet type `event`.\n\t *\n\t * @api public\n\t */\n\n\texports.EVENT = 2;\n\n\t/**\n\t * Packet type `ack`.\n\t *\n\t * @api public\n\t */\n\n\texports.ACK = 3;\n\n\t/**\n\t * Packet type `error`.\n\t *\n\t * @api public\n\t */\n\n\texports.ERROR = 4;\n\n\t/**\n\t * Packet type 'binary event'\n\t *\n\t * @api public\n\t */\n\n\texports.BINARY_EVENT = 5;\n\n\t/**\n\t * Packet type `binary ack`. For acks with binary arguments.\n\t *\n\t * @api public\n\t */\n\n\texports.BINARY_ACK = 6;\n\n\t/**\n\t * Encoder constructor.\n\t *\n\t * @api public\n\t */\n\n\texports.Encoder = Encoder;\n\n\t/**\n\t * Decoder constructor.\n\t *\n\t * @api public\n\t */\n\n\texports.Decoder = Decoder;\n\n\t/**\n\t * A socket.io Encoder instance\n\t *\n\t * @api public\n\t */\n\n\tfunction Encoder() {}\n\n\t/**\n\t * Encode a packet as a single string if non-binary, or as a\n\t * buffer sequence, depending on packet type.\n\t *\n\t * @param {Object} obj - packet object\n\t * @param {Function} callback - function to handle encodings (likely engine.write)\n\t * @return Calls callback with Array of encodings\n\t * @api public\n\t */\n\n\tEncoder.prototype.encode = function(obj, callback){\n\t  debug('encoding packet %j', obj);\n\n\t  if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n\t\tencodeAsBinary(obj, callback);\n\t  }\n\t  else {\n\t\tvar encoding = encodeAsString(obj);\n\t\tcallback([encoding]);\n\t  }\n\t};\n\n\t/**\n\t * Encode packet as string.\n\t *\n\t * @param {Object} packet\n\t * @return {String} encoded\n\t * @api private\n\t */\n\n\tfunction encodeAsString(obj) {\n\t  var str = '';\n\t  var nsp = false;\n\n\t  // first is type\n\t  str += obj.type;\n\n\t  // attachments if we have them\n\t  if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n\t\tstr += obj.attachments;\n\t\tstr += '-';\n\t  }\n\n\t  // if we have a namespace other than `/`\n\t  // we append it followed by a comma `,`\n\t  if (obj.nsp && '/' != obj.nsp) {\n\t\tnsp = true;\n\t\tstr += obj.nsp;\n\t  }\n\n\t  // immediately followed by the id\n\t  if (null != obj.id) {\n\t\tif (nsp) {\n\t\t  str += ',';\n\t\t  nsp = false;\n\t\t}\n\t\tstr += obj.id;\n\t  }\n\n\t  // json data\n\t  if (null != obj.data) {\n\t\tif (nsp) str += ',';\n\t\tstr += json.stringify(obj.data);\n\t  }\n\n\t  debug('encoded %j as %s', obj, str);\n\t  return str;\n\t}\n\n\t/**\n\t * Encode packet as 'buffer sequence' by removing blobs, and\n\t * deconstructing packet into object with placeholders and\n\t * a list of buffers.\n\t *\n\t * @param {Object} packet\n\t * @return {Buffer} encoded\n\t * @api private\n\t */\n\n\tfunction encodeAsBinary(obj, callback) {\n\n\t  function writeEncoding(bloblessData) {\n\t\tvar deconstruction = binary.deconstructPacket(bloblessData);\n\t\tvar pack = encodeAsString(deconstruction.packet);\n\t\tvar buffers = deconstruction.buffers;\n\n\t\tbuffers.unshift(pack); // add packet info to beginning of data list\n\t\tcallback(buffers); // write all the buffers\n\t  }\n\n\t  binary.removeBlobs(obj, writeEncoding);\n\t}\n\n\t/**\n\t * A socket.io Decoder instance\n\t *\n\t * @return {Object} decoder\n\t * @api public\n\t */\n\n\tfunction Decoder() {\n\t  this.reconstructor = null;\n\t}\n\n\t/**\n\t * Mix in `Emitter` with Decoder.\n\t */\n\n\tEmitter(Decoder.prototype);\n\n\t/**\n\t * Decodes an ecoded packet string into packet JSON.\n\t *\n\t * @param {String} obj - encoded packet\n\t * @return {Object} packet\n\t * @api public\n\t */\n\n\tDecoder.prototype.add = function(obj) {\n\t  var packet;\n\t  if ('string' == typeof obj) {\n\t\tpacket = decodeString(obj);\n\t\tif (exports.BINARY_EVENT == packet.type || exports.BINARY_ACK == packet.type) { // binary packet's json\n\t\t  this.reconstructor = new BinaryReconstructor(packet);\n\n\t\t  // no attachments, labeled binary but no binary data to follow\n\t\t  if (this.reconstructor.reconPack.attachments === 0) {\n\t\t\tthis.emit('decoded', packet);\n\t\t  }\n\t\t} else { // non-binary full packet\n\t\t  this.emit('decoded', packet);\n\t\t}\n\t  }\n\t  else if (isBuf(obj) || obj.base64) { // raw binary data\n\t\tif (!this.reconstructor) {\n\t\t  throw new Error('got binary data when not reconstructing a packet');\n\t\t} else {\n\t\t  packet = this.reconstructor.takeBinaryData(obj);\n\t\t  if (packet) { // received final buffer\n\t\t\tthis.reconstructor = null;\n\t\t\tthis.emit('decoded', packet);\n\t\t  }\n\t\t}\n\t  }\n\t  else {\n\t\tthrow new Error('Unknown type: ' + obj);\n\t  }\n\t};\n\n\t/**\n\t * Decode a packet String (JSON data)\n\t *\n\t * @param {String} str\n\t * @return {Object} packet\n\t * @api private\n\t */\n\n\tfunction decodeString(str) {\n\t  var p = {};\n\t  var i = 0;\n\n\t  // look up type\n\t  p.type = Number(str.charAt(0));\n\t  if (null == exports.types[p.type]) return error();\n\n\t  // look up attachments if type binary\n\t  if (exports.BINARY_EVENT == p.type || exports.BINARY_ACK == p.type) {\n\t\tvar buf = '';\n\t\twhile (str.charAt(++i) != '-') {\n\t\t  buf += str.charAt(i);\n\t\t  if (i == str.length) break;\n\t\t}\n\t\tif (buf != Number(buf) || str.charAt(i) != '-') {\n\t\t  throw new Error('Illegal attachments');\n\t\t}\n\t\tp.attachments = Number(buf);\n\t  }\n\n\t  // look up namespace (if any)\n\t  if ('/' == str.charAt(i + 1)) {\n\t\tp.nsp = '';\n\t\twhile (++i) {\n\t\t  var c = str.charAt(i);\n\t\t  if (',' == c) break;\n\t\t  p.nsp += c;\n\t\t  if (i == str.length) break;\n\t\t}\n\t  } else {\n\t\tp.nsp = '/';\n\t  }\n\n\t  // look up id\n\t  var next = str.charAt(i + 1);\n\t  if ('' !== next && Number(next) == next) {\n\t\tp.id = '';\n\t\twhile (++i) {\n\t\t  var c = str.charAt(i);\n\t\t  if (null == c || Number(c) != c) {\n\t\t\t--i;\n\t\t\tbreak;\n\t\t  }\n\t\t  p.id += str.charAt(i);\n\t\t  if (i == str.length) break;\n\t\t}\n\t\tp.id = Number(p.id);\n\t  }\n\n\t  // look up json data\n\t  if (str.charAt(++i)) {\n\t\ttry {\n\t\t  p.data = json.parse(str.substr(i));\n\t\t} catch(e){\n\t\t  return error();\n\t\t}\n\t  }\n\n\t  debug('decoded %s as %j', str, p);\n\t  return p;\n\t}\n\n\t/**\n\t * Deallocates a parser's resources\n\t *\n\t * @api public\n\t */\n\n\tDecoder.prototype.destroy = function() {\n\t  if (this.reconstructor) {\n\t\tthis.reconstructor.finishedReconstruction();\n\t  }\n\t};\n\n\t/**\n\t * A manager of a binary event's 'buffer sequence'. Should\n\t * be constructed whenever a packet of type BINARY_EVENT is\n\t * decoded.\n\t *\n\t * @param {Object} packet\n\t * @return {BinaryReconstructor} initialized reconstructor\n\t * @api private\n\t */\n\n\tfunction BinaryReconstructor(packet) {\n\t  this.reconPack = packet;\n\t  this.buffers = [];\n\t}\n\n\t/**\n\t * Method to be called when binary data received from connection\n\t * after a BINARY_EVENT packet.\n\t *\n\t * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n\t * @return {null | Object} returns null if more binary data is expected or\n\t *   a reconstructed packet object if all buffers have been received.\n\t * @api private\n\t */\n\n\tBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n\t  this.buffers.push(binData);\n\t  if (this.buffers.length == this.reconPack.attachments) { // done with buffer list\n\t\tvar packet = binary.reconstructPacket(this.reconPack, this.buffers);\n\t\tthis.finishedReconstruction();\n\t\treturn packet;\n\t  }\n\t  return null;\n\t};\n\n\t/**\n\t * Cleans up binary packet reconstruction variables.\n\t *\n\t * @api private\n\t */\n\n\tBinaryReconstructor.prototype.finishedReconstruction = function() {\n\t  this.reconPack = null;\n\t  this.buffers = [];\n\t};\n\n\tfunction error(data){\n\t  return {\n\t\ttype: exports.ERROR,\n\t\tdata: 'parser error'\n\t  };\n\t}\n\n\t},{\"./binary\":46,\"./is-buffer\":48,\"component-emitter\":49,\"debug\":39,\"isarray\":43,\"json3\":50}],48:[function(_dereq_,module,exports){\n\t(function (global){\n\n\tmodule.exports = isBuf;\n\n\t/**\n\t * Returns true if obj is a buffer or an arraybuffer.\n\t *\n\t * @api private\n\t */\n\n\tfunction isBuf(obj) {\n\t  return (global.Buffer && global.Buffer.isBuffer(obj)) ||\n\t\t\t (global.ArrayBuffer && obj instanceof ArrayBuffer);\n\t}\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{}],49:[function(_dereq_,module,exports){\n\targuments[4][15][0].apply(exports,arguments)\n\t},{\"dup\":15}],50:[function(_dereq_,module,exports){\n\t(function (global){\n\t/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */\n\t;(function () {\n\t  // Detect the `define` function exposed by asynchronous module loaders. The\n\t  // strict `define` check is necessary for compatibility with `r.js`.\n\t  var isLoader = typeof define === \"function\" && define.amd;\n\n\t  // A set of types used to distinguish objects from primitives.\n\t  var objectTypes = {\n\t\t\"function\": true,\n\t\t\"object\": true\n\t  };\n\n\t  // Detect the `exports` object exposed by CommonJS implementations.\n\t  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n\t  // Use the `global` object exposed by Node (including Browserify via\n\t  // `insert-module-globals`), Narwhal, and Ringo as the default context,\n\t  // and the `window` object in browsers. Rhino exports a `global` function\n\t  // instead.\n\t  var root = objectTypes[typeof window] && window || this,\n\t\t  freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == \"object\" && global;\n\n\t  if (freeGlobal && (freeGlobal[\"global\"] === freeGlobal || freeGlobal[\"window\"] === freeGlobal || freeGlobal[\"self\"] === freeGlobal)) {\n\t\troot = freeGlobal;\n\t  }\n\n\t  // Public: Initializes JSON 3 using the given `context` object, attaching the\n\t  // `stringify` and `parse` functions to the specified `exports` object.\n\t  function runInContext(context, exports) {\n\t\tcontext || (context = root[\"Object\"]());\n\t\texports || (exports = root[\"Object\"]());\n\n\t\t// Native constructor aliases.\n\t\tvar Number = context[\"Number\"] || root[\"Number\"],\n\t\t\tString = context[\"String\"] || root[\"String\"],\n\t\t\tObject = context[\"Object\"] || root[\"Object\"],\n\t\t\tDate = context[\"Date\"] || root[\"Date\"],\n\t\t\tSyntaxError = context[\"SyntaxError\"] || root[\"SyntaxError\"],\n\t\t\tTypeError = context[\"TypeError\"] || root[\"TypeError\"],\n\t\t\tMath = context[\"Math\"] || root[\"Math\"],\n\t\t\tnativeJSON = context[\"JSON\"] || root[\"JSON\"];\n\n\t\t// Delegate to the native `stringify` and `parse` implementations.\n\t\tif (typeof nativeJSON == \"object\" && nativeJSON) {\n\t\t  exports.stringify = nativeJSON.stringify;\n\t\t  exports.parse = nativeJSON.parse;\n\t\t}\n\n\t\t// Convenience aliases.\n\t\tvar objectProto = Object.prototype,\n\t\t\tgetClass = objectProto.toString,\n\t\t\tisProperty, forEach, undef;\n\n\t\t// Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n\t\tvar isExtended = new Date(-3509827334573292);\n\t\ttry {\n\t\t  // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n\t\t  // results for certain dates in Opera >= 10.53.\n\t\t  isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n\t\t\t// Safari < 2.0.2 stores the internal millisecond time value correctly,\n\t\t\t// but clips the values returned by the date methods to the range of\n\t\t\t// signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n\t\t\tisExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n\t\t} catch (exception) {}\n\n\t\t// Internal: Determines whether the native `JSON.stringify` and `parse`\n\t\t// implementations are spec-compliant. Based on work by Ken Snyder.\n\t\tfunction has(name) {\n\t\t  if (has[name] !== undef) {\n\t\t\t// Return cached feature test result.\n\t\t\treturn has[name];\n\t\t  }\n\t\t  var isSupported;\n\t\t  if (name == \"bug-string-char-index\") {\n\t\t\t// IE <= 7 doesn't support accessing string characters using square\n\t\t\t// bracket notation. IE 8 only supports this for primitives.\n\t\t\tisSupported = \"a\"[0] != \"a\";\n\t\t  } else if (name == \"json\") {\n\t\t\t// Indicates whether both `JSON.stringify` and `JSON.parse` are\n\t\t\t// supported.\n\t\t\tisSupported = has(\"json-stringify\") && has(\"json-parse\");\n\t\t  } else {\n\t\t\tvar value, serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n\t\t\t// Test `JSON.stringify`.\n\t\t\tif (name == \"json-stringify\") {\n\t\t\t  var stringify = exports.stringify, stringifySupported = typeof stringify == \"function\" && isExtended;\n\t\t\t  if (stringifySupported) {\n\t\t\t\t// A test function object with a custom `toJSON` method.\n\t\t\t\t(value = function () {\n\t\t\t\t  return 1;\n\t\t\t\t}).toJSON = value;\n\t\t\t\ttry {\n\t\t\t\t  stringifySupported =\n\t\t\t\t\t// Firefox 3.1b1 and b2 serialize string, number, and boolean\n\t\t\t\t\t// primitives as object literals.\n\t\t\t\t\tstringify(0) === \"0\" &&\n\t\t\t\t\t// FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n\t\t\t\t\t// literals.\n\t\t\t\t\tstringify(new Number()) === \"0\" &&\n\t\t\t\t\tstringify(new String()) == '\"\"' &&\n\t\t\t\t\t// FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n\t\t\t\t\t// does not define a canonical JSON representation (this applies to\n\t\t\t\t\t// objects with `toJSON` properties as well, *unless* they are nested\n\t\t\t\t\t// within an object or array).\n\t\t\t\t\tstringify(getClass) === undef &&\n\t\t\t\t\t// IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n\t\t\t\t\t// FF 3.1b3 pass this test.\n\t\t\t\t\tstringify(undef) === undef &&\n\t\t\t\t\t// Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n\t\t\t\t\t// respectively, if the value is omitted entirely.\n\t\t\t\t\tstringify() === undef &&\n\t\t\t\t\t// FF 3.1b1, 2 throw an error if the given value is not a number,\n\t\t\t\t\t// string, array, object, Boolean, or `null` literal. This applies to\n\t\t\t\t\t// objects with custom `toJSON` methods as well, unless they are nested\n\t\t\t\t\t// inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n\t\t\t\t\t// methods entirely.\n\t\t\t\t\tstringify(value) === \"1\" &&\n\t\t\t\t\tstringify([value]) == \"[1]\" &&\n\t\t\t\t\t// Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n\t\t\t\t\t// `\"[null]\"`.\n\t\t\t\t\tstringify([undef]) == \"[null]\" &&\n\t\t\t\t\t// YUI 3.0.0b1 fails to serialize `null` literals.\n\t\t\t\t\tstringify(null) == \"null\" &&\n\t\t\t\t\t// FF 3.1b1, 2 halts serialization if an array contains a function:\n\t\t\t\t\t// `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n\t\t\t\t\t// elides non-JSON values from objects and arrays, unless they\n\t\t\t\t\t// define custom `toJSON` methods.\n\t\t\t\t\tstringify([undef, getClass, null]) == \"[null,null,null]\" &&\n\t\t\t\t\t// Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n\t\t\t\t\t// where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n\t\t\t\t\tstringify({ \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"] }) == serialized &&\n\t\t\t\t\t// FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n\t\t\t\t\tstringify(null, value) === \"1\" &&\n\t\t\t\t\tstringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\n\t\t\t\t\t// JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n\t\t\t\t\t// serialize extended years.\n\t\t\t\t\tstringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n\t\t\t\t\t// The milliseconds are optional in ES 5, but required in 5.1.\n\t\t\t\t\tstringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n\t\t\t\t\t// Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n\t\t\t\t\t// four-digit years instead of six-digit years. Credits: @Yaffle.\n\t\t\t\t\tstringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n\t\t\t\t\t// Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n\t\t\t\t\t// values less than 1000. Credits: @Yaffle.\n\t\t\t\t\tstringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n\t\t\t\t} catch (exception) {\n\t\t\t\t  stringifySupported = false;\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  isSupported = stringifySupported;\n\t\t\t}\n\t\t\t// Test `JSON.parse`.\n\t\t\tif (name == \"json-parse\") {\n\t\t\t  var parse = exports.parse;\n\t\t\t  if (typeof parse == \"function\") {\n\t\t\t\ttry {\n\t\t\t\t  // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n\t\t\t\t  // Conforming implementations should also coerce the initial argument to\n\t\t\t\t  // a string prior to parsing.\n\t\t\t\t  if (parse(\"0\") === 0 && !parse(false)) {\n\t\t\t\t\t// Simple parsing test.\n\t\t\t\t\tvalue = parse(serialized);\n\t\t\t\t\tvar parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n\t\t\t\t\tif (parseSupported) {\n\t\t\t\t\t  try {\n\t\t\t\t\t\t// Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n\t\t\t\t\t\tparseSupported = !parse('\"\\t\"');\n\t\t\t\t\t  } catch (exception) {}\n\t\t\t\t\t  if (parseSupported) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t  // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n\t\t\t\t\t\t  // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n\t\t\t\t\t\t  // certain octal literals.\n\t\t\t\t\t\t  parseSupported = parse(\"01\") !== 1;\n\t\t\t\t\t\t} catch (exception) {}\n\t\t\t\t\t  }\n\t\t\t\t\t  if (parseSupported) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t  // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n\t\t\t\t\t\t  // points. These environments, along with FF 3.1b1 and 2,\n\t\t\t\t\t\t  // also allow trailing commas in JSON objects and arrays.\n\t\t\t\t\t\t  parseSupported = parse(\"1.\") !== 1;\n\t\t\t\t\t\t} catch (exception) {}\n\t\t\t\t\t  }\n\t\t\t\t\t}\n\t\t\t\t  }\n\t\t\t\t} catch (exception) {\n\t\t\t\t  parseSupported = false;\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  isSupported = parseSupported;\n\t\t\t}\n\t\t  }\n\t\t  return has[name] = !!isSupported;\n\t\t}\n\n\t\tif (!has(\"json\")) {\n\t\t  // Common `[[Class]]` name aliases.\n\t\t  var functionClass = \"[object Function]\",\n\t\t\t  dateClass = \"[object Date]\",\n\t\t\t  numberClass = \"[object Number]\",\n\t\t\t  stringClass = \"[object String]\",\n\t\t\t  arrayClass = \"[object Array]\",\n\t\t\t  booleanClass = \"[object Boolean]\";\n\n\t\t  // Detect incomplete support for accessing string characters by index.\n\t\t  var charIndexBuggy = has(\"bug-string-char-index\");\n\n\t\t  // Define additional utility methods if the `Date` methods are buggy.\n\t\t  if (!isExtended) {\n\t\t\tvar floor = Math.floor;\n\t\t\t// A mapping between the months of the year and the number of days between\n\t\t\t// January 1st and the first of the respective month.\n\t\t\tvar Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n\t\t\t// Internal: Calculates the number of days between the Unix epoch and the\n\t\t\t// first day of the given month.\n\t\t\tvar getDay = function (year, month) {\n\t\t\t  return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n\t\t\t};\n\t\t  }\n\n\t\t  // Internal: Determines if a property is a direct property of the given\n\t\t  // object. Delegates to the native `Object#hasOwnProperty` method.\n\t\t  if (!(isProperty = objectProto.hasOwnProperty)) {\n\t\t\tisProperty = function (property) {\n\t\t\t  var members = {}, constructor;\n\t\t\t  if ((members.__proto__ = null, members.__proto__ = {\n\t\t\t\t// The *proto* property cannot be set multiple times in recent\n\t\t\t\t// versions of Firefox and SeaMonkey.\n\t\t\t\t\"toString\": 1\n\t\t\t  }, members).toString != getClass) {\n\t\t\t\t// Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n\t\t\t\t// supports the mutable *proto* property.\n\t\t\t\tisProperty = function (property) {\n\t\t\t\t  // Capture and break the object's prototype chain (see section 8.6.2\n\t\t\t\t  // of the ES 5.1 spec). The parenthesized expression prevents an\n\t\t\t\t  // unsafe transformation by the Closure Compiler.\n\t\t\t\t  var original = this.__proto__, result = property in (this.__proto__ = null, this);\n\t\t\t\t  // Restore the original prototype chain.\n\t\t\t\t  this.__proto__ = original;\n\t\t\t\t  return result;\n\t\t\t\t};\n\t\t\t  } else {\n\t\t\t\t// Capture a reference to the top-level `Object` constructor.\n\t\t\t\tconstructor = members.constructor;\n\t\t\t\t// Use the `constructor` property to simulate `Object#hasOwnProperty` in\n\t\t\t\t// other environments.\n\t\t\t\tisProperty = function (property) {\n\t\t\t\t  var parent = (this.constructor || constructor).prototype;\n\t\t\t\t  return property in this && !(property in parent && this[property] === parent[property]);\n\t\t\t\t};\n\t\t\t  }\n\t\t\t  members = null;\n\t\t\t  return isProperty.call(this, property);\n\t\t\t};\n\t\t  }\n\n\t\t  // Internal: Normalizes the `for...in` iteration algorithm across\n\t\t  // environments. Each enumerated key is yielded to a `callback` function.\n\t\t  forEach = function (object, callback) {\n\t\t\tvar size = 0, Properties, members, property;\n\n\t\t\t// Tests for bugs in the current environment's `for...in` algorithm. The\n\t\t\t// `valueOf` property inherits the non-enumerable flag from\n\t\t\t// `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n\t\t\t(Properties = function () {\n\t\t\t  this.valueOf = 0;\n\t\t\t}).prototype.valueOf = 0;\n\n\t\t\t// Iterate over a new instance of the `Properties` class.\n\t\t\tmembers = new Properties();\n\t\t\tfor (property in members) {\n\t\t\t  // Ignore all properties inherited from `Object.prototype`.\n\t\t\t  if (isProperty.call(members, property)) {\n\t\t\t\tsize++;\n\t\t\t  }\n\t\t\t}\n\t\t\tProperties = members = null;\n\n\t\t\t// Normalize the iteration algorithm.\n\t\t\tif (!size) {\n\t\t\t  // A list of non-enumerable properties inherited from `Object.prototype`.\n\t\t\t  members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n\t\t\t  // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n\t\t\t  // properties.\n\t\t\t  forEach = function (object, callback) {\n\t\t\t\tvar isFunction = getClass.call(object) == functionClass, property, length;\n\t\t\t\tvar hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\n\t\t\t\tfor (property in object) {\n\t\t\t\t  // Gecko <= 1.0 enumerates the `prototype` property of functions under\n\t\t\t\t  // certain conditions; IE does not.\n\t\t\t\t  if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n\t\t\t\t\tcallback(property);\n\t\t\t\t  }\n\t\t\t\t}\n\t\t\t\t// Manually invoke the callback for each non-enumerable property.\n\t\t\t\tfor (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));\n\t\t\t  };\n\t\t\t} else if (size == 2) {\n\t\t\t  // Safari <= 2.0.4 enumerates shadowed properties twice.\n\t\t\t  forEach = function (object, callback) {\n\t\t\t\t// Create a set of iterated properties.\n\t\t\t\tvar members = {}, isFunction = getClass.call(object) == functionClass, property;\n\t\t\t\tfor (property in object) {\n\t\t\t\t  // Store each property name to prevent double enumeration. The\n\t\t\t\t  // `prototype` property of functions is not enumerated due to cross-\n\t\t\t\t  // environment inconsistencies.\n\t\t\t\t  if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\n\t\t\t\t\tcallback(property);\n\t\t\t\t  }\n\t\t\t\t}\n\t\t\t  };\n\t\t\t} else {\n\t\t\t  // No bugs detected; use the standard `for...in` algorithm.\n\t\t\t  forEach = function (object, callback) {\n\t\t\t\tvar isFunction = getClass.call(object) == functionClass, property, isConstructor;\n\t\t\t\tfor (property in object) {\n\t\t\t\t  if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n\t\t\t\t\tcallback(property);\n\t\t\t\t  }\n\t\t\t\t}\n\t\t\t\t// Manually invoke the callback for the `constructor` property due to\n\t\t\t\t// cross-environment inconsistencies.\n\t\t\t\tif (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\n\t\t\t\t  callback(property);\n\t\t\t\t}\n\t\t\t  };\n\t\t\t}\n\t\t\treturn forEach(object, callback);\n\t\t  };\n\n\t\t  // Public: Serializes a JavaScript `value` as a JSON string. The optional\n\t\t  // `filter` argument may specify either a function that alters how object and\n\t\t  // array members are serialized, or an array of strings and numbers that\n\t\t  // indicates which properties should be serialized. The optional `width`\n\t\t  // argument may be either a string or number that specifies the indentation\n\t\t  // level of the output.\n\t\t  if (!has(\"json-stringify\")) {\n\t\t\t// Internal: A map of control characters and their escaped equivalents.\n\t\t\tvar Escapes = {\n\t\t\t  92: \"\\\\\\\\\",\n\t\t\t  34: '\\\\\"',\n\t\t\t  8: \"\\\\b\",\n\t\t\t  12: \"\\\\f\",\n\t\t\t  10: \"\\\\n\",\n\t\t\t  13: \"\\\\r\",\n\t\t\t  9: \"\\\\t\"\n\t\t\t};\n\n\t\t\t// Internal: Converts `value` into a zero-padded string such that its\n\t\t\t// length is at least equal to `width`. The `width` must be <= 6.\n\t\t\tvar leadingZeroes = \"000000\";\n\t\t\tvar toPaddedString = function (width, value) {\n\t\t\t  // The `|| 0` expression is necessary to work around a bug in\n\t\t\t  // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n\t\t\t  return (leadingZeroes + (value || 0)).slice(-width);\n\t\t\t};\n\n\t\t\t// Internal: Double-quotes a string `value`, replacing all ASCII control\n\t\t\t// characters (characters with code unit values between 0 and 31) with\n\t\t\t// their escaped equivalents. This is an implementation of the\n\t\t\t// `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n\t\t\tvar unicodePrefix = \"\\\\u00\";\n\t\t\tvar quote = function (value) {\n\t\t\t  var result = '\"', index = 0, length = value.length, useCharIndex = !charIndexBuggy || length > 10;\n\t\t\t  var symbols = useCharIndex && (charIndexBuggy ? value.split(\"\") : value);\n\t\t\t  for (; index < length; index++) {\n\t\t\t\tvar charCode = value.charCodeAt(index);\n\t\t\t\t// If the character is a control character, append its Unicode or\n\t\t\t\t// shorthand escape sequence; otherwise, append the character as-is.\n\t\t\t\tswitch (charCode) {\n\t\t\t\t  case 8: case 9: case 10: case 12: case 13: case 34: case 92:\n\t\t\t\t\tresult += Escapes[charCode];\n\t\t\t\t\tbreak;\n\t\t\t\t  default:\n\t\t\t\t\tif (charCode < 32) {\n\t\t\t\t\t  result += unicodePrefix + toPaddedString(2, charCode.toString(16));\n\t\t\t\t\t  break;\n\t\t\t\t\t}\n\t\t\t\t\tresult += useCharIndex ? symbols[index] : value.charAt(index);\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  return result + '\"';\n\t\t\t};\n\n\t\t\t// Internal: Recursively serializes an object. Implements the\n\t\t\t// `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n\t\t\tvar serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n\t\t\t  var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\n\t\t\t  try {\n\t\t\t\t// Necessary for host object support.\n\t\t\t\tvalue = object[property];\n\t\t\t  } catch (exception) {}\n\t\t\t  if (typeof value == \"object\" && value) {\n\t\t\t\tclassName = getClass.call(value);\n\t\t\t\tif (className == dateClass && !isProperty.call(value, \"toJSON\")) {\n\t\t\t\t  if (value > -1 / 0 && value < 1 / 0) {\n\t\t\t\t\t// Dates are serialized according to the `Date#toJSON` method\n\t\t\t\t\t// specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n\t\t\t\t\t// for the ISO 8601 date time string format.\n\t\t\t\t\tif (getDay) {\n\t\t\t\t\t  // Manually compute the year, month, date, hours, minutes,\n\t\t\t\t\t  // seconds, and milliseconds if the `getUTC*` methods are\n\t\t\t\t\t  // buggy. Adapted from @Yaffle's `date-shim` project.\n\t\t\t\t\t  date = floor(value / 864e5);\n\t\t\t\t\t  for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\n\t\t\t\t\t  for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\n\t\t\t\t\t  date = 1 + date - getDay(year, month);\n\t\t\t\t\t  // The `time` value specifies the time within the day (see ES\n\t\t\t\t\t  // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n\t\t\t\t\t  // to compute `A modulo B`, as the `%` operator does not\n\t\t\t\t\t  // correspond to the `modulo` operation for negative numbers.\n\t\t\t\t\t  time = (value % 864e5 + 864e5) % 864e5;\n\t\t\t\t\t  // The hours, minutes, seconds, and milliseconds are obtained by\n\t\t\t\t\t  // decomposing the time within the day. See section 15.9.1.10.\n\t\t\t\t\t  hours = floor(time / 36e5) % 24;\n\t\t\t\t\t  minutes = floor(time / 6e4) % 60;\n\t\t\t\t\t  seconds = floor(time / 1e3) % 60;\n\t\t\t\t\t  milliseconds = time % 1e3;\n\t\t\t\t\t} else {\n\t\t\t\t\t  year = value.getUTCFullYear();\n\t\t\t\t\t  month = value.getUTCMonth();\n\t\t\t\t\t  date = value.getUTCDate();\n\t\t\t\t\t  hours = value.getUTCHours();\n\t\t\t\t\t  minutes = value.getUTCMinutes();\n\t\t\t\t\t  seconds = value.getUTCSeconds();\n\t\t\t\t\t  milliseconds = value.getUTCMilliseconds();\n\t\t\t\t\t}\n\t\t\t\t\t// Serialize extended years correctly.\n\t\t\t\t\tvalue = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +\n\t\t\t\t\t  \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n\t\t\t\t\t  // Months, dates, hours, minutes, and seconds should have two\n\t\t\t\t\t  // digits; milliseconds should have three.\n\t\t\t\t\t  \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n\t\t\t\t\t  // Milliseconds are optional in ES 5.0, but required in 5.1.\n\t\t\t\t\t  \".\" + toPaddedString(3, milliseconds) + \"Z\";\n\t\t\t\t  } else {\n\t\t\t\t\tvalue = null;\n\t\t\t\t  }\n\t\t\t\t} else if (typeof value.toJSON == \"function\" && ((className != numberClass && className != stringClass && className != arrayClass) || isProperty.call(value, \"toJSON\"))) {\n\t\t\t\t  // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n\t\t\t\t  // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n\t\t\t\t  // ignores all `toJSON` methods on these objects unless they are\n\t\t\t\t  // defined directly on an instance.\n\t\t\t\t  value = value.toJSON(property);\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  if (callback) {\n\t\t\t\t// If a replacement function was provided, call it to obtain the value\n\t\t\t\t// for serialization.\n\t\t\t\tvalue = callback.call(object, property, value);\n\t\t\t  }\n\t\t\t  if (value === null) {\n\t\t\t\treturn \"null\";\n\t\t\t  }\n\t\t\t  className = getClass.call(value);\n\t\t\t  if (className == booleanClass) {\n\t\t\t\t// Booleans are represented literally.\n\t\t\t\treturn \"\" + value;\n\t\t\t  } else if (className == numberClass) {\n\t\t\t\t// JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n\t\t\t\t// `\"null\"`.\n\t\t\t\treturn value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n\t\t\t  } else if (className == stringClass) {\n\t\t\t\t// Strings are double-quoted and escaped.\n\t\t\t\treturn quote(\"\" + value);\n\t\t\t  }\n\t\t\t  // Recursively serialize objects and arrays.\n\t\t\t  if (typeof value == \"object\") {\n\t\t\t\t// Check for cyclic structures. This is a linear search; performance\n\t\t\t\t// is inversely proportional to the number of unique nested objects.\n\t\t\t\tfor (length = stack.length; length--;) {\n\t\t\t\t  if (stack[length] === value) {\n\t\t\t\t\t// Cyclic structures cannot be serialized by `JSON.stringify`.\n\t\t\t\t\tthrow TypeError();\n\t\t\t\t  }\n\t\t\t\t}\n\t\t\t\t// Add the object to the stack of traversed objects.\n\t\t\t\tstack.push(value);\n\t\t\t\tresults = [];\n\t\t\t\t// Save the current indentation level and indent one additional level.\n\t\t\t\tprefix = indentation;\n\t\t\t\tindentation += whitespace;\n\t\t\t\tif (className == arrayClass) {\n\t\t\t\t  // Recursively serialize array elements.\n\t\t\t\t  for (index = 0, length = value.length; index < length; index++) {\n\t\t\t\t\telement = serialize(index, value, callback, properties, whitespace, indentation, stack);\n\t\t\t\t\tresults.push(element === undef ? \"null\" : element);\n\t\t\t\t  }\n\t\t\t\t  result = results.length ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\n\t\t\t\t} else {\n\t\t\t\t  // Recursively serialize object members. Members are selected from\n\t\t\t\t  // either a user-specified list of property names, or the object\n\t\t\t\t  // itself.\n\t\t\t\t  forEach(properties || value, function (property) {\n\t\t\t\t\tvar element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n\t\t\t\t\tif (element !== undef) {\n\t\t\t\t\t  // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n\t\t\t\t\t  // is not the empty string, let `member` {quote(property) + \":\"}\n\t\t\t\t\t  // be the concatenation of `member` and the `space` character.\"\n\t\t\t\t\t  // The \"`space` character\" refers to the literal space\n\t\t\t\t\t  // character, not the `space` {width} argument provided to\n\t\t\t\t\t  // `JSON.stringify`.\n\t\t\t\t\t  results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n\t\t\t\t\t}\n\t\t\t\t  });\n\t\t\t\t  result = results.length ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\n\t\t\t\t}\n\t\t\t\t// Remove the object from the traversed object stack.\n\t\t\t\tstack.pop();\n\t\t\t\treturn result;\n\t\t\t  }\n\t\t\t};\n\n\t\t\t// Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n\t\t\texports.stringify = function (source, filter, width) {\n\t\t\t  var whitespace, callback, properties, className;\n\t\t\t  if (objectTypes[typeof filter] && filter) {\n\t\t\t\tif ((className = getClass.call(filter)) == functionClass) {\n\t\t\t\t  callback = filter;\n\t\t\t\t} else if (className == arrayClass) {\n\t\t\t\t  // Convert the property names array into a makeshift set.\n\t\t\t\t  properties = {};\n\t\t\t\t  for (var index = 0, length = filter.length, value; index < length; value = filter[index++], ((className = getClass.call(value)), className == stringClass || className == numberClass) && (properties[value] = 1));\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  if (width) {\n\t\t\t\tif ((className = getClass.call(width)) == numberClass) {\n\t\t\t\t  // Convert the `width` to an integer and create a string containing\n\t\t\t\t  // `width` number of space characters.\n\t\t\t\t  if ((width -= width % 1) > 0) {\n\t\t\t\t\tfor (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \");\n\t\t\t\t  }\n\t\t\t\t} else if (className == stringClass) {\n\t\t\t\t  whitespace = width.length <= 10 ? width : width.slice(0, 10);\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  // Opera <= 7.54u2 discards the values associated with empty string keys\n\t\t\t  // (`\"\"`) only if they are used directly within an object member list\n\t\t\t  // (e.g., `!(\"\" in { \"\": 1})`).\n\t\t\t  return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n\t\t\t};\n\t\t  }\n\n\t\t  // Public: Parses a JSON source string.\n\t\t  if (!has(\"json-parse\")) {\n\t\t\tvar fromCharCode = String.fromCharCode;\n\n\t\t\t// Internal: A map of escaped control characters and their unescaped\n\t\t\t// equivalents.\n\t\t\tvar Unescapes = {\n\t\t\t  92: \"\\\\\",\n\t\t\t  34: '\"',\n\t\t\t  47: \"/\",\n\t\t\t  98: \"\\b\",\n\t\t\t  116: \"\\t\",\n\t\t\t  110: \"\\n\",\n\t\t\t  102: \"\\f\",\n\t\t\t  114: \"\\r\"\n\t\t\t};\n\n\t\t\t// Internal: Stores the parser state.\n\t\t\tvar Index, Source;\n\n\t\t\t// Internal: Resets the parser state and throws a `SyntaxError`.\n\t\t\tvar abort = function () {\n\t\t\t  Index = Source = null;\n\t\t\t  throw SyntaxError();\n\t\t\t};\n\n\t\t\t// Internal: Returns the next token, or `\"$\"` if the parser has reached\n\t\t\t// the end of the source string. A token may be a string, number, `null`\n\t\t\t// literal, or Boolean literal.\n\t\t\tvar lex = function () {\n\t\t\t  var source = Source, length = source.length, value, begin, position, isSigned, charCode;\n\t\t\t  while (Index < length) {\n\t\t\t\tcharCode = source.charCodeAt(Index);\n\t\t\t\tswitch (charCode) {\n\t\t\t\t  case 9: case 10: case 13: case 32:\n\t\t\t\t\t// Skip whitespace tokens, including tabs, carriage returns, line\n\t\t\t\t\t// feeds, and space characters.\n\t\t\t\t\tIndex++;\n\t\t\t\t\tbreak;\n\t\t\t\t  case 123: case 125: case 91: case 93: case 58: case 44:\n\t\t\t\t\t// Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n\t\t\t\t\t// the current position.\n\t\t\t\t\tvalue = charIndexBuggy ? source.charAt(Index) : source[Index];\n\t\t\t\t\tIndex++;\n\t\t\t\t\treturn value;\n\t\t\t\t  case 34:\n\t\t\t\t\t// `\"` delimits a JSON string; advance to the next character and\n\t\t\t\t\t// begin parsing the string. String tokens are prefixed with the\n\t\t\t\t\t// sentinel `@` character to distinguish them from punctuators and\n\t\t\t\t\t// end-of-string tokens.\n\t\t\t\t\tfor (value = \"@\", Index++; Index < length;) {\n\t\t\t\t\t  charCode = source.charCodeAt(Index);\n\t\t\t\t\t  if (charCode < 32) {\n\t\t\t\t\t\t// Unescaped ASCII control characters (those with a code unit\n\t\t\t\t\t\t// less than the space character) are not permitted.\n\t\t\t\t\t\tabort();\n\t\t\t\t\t  } else if (charCode == 92) {\n\t\t\t\t\t\t// A reverse solidus (`\\`) marks the beginning of an escaped\n\t\t\t\t\t\t// control character (including `\"`, `\\`, and `/`) or Unicode\n\t\t\t\t\t\t// escape sequence.\n\t\t\t\t\t\tcharCode = source.charCodeAt(++Index);\n\t\t\t\t\t\tswitch (charCode) {\n\t\t\t\t\t\t  case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:\n\t\t\t\t\t\t\t// Revive escaped control characters.\n\t\t\t\t\t\t\tvalue += Unescapes[charCode];\n\t\t\t\t\t\t\tIndex++;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t  case 117:\n\t\t\t\t\t\t\t// `\\u` marks the beginning of a Unicode escape sequence.\n\t\t\t\t\t\t\t// Advance to the first character and validate the\n\t\t\t\t\t\t\t// four-digit code point.\n\t\t\t\t\t\t\tbegin = ++Index;\n\t\t\t\t\t\t\tfor (position = Index + 4; Index < position; Index++) {\n\t\t\t\t\t\t\t  charCode = source.charCodeAt(Index);\n\t\t\t\t\t\t\t  // A valid sequence comprises four hexdigits (case-\n\t\t\t\t\t\t\t  // insensitive) that form a single hexadecimal value.\n\t\t\t\t\t\t\t  if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n\t\t\t\t\t\t\t\t// Invalid Unicode escape sequence.\n\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// Revive the escaped character.\n\t\t\t\t\t\t\tvalue += fromCharCode(\"0x\" + source.slice(begin, Index));\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t  default:\n\t\t\t\t\t\t\t// Invalid escape sequence.\n\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t}\n\t\t\t\t\t  } else {\n\t\t\t\t\t\tif (charCode == 34) {\n\t\t\t\t\t\t  // An unescaped double-quote character marks the end of the\n\t\t\t\t\t\t  // string.\n\t\t\t\t\t\t  break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcharCode = source.charCodeAt(Index);\n\t\t\t\t\t\tbegin = Index;\n\t\t\t\t\t\t// Optimize for the common case where a string is valid.\n\t\t\t\t\t\twhile (charCode >= 32 && charCode != 92 && charCode != 34) {\n\t\t\t\t\t\t  charCode = source.charCodeAt(++Index);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Append the string as-is.\n\t\t\t\t\t\tvalue += source.slice(begin, Index);\n\t\t\t\t\t  }\n\t\t\t\t\t}\n\t\t\t\t\tif (source.charCodeAt(Index) == 34) {\n\t\t\t\t\t  // Advance to the next character and return the revived string.\n\t\t\t\t\t  Index++;\n\t\t\t\t\t  return value;\n\t\t\t\t\t}\n\t\t\t\t\t// Unterminated string.\n\t\t\t\t\tabort();\n\t\t\t\t  default:\n\t\t\t\t\t// Parse numbers and literals.\n\t\t\t\t\tbegin = Index;\n\t\t\t\t\t// Advance past the negative sign, if one is specified.\n\t\t\t\t\tif (charCode == 45) {\n\t\t\t\t\t  isSigned = true;\n\t\t\t\t\t  charCode = source.charCodeAt(++Index);\n\t\t\t\t\t}\n\t\t\t\t\t// Parse an integer or floating-point value.\n\t\t\t\t\tif (charCode >= 48 && charCode <= 57) {\n\t\t\t\t\t  // Leading zeroes are interpreted as octal literals.\n\t\t\t\t\t  if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {\n\t\t\t\t\t\t// Illegal octal literal.\n\t\t\t\t\t\tabort();\n\t\t\t\t\t  }\n\t\t\t\t\t  isSigned = false;\n\t\t\t\t\t  // Parse the integer component.\n\t\t\t\t\t  for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);\n\t\t\t\t\t  // Floats cannot contain a leading decimal point; however, this\n\t\t\t\t\t  // case is already accounted for by the parser.\n\t\t\t\t\t  if (source.charCodeAt(Index) == 46) {\n\t\t\t\t\t\tposition = ++Index;\n\t\t\t\t\t\t// Parse the decimal component.\n\t\t\t\t\t\tfor (; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n\t\t\t\t\t\tif (position == Index) {\n\t\t\t\t\t\t  // Illegal trailing decimal.\n\t\t\t\t\t\t  abort();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tIndex = position;\n\t\t\t\t\t  }\n\t\t\t\t\t  // Parse exponents. The `e` denoting the exponent is\n\t\t\t\t\t  // case-insensitive.\n\t\t\t\t\t  charCode = source.charCodeAt(Index);\n\t\t\t\t\t  if (charCode == 101 || charCode == 69) {\n\t\t\t\t\t\tcharCode = source.charCodeAt(++Index);\n\t\t\t\t\t\t// Skip past the sign following the exponent, if one is\n\t\t\t\t\t\t// specified.\n\t\t\t\t\t\tif (charCode == 43 || charCode == 45) {\n\t\t\t\t\t\t  Index++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Parse the exponential component.\n\t\t\t\t\t\tfor (position = Index; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n\t\t\t\t\t\tif (position == Index) {\n\t\t\t\t\t\t  // Illegal empty exponent.\n\t\t\t\t\t\t  abort();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tIndex = position;\n\t\t\t\t\t  }\n\t\t\t\t\t  // Coerce the parsed value to a JavaScript number.\n\t\t\t\t\t  return +source.slice(begin, Index);\n\t\t\t\t\t}\n\t\t\t\t\t// A negative sign may only precede numbers.\n\t\t\t\t\tif (isSigned) {\n\t\t\t\t\t  abort();\n\t\t\t\t\t}\n\t\t\t\t\t// `true`, `false`, and `null` literals.\n\t\t\t\t\tif (source.slice(Index, Index + 4) == \"true\") {\n\t\t\t\t\t  Index += 4;\n\t\t\t\t\t  return true;\n\t\t\t\t\t} else if (source.slice(Index, Index + 5) == \"false\") {\n\t\t\t\t\t  Index += 5;\n\t\t\t\t\t  return false;\n\t\t\t\t\t} else if (source.slice(Index, Index + 4) == \"null\") {\n\t\t\t\t\t  Index += 4;\n\t\t\t\t\t  return null;\n\t\t\t\t\t}\n\t\t\t\t\t// Unrecognized token.\n\t\t\t\t\tabort();\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  // Return the sentinel `$` character if the parser has reached the end\n\t\t\t  // of the source string.\n\t\t\t  return \"$\";\n\t\t\t};\n\n\t\t\t// Internal: Parses a JSON `value` token.\n\t\t\tvar get = function (value) {\n\t\t\t  var results, hasMembers;\n\t\t\t  if (value == \"$\") {\n\t\t\t\t// Unexpected end of input.\n\t\t\t\tabort();\n\t\t\t  }\n\t\t\t  if (typeof value == \"string\") {\n\t\t\t\tif ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n\t\t\t\t  // Remove the sentinel `@` character.\n\t\t\t\t  return value.slice(1);\n\t\t\t\t}\n\t\t\t\t// Parse object and array literals.\n\t\t\t\tif (value == \"[\") {\n\t\t\t\t  // Parses a JSON array, returning a new JavaScript array.\n\t\t\t\t  results = [];\n\t\t\t\t  for (;; hasMembers || (hasMembers = true)) {\n\t\t\t\t\tvalue = lex();\n\t\t\t\t\t// A closing square bracket marks the end of the array literal.\n\t\t\t\t\tif (value == \"]\") {\n\t\t\t\t\t  break;\n\t\t\t\t\t}\n\t\t\t\t\t// If the array literal contains elements, the current token\n\t\t\t\t\t// should be a comma separating the previous element from the\n\t\t\t\t\t// next.\n\t\t\t\t\tif (hasMembers) {\n\t\t\t\t\t  if (value == \",\") {\n\t\t\t\t\t\tvalue = lex();\n\t\t\t\t\t\tif (value == \"]\") {\n\t\t\t\t\t\t  // Unexpected trailing `,` in array literal.\n\t\t\t\t\t\t  abort();\n\t\t\t\t\t\t}\n\t\t\t\t\t  } else {\n\t\t\t\t\t\t// A `,` must separate each array element.\n\t\t\t\t\t\tabort();\n\t\t\t\t\t  }\n\t\t\t\t\t}\n\t\t\t\t\t// Elisions and leading commas are not permitted.\n\t\t\t\t\tif (value == \",\") {\n\t\t\t\t\t  abort();\n\t\t\t\t\t}\n\t\t\t\t\tresults.push(get(value));\n\t\t\t\t  }\n\t\t\t\t  return results;\n\t\t\t\t} else if (value == \"{\") {\n\t\t\t\t  // Parses a JSON object, returning a new JavaScript object.\n\t\t\t\t  results = {};\n\t\t\t\t  for (;; hasMembers || (hasMembers = true)) {\n\t\t\t\t\tvalue = lex();\n\t\t\t\t\t// A closing curly brace marks the end of the object literal.\n\t\t\t\t\tif (value == \"}\") {\n\t\t\t\t\t  break;\n\t\t\t\t\t}\n\t\t\t\t\t// If the object literal contains members, the current token\n\t\t\t\t\t// should be a comma separator.\n\t\t\t\t\tif (hasMembers) {\n\t\t\t\t\t  if (value == \",\") {\n\t\t\t\t\t\tvalue = lex();\n\t\t\t\t\t\tif (value == \"}\") {\n\t\t\t\t\t\t  // Unexpected trailing `,` in object literal.\n\t\t\t\t\t\t  abort();\n\t\t\t\t\t\t}\n\t\t\t\t\t  } else {\n\t\t\t\t\t\t// A `,` must separate each object member.\n\t\t\t\t\t\tabort();\n\t\t\t\t\t  }\n\t\t\t\t\t}\n\t\t\t\t\t// Leading commas are not permitted, object property names must be\n\t\t\t\t\t// double-quoted strings, and a `:` must separate each property\n\t\t\t\t\t// name and value.\n\t\t\t\t\tif (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n\t\t\t\t\t  abort();\n\t\t\t\t\t}\n\t\t\t\t\tresults[value.slice(1)] = get(lex());\n\t\t\t\t  }\n\t\t\t\t  return results;\n\t\t\t\t}\n\t\t\t\t// Unexpected token encountered.\n\t\t\t\tabort();\n\t\t\t  }\n\t\t\t  return value;\n\t\t\t};\n\n\t\t\t// Internal: Updates a traversed object member.\n\t\t\tvar update = function (source, property, callback) {\n\t\t\t  var element = walk(source, property, callback);\n\t\t\t  if (element === undef) {\n\t\t\t\tdelete source[property];\n\t\t\t  } else {\n\t\t\t\tsource[property] = element;\n\t\t\t  }\n\t\t\t};\n\n\t\t\t// Internal: Recursively traverses a parsed JSON object, invoking the\n\t\t\t// `callback` function for each value. This is an implementation of the\n\t\t\t// `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n\t\t\tvar walk = function (source, property, callback) {\n\t\t\t  var value = source[property], length;\n\t\t\t  if (typeof value == \"object\" && value) {\n\t\t\t\t// `forEach` can't be used to traverse an array in Opera <= 8.54\n\t\t\t\t// because its `Object#hasOwnProperty` implementation returns `false`\n\t\t\t\t// for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n\t\t\t\tif (getClass.call(value) == arrayClass) {\n\t\t\t\t  for (length = value.length; length--;) {\n\t\t\t\t\tupdate(value, length, callback);\n\t\t\t\t  }\n\t\t\t\t} else {\n\t\t\t\t  forEach(value, function (property) {\n\t\t\t\t\tupdate(value, property, callback);\n\t\t\t\t  });\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  return callback.call(source, property, value);\n\t\t\t};\n\n\t\t\t// Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n\t\t\texports.parse = function (source, callback) {\n\t\t\t  var result, value;\n\t\t\t  Index = 0;\n\t\t\t  Source = \"\" + source;\n\t\t\t  result = get(lex());\n\t\t\t  // If a JSON string contains multiple tokens, it is invalid.\n\t\t\t  if (lex() != \"$\") {\n\t\t\t\tabort();\n\t\t\t  }\n\t\t\t  // Reset the parser state.\n\t\t\t  Index = Source = null;\n\t\t\t  return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n\t\t\t};\n\t\t  }\n\t\t}\n\n\t\texports[\"runInContext\"] = runInContext;\n\t\treturn exports;\n\t  }\n\n\t  if (freeExports && !isLoader) {\n\t\t// Export for CommonJS environments.\n\t\trunInContext(root, freeExports);\n\t  } else {\n\t\t// Export for web browsers and JavaScript engines.\n\t\tvar nativeJSON = root.JSON,\n\t\t\tpreviousJSON = root[\"JSON3\"],\n\t\t\tisRestored = false;\n\n\t\tvar JSON3 = runInContext(root, (root[\"JSON3\"] = {\n\t\t  // Public: Restores the original value of the global `JSON` object and\n\t\t  // returns a reference to the `JSON3` object.\n\t\t  \"noConflict\": function () {\n\t\t\tif (!isRestored) {\n\t\t\t  isRestored = true;\n\t\t\t  root.JSON = nativeJSON;\n\t\t\t  root[\"JSON3\"] = previousJSON;\n\t\t\t  nativeJSON = previousJSON = null;\n\t\t\t}\n\t\t\treturn JSON3;\n\t\t  }\n\t\t}));\n\n\t\troot.JSON = {\n\t\t  \"parse\": JSON3.parse,\n\t\t  \"stringify\": JSON3.stringify\n\t\t};\n\t  }\n\n\t  // Export for asynchronous module loaders.\n\t  if (isLoader) {\n\t\tdefine(function () {\n\t\t  return JSON3;\n\t\t});\n\t  }\n\t}).call(this);\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{}],51:[function(_dereq_,module,exports){\n\tmodule.exports = toArray\n\n\tfunction toArray(list, index) {\n\t\tvar array = []\n\n\t\tindex = index || 0\n\n\t\tfor (var i = index || 0; i < list.length; i++) {\n\t\t\tarray[i - index] = list[i]\n\t\t}\n\n\t\treturn array\n\t}\n\n\t},{}]},{},[31])(31)\n\t});\n}\n"],"sourceRoot":"/source/","file":"project.dev.js"}